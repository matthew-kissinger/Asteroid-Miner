{"version":3,"file":"settings-BHCPrtiN.js","sources":["../../js/modules/ui/components/settings/styles.ts","../../js/modules/ui/components/settings/audioSettings.ts","../../js/modules/ui/components/settings/graphicsSettings.ts","../../js/modules/ui/components/settings/settingsView.ts","../../js/modules/ui/components/settings/persistence.ts","../../js/modules/ui/components/settings/eventHandlers.ts","../../js/modules/ui/components/settings/helpers.ts","../../js/modules/ui/settings.ts"],"sourcesContent":["// styles.js - Settings UI styles and CSS generation\n\nexport class SettingsStyles {\n    isMobile: boolean;\n\n    constructor(isMobile: boolean) {\n        this.isMobile = isMobile;\n    }\n\n    /**\n     * Creates the main settings container with responsive styling\n     */\n    createSettingsContainer(): HTMLDivElement {\n        const settingsContainer: HTMLDivElement = document.createElement('div');\n        settingsContainer.id = 'settings-container';\n        settingsContainer.style.position = 'absolute';\n        settingsContainer.style.top = '50%';\n        settingsContainer.style.left = '50%';\n        settingsContainer.style.transform = 'translate(-50%, -50%)';\n        \n        // Adjust size for mobile\n        if (this.isMobile) {\n            settingsContainer.style.width = '95%';\n            settingsContainer.style.maxWidth = '600px';\n            settingsContainer.style.height = '90vh';\n        } else {\n            settingsContainer.style.width = '700px';\n            settingsContainer.style.maxHeight = '90vh';\n        }\n        \n        settingsContainer.style.overflowY = 'auto';\n        settingsContainer.style.backgroundColor = 'rgba(20, 30, 50, 0.9)';\n        settingsContainer.style.color = '#fff';\n        settingsContainer.style.padding = this.isMobile ? '20px' : '30px';\n        settingsContainer.style.borderRadius = '15px';\n        settingsContainer.style.border = '2px solid #33aaff';\n        settingsContainer.style.boxShadow = '0 0 30px #33aaff';\n        settingsContainer.style.fontFamily = 'Courier New, monospace';\n        settingsContainer.style.zIndex = '1000';\n        settingsContainer.style.display = 'none';\n        \n        // Add mobile-specific scroll support\n        if (this.isMobile) {\n            (settingsContainer.style as any).webkitOverflowScrolling = 'touch';\n            settingsContainer.style.touchAction = 'pan-y';\n            settingsContainer.style.overscrollBehavior = 'contain';\n        }\n        \n        return settingsContainer;\n    }\n\n    /**\n     * Gets responsive styles for settings rows\n     */\n    getSettingsRowStyle(): string {\n        return `display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-direction: ${this.isMobile ? 'column' : 'row'}; align-items: ${this.isMobile ? 'flex-start' : 'center'};`;\n    }\n\n    /**\n     * Gets styles for setting labels\n     */\n    getSettingLabelStyle(): string {\n        return `margin-bottom: ${this.isMobile ? '8px' : '0'}; ${this.isMobile ? 'width: 100%' : ''}`;\n    }\n\n    /**\n     * Gets styles for setting controls\n     */\n    getSettingControlStyle(): string {\n        return `${this.isMobile ? 'width: 100%' : ''}`;\n    }\n\n    /**\n     * Gets styles for toggle controls\n     */\n    getToggleControlStyle(): string {\n        return `${this.isMobile ? 'width: 100%; display: flex; justify-content: flex-end;' : ''}`;\n    }\n\n    /**\n     * Gets styles for label text\n     */\n    getLabelTextStyle(): string {\n        return `font-weight: bold; font-size: ${this.isMobile ? '15px' : 'inherit'};`;\n    }\n\n    /**\n     * Gets styles for description text\n     */\n    getDescriptionTextStyle(): string {\n        return `margin: 5px 0 0 0; font-size: ${this.isMobile ? '11px' : '12px'}; color: #aaa;`;\n    }\n\n    /**\n     * Gets styles for select elements\n     */\n    getSelectStyle(): string {\n        return `background-color: #2a3a5a; color: white; border: 1px solid #33aaff; padding: ${this.isMobile ? '10px' : '8px'}; border-radius: 5px; width: ${this.isMobile ? '100%' : 'auto'}; font-size: ${this.isMobile ? '16px' : 'inherit'};`;\n    }\n\n    /**\n     * Gets styles for toggle switches\n     */\n    getToggleStyle(): string {\n        return `display: inline-block; position: relative; width: ${this.isMobile ? '70px' : '60px'}; height: ${this.isMobile ? '34px' : '30px'};`;\n    }\n\n    /**\n     * Gets styles for toggle inputs\n     */\n    getToggleInputStyle(): string {\n        return 'opacity: 0; width: 0; height: 0;';\n    }\n\n    /**\n     * Gets styles for toggle sliders\n     */\n    getToggleSliderStyle(): string {\n        return `position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #555; border-radius: ${this.isMobile ? '17px' : '15px'}; transition: .4s;`;\n    }\n\n    /**\n     * Gets styles for section headers\n     */\n    getSectionHeaderStyle(): string {\n        return `color: #33aaff; border-bottom: 1px solid #33aaff; padding-bottom: 10px; font-size: ${this.isMobile ? '18px' : '20px'};`;\n    }\n\n    /**\n     * Gets styles for main title\n     */\n    getMainTitleStyle(): string {\n        return `text-align: center; color: #33aaff; margin-top: 0; font-size: ${this.isMobile ? '24px' : '28px'};`;\n    }\n\n    /**\n     * Gets styles for preset buttons container\n     */\n    getPresetContainerStyle(): string {\n        return `display: flex; justify-content: space-between; margin-bottom: 20px; flex-direction: ${this.isMobile ? 'column' : 'row'}; gap: ${this.isMobile ? '10px' : '0'};`;\n    }\n\n    /**\n     * Gets styles for preset buttons\n     */\n    getPresetButtonStyle(): string {\n        return `flex: 1; margin-right: ${this.isMobile ? '0' : '10px'}; padding: ${this.isMobile ? '15px' : '10px'}; background-color: #2a3a5a; color: white; border: 1px solid #33aaff; border-radius: 5px; cursor: pointer; font-size: ${this.isMobile ? '16px' : 'inherit'};`;\n    }\n\n    /**\n     * Gets styles for action buttons container\n     */\n    getActionButtonsContainerStyle(): string {\n        return `display: flex; justify-content: space-between; flex-direction: ${this.isMobile ? 'column' : 'row'}; gap: ${this.isMobile ? '15px' : '0'};`;\n    }\n\n    /**\n     * Gets styles for apply button\n     */\n    getApplyButtonStyle(): string {\n        return `flex: 1; margin-right: ${this.isMobile ? '0' : '10px'}; padding: ${this.isMobile ? '20px' : '15px'}; background-color: #33aaff; color: black; border: none; border-radius: 5px; cursor: pointer; font-family: 'Courier New', monospace; font-weight: bold; font-size: ${this.isMobile ? '18px' : '16px'};`;\n    }\n\n    /**\n     * Gets styles for back button\n     */\n    getBackButtonStyle(): string {\n        return `flex: 1; padding: ${this.isMobile ? '20px' : '15px'}; background-color: #555; color: white; border: none; border-radius: 5px; cursor: pointer; font-family: 'Courier New', monospace; font-weight: bold; font-size: ${this.isMobile ? '18px' : '16px'};`;\n    }\n\n    /**\n     * Gets styles for notification\n     */\n    getNotificationStyle(): Record<string, string> {\n        return {\n            position: 'fixed',\n            top: this.isMobile ? '25%' : '20%',\n            left: '50%',\n            transform: 'translate(-50%, -50%)',\n            backgroundColor: 'rgba(0, 0, 0, 0.8)',\n            color: '#33aaff',\n            padding: this.isMobile ? '20px 40px' : '15px 30px',\n            borderRadius: '10px',\n            fontFamily: 'Courier New, monospace',\n            fontSize: this.isMobile ? '18px' : '16px',\n            zIndex: '9999',\n            textAlign: 'center'\n        };\n    }\n\n    /**\n     * Injects toggle slider CSS into the document head\n     */\n    injectToggleCSS(): void {\n        const style: HTMLStyleElement = document.createElement('style');\n        style.textContent = `\n            .slider:before {\n                position: absolute;\n                content: \"\";\n                height: ${this.isMobile ? '26px' : '22px'};\n                width: ${this.isMobile ? '26px' : '22px'};\n                left: 4px;\n                bottom: 4px;\n                background-color: white;\n                border-radius: 50%;\n                transition: .4s;\n            }\n            \n            input:checked + .slider {\n                background-color: #33aaff;\n            }\n            \n            input:checked + .slider:before {\n                transform: translateX(${this.isMobile ? '36px' : '30px'});\n            }\n        `;\n        \n        document.head.appendChild(style);\n    }\n\n    /**\n     * Creates a settings row with label and control\n     */\n    createSettingRow(labelText: string, description: string, controlHtml: string): string {\n        return `\n            <div class=\"settings-row\" style=\"${this.getSettingsRowStyle()}\">\n                <div style=\"${this.getSettingLabelStyle()}\">\n                    <label style=\"${this.getLabelTextStyle()}\">${labelText}</label>\n                    <p style=\"${this.getDescriptionTextStyle()}\">${description}</p>\n                </div>\n                <div style=\"${this.getSettingControlStyle()}\">\n                    ${controlHtml}\n                </div>\n            </div>\n        `;\n    }\n\n    /**\n     * Creates a toggle settings row\n     */\n    createToggleRow(labelText: string, description: string, inputId: string): string {\n        const toggleHtml: string = `\n            <label class=\"toggle\" style=\"${this.getToggleStyle()}\">\n                <input type=\"checkbox\" id=\"${inputId}\" style=\"${this.getToggleInputStyle()}\">\n                <span class=\"slider\" style=\"${this.getToggleSliderStyle()}\"></span>\n            </label>\n        `;\n\n        return `\n            <div class=\"settings-row\" style=\"${this.getSettingsRowStyle()}\">\n                <div style=\"${this.getSettingLabelStyle()}\">\n                    <label style=\"${this.getLabelTextStyle()}\">${labelText}</label>\n                    <p style=\"${this.getDescriptionTextStyle()}\">${description}</p>\n                </div>\n                <div style=\"${this.getToggleControlStyle()}\">\n                    ${toggleHtml}\n                </div>\n            </div>\n        `;\n    }\n\n    /**\n     * Creates a select dropdown settings row\n     */\n    createSelectRow(labelText: string, description: string, selectId: string, options: { value: string; text: string }[]): string {\n        const optionsHtml: string = options.map(option => \n            `<option value=\"${option.value}\">${option.text}</option>`\n        ).join('');\n\n        const selectHtml: string = `\n            <select id=\"${selectId}\" style=\"${this.getSelectStyle()}\">\n                ${optionsHtml}\n            </select>\n        `;\n\n        return this.createSettingRow(labelText, description, selectHtml);\n    }\n}","// audioSettings.js - Audio settings controls and logic\n\nimport { SettingsStyles } from './styles.ts';\n\nexport class AudioSettings {\n    game: any; // TODO: Define a proper interface for 'game'\n    styles: SettingsStyles;\n\n    constructor(game: any, styles: SettingsStyles) {\n        this.game = game;\n        this.styles = styles;\n    }\n\n    /**\n     * Creates the audio settings section HTML\n     */\n    createAudioSettingsHTML(): string {\n        return `\n            <div style=\"margin-bottom: 20px;\">\n                <h3 style=\"${this.styles.getSectionHeaderStyle()}\">AUDIO SETTINGS</h3>\n                \n                ${this.styles.createToggleRow(\n                    'Spatial Audio',\n                    '3D positional sound effects',\n                    'spatial-audio'\n                )}\n            </div>\n        `;\n    }\n\n    /**\n     * Applies audio settings to the game\n     */\n    applyAudioSettings(settings: { spatialAudio: boolean }): void {\n        if (!this.game.audio) return;\n        \n        const audio = this.game.audio;\n        \n        // Apply spatial audio setting\n        if (audio.spatialAudio !== undefined) {\n            audio.spatialAudio = settings.spatialAudio;\n        }\n    }\n\n    /**\n     * Updates audio-related UI elements with current settings\n     */\n    updateAudioUI(settings: { spatialAudio: boolean }): void {\n        const spatialAudioElement: HTMLInputElement | null = document.getElementById('spatial-audio') as HTMLInputElement;\n        if (spatialAudioElement) {\n            spatialAudioElement.checked = settings.spatialAudio;\n        }\n    }\n\n    /**\n     * Reads audio settings from UI elements\n     */\n    readAudioSettings(): { spatialAudio: boolean } {\n        const spatialAudioElement: HTMLInputElement | null = document.getElementById('spatial-audio') as HTMLInputElement;\n        \n        return {\n            spatialAudio: spatialAudioElement ? spatialAudioElement.checked : true\n        };\n    }\n\n    /**\n     * Applies audio preset settings\n     */\n    applyAudioPreset(preset: string, settings: { spatialAudio: boolean }): { spatialAudio: boolean } {\n        switch (preset) {\n            case 'performance':\n                settings.spatialAudio = false;\n                break;\n                \n            case 'balanced':\n            case 'quality':\n                settings.spatialAudio = true;\n                break;\n        }\n        \n        return settings;\n    }\n}","// graphicsSettings.js - Graphics settings controls and logic\n\nimport * as THREE from 'three';\nimport { SettingsStyles } from './styles.ts';\n\nexport class GraphicsSettings {\n    game: any; // TODO: Define a proper interface for 'game'\n    styles: SettingsStyles;\n\n    constructor(game: any, styles: SettingsStyles) {\n        this.game = game;\n        this.styles = styles;\n    }\n\n    /**\n     * Creates the graphics settings section HTML\n     */\n    createGraphicsSettingsHTML(): string {\n        return `\n            <div style=\"margin-bottom: 20px;\">\n                <h3 style=\"${this.styles.getSectionHeaderStyle()}\">GRAPHICS SETTINGS</h3>\n                \n                ${this.styles.createSelectRow(\n                    'Graphical Quality',\n                    'Affects overall visual fidelity and performance',\n                    'graphical-quality',\n                    [\n                        { value: 'low', text: 'Low' },\n                        { value: 'medium', text: 'Medium' },\n                        { value: 'high', text: 'High' }\n                    ]\n                )}\n                \n                ${this.styles.createToggleRow(\n                    'Post-processing Effects',\n                    'Bloom, anti-aliasing, and visual effects',\n                    'post-processing'\n                )}\n                \n                ${this.styles.createToggleRow(\n                    'Volumetric Light Rays',\n                    'Enable sunlight rays effect',\n                    'god-rays-enabled'\n                )}\n                \n                ${this.styles.createSelectRow(\n                    'Light Ray Type',\n                    'Choose light ray effect style',\n                    'god-rays-type',\n                    [\n                        { value: 'standard', text: 'Standard God Rays' },\n                        { value: 'claude', text: 'Claude Rays' }\n                    ]\n                )}\n                \n                ${this.styles.createSelectRow(\n                    'Asteroid Detail',\n                    'Affects asteroid count and model complexity',\n                    'asteroid-detail',\n                    [\n                        { value: 'low', text: 'Low' },\n                        { value: 'medium', text: 'Medium' },\n                        { value: 'high', text: 'High' }\n                    ]\n                )}\n                \n                ${this.styles.createSelectRow(\n                    'Lighting Quality',\n                    'Affects light sources and shadows',\n                    'lighting-quality',\n                    [\n                        { value: 'low', text: 'Low' },\n                        { value: 'medium', text: 'Medium' },\n                        { value: 'high', text: 'High' }\n                    ]\n                )}\n                \n                ${this.styles.createSelectRow(\n                    'Particle Effects',\n                    'Affects thruster, explosion, and other particle effects',\n                    'particle-effects',\n                    [\n                        { value: 'low', text: 'Low' },\n                        { value: 'medium', text: 'Medium' },\n                        { value: 'high', text: 'High' }\n                    ]\n                )}\n                \n                ${this.styles.createSelectRow(\n                    'Resolution Scale',\n                    'Adjusts rendering resolution',\n                    'resolution-scale',\n                    [\n                        { value: 'low', text: 'Low (75%)' },\n                        { value: 'medium', text: 'Medium (100%)' },\n                        { value: 'high', text: 'High (125%)' }\n                    ]\n                )}\n            </div>\n        `;\n    }\n\n    /**\n     * Applies graphics settings to the game renderer\n     */\n    applyGraphicsSettings(settings: any): void {\n        if (!this.game) return;\n        \n        // Apply renderer settings\n        this.applyRendererSettings(settings);\n        \n        // Apply environment settings\n        this.applyEnvironmentSettings(settings);\n        \n        console.log('Graphics settings applied successfully');\n    }\n\n    /**\n     * Applies renderer-specific graphics settings\n     */\n    applyRendererSettings(settings: any): void {\n        if (!this.game.renderer) return;\n        \n        const renderer: any = this.game.renderer;\n        \n        // Apply graphical quality\n        switch (settings.graphicalQuality) {\n            case 'low':\n                // Disable antialiasing\n                if (renderer.renderer) {\n                    renderer.renderer.antialias = false;\n                }\n                \n                // Set low shadow map size\n                if (renderer.renderer && renderer.renderer.shadowMap) {\n                    renderer.renderer.shadowMap.enabled = false;\n                }\n                break;\n                \n            case 'medium':\n                // Enable antialiasing\n                if (renderer.renderer) {\n                    renderer.renderer.antialias = true;\n                }\n                \n                // Set medium shadow map size\n                if (renderer.renderer && renderer.renderer.shadowMap) {\n                    renderer.renderer.shadowMap.enabled = true;\n                    renderer.renderer.shadowMap.type = THREE.PCFShadowMap;\n                }\n                break;\n                \n            case 'high':\n                // Enable antialiasing\n                if (renderer.renderer) {\n                    renderer.renderer.antialias = true;\n                }\n                \n                // Set high shadow map size\n                if (renderer.renderer && renderer.renderer.shadowMap) {\n                    renderer.renderer.shadowMap.enabled = true;\n                    renderer.renderer.shadowMap.type = THREE.PCFSoftShadowMap;\n                }\n                break;\n        }\n        \n        // Apply post-processing setting\n        if (renderer.composer) {\n            renderer.useBasicRendering = !settings.postProcessing;\n        }\n        \n        // Apply god ray type setting first (this affects ambient light)\n        if (renderer.setRayType) {\n            const useClaudeRays = settings.godRaysType === 'claude';\n            renderer.setRayType(useClaudeRays);\n        }\n        \n        // Apply volumetric lighting (god rays) settings\n        if (renderer.setVolumetricLightEnabled) {\n            renderer.setVolumetricLightEnabled(settings.godRaysEnabled);\n            \n            // Ensure lighting is adjusted even when disabling god rays\n            if (renderer.adjustLightingForRayType) {\n                renderer.adjustLightingForRayType();\n            }\n        }\n        \n        // Apply volumetric light intensity based on quality setting\n        if (renderer.setVolumetricLightIntensity) {\n            let intensity;\n            switch (settings.graphicalQuality) {\n                case 'low':\n                    intensity = 0.4; // Increased from 0.3\n                    break;\n                case 'medium':\n                    intensity = 0.65; // Increased from 0.5\n                    break;\n                case 'high':\n                    intensity = 0.85; // Increased from 0.7\n                    break;\n                default:\n                    intensity = 0.65;\n            }\n            renderer.setVolumetricLightIntensity(intensity);\n        }\n        \n        // Apply bloom settings based on quality\n        if (renderer.bloomPass) {\n            switch (settings.graphicalQuality) {\n                case 'low':\n                    renderer.adjustBloom(0.4, 0.3, 0.9);\n                    break;\n                case 'medium':\n                    renderer.adjustBloom(0.6, 0.4, 0.85);\n                    break;\n                case 'high':\n                    renderer.adjustBloom(0.8, 0.5, 0.8);\n                    break;\n            }\n        }\n        \n        // Apply resolution scaling\n        if (renderer.renderer) {\n            let pixelRatio = window.devicePixelRatio || 1;\n            \n            switch (settings.resolutionScale) {\n                case 'low':\n                    pixelRatio *= 0.75;\n                    break;\n                case 'medium':\n                    // Use default pixel ratio\n                    break;\n                case 'high':\n                    pixelRatio *= 1.25;\n                    break;\n            }\n            \n            renderer.renderer.setPixelRatio(pixelRatio);\n            \n            // Update size to apply new pixel ratio\n            renderer.handleResize();\n        }\n    }\n\n    /**\n     * Applies environment-related graphics settings\n     */\n    applyEnvironmentSettings(settings: any): void {\n        if (!this.game.environment) return;\n        \n        const environment: any = this.game.environment;\n        \n        // Apply asteroid detail settings\n        if (environment.asteroidBelt && environment.asteroidBelt.updateDensity) {\n            switch (settings.asteroidDetail) {\n                case 'low':\n                    environment.asteroidBelt.updateDensity(0.5); // 50% density\n                    break;\n                case 'medium':\n                    environment.asteroidBelt.updateDensity(1.0); // 100% density\n                    break;\n                case 'high':\n                    environment.asteroidBelt.updateDensity(1.5); // 150% density\n                    break;\n            }\n        }\n    }\n\n    /**\n     * Applies physics settings related to graphics\n     */\n    applyPhysicsSettings(settings: any): void {\n        // Physics settings don't need much adjustment, but we can optimize collision detection\n        // based on asteroid detail setting\n        if (this.game.physics) {\n            const physics = this.game.physics;\n            \n            switch (settings.asteroidDetail) {\n                case 'low':\n                    physics.collisionDistance = 10; // Reduced collision distance\n                    break;\n                case 'medium':\n                    physics.collisionDistance = 15; // Default\n                    break;\n                case 'high':\n                    physics.collisionDistance = 20; // More precise collision\n                    break;\n            }\n        }\n    }\n\n    /**\n     * Updates graphics-related UI elements with current settings\n     */\n    updateGraphicsUI(settings: any): void {\n        const elements: Record<string, any> = {\n            'graphical-quality': settings.graphicalQuality,\n            'post-processing': settings.postProcessing,\n            'asteroid-detail': settings.asteroidDetail,\n            'lighting-quality': settings.lightingQuality,\n            'particle-effects': settings.particleEffects,\n            'resolution-scale': settings.resolutionScale,\n            'god-rays-enabled': settings.godRaysEnabled,\n            'god-rays-type': settings.godRaysType\n        };\n\n        for (const [elementId, value] of Object.entries(elements)) {\n            const element: HTMLInputElement | HTMLSelectElement | null = document.getElementById(elementId) as HTMLInputElement | HTMLSelectElement;\n            if (element) {\n                if (element.type === 'checkbox') {\n                    (element as HTMLInputElement).checked = value;\n                } else {\n                    (element as HTMLSelectElement).value = value;\n                }\n            }\n        }\n    }\n\n    /**\n     * Reads graphics settings from UI elements\n     */\n    readGraphicsSettings(): {\n        graphicalQuality: string;\n        postProcessing: boolean;\n        asteroidDetail: string;\n        lightingQuality: string;\n        particleEffects: string;\n        resolutionScale: string;\n        godRaysEnabled: boolean;\n        godRaysType: string;\n    } {\n        return {\n            graphicalQuality: this.getElementValue('graphical-quality', 'medium'),\n            postProcessing: this.getElementChecked('post-processing', true),\n            asteroidDetail: this.getElementValue('asteroid-detail', 'medium'),\n            lightingQuality: this.getElementValue('lighting-quality', 'medium'),\n            particleEffects: this.getElementValue('particle-effects', 'medium'),\n            resolutionScale: this.getElementValue('resolution-scale', 'medium'),\n            godRaysEnabled: this.getElementChecked('god-rays-enabled', false),\n            godRaysType: this.getElementValue('god-rays-type', 'standard')\n        };\n    }\n\n    /**\n     * Helper to get element value with fallback\n     */\n    getElementValue(elementId: string, defaultValue: string): string {\n        const element: HTMLSelectElement | null = document.getElementById(elementId) as HTMLSelectElement;\n        return element ? element.value : defaultValue;\n    }\n\n    /**\n     * Helper to get element checked state with fallback\n     */\n    getElementChecked(elementId: string, defaultValue: boolean): boolean {\n        const element: HTMLInputElement | null = document.getElementById(elementId) as HTMLInputElement;\n        return element ? element.checked : defaultValue;\n    }\n\n    /**\n     * Applies graphics preset settings\n     */\n    applyGraphicsPreset(preset: string, settings: any): any {\n        switch (preset) {\n            case 'performance':\n                // Performance preset - prioritizes frame rate\n                settings.graphicalQuality = 'low';\n                settings.postProcessing = false;\n                settings.asteroidDetail = 'low';\n                settings.lightingQuality = 'low';\n                settings.particleEffects = 'low';\n                settings.resolutionScale = 'low';\n                settings.godRaysEnabled = false; // Disable god rays for performance\n                break;\n                \n            case 'balanced':\n                // Balanced preset - moderate settings\n                settings.graphicalQuality = 'medium';\n                settings.postProcessing = true;\n                settings.asteroidDetail = 'medium';\n                settings.lightingQuality = 'medium';\n                settings.particleEffects = 'medium';\n                settings.resolutionScale = 'medium';\n                settings.godRaysEnabled = true; // Enable god rays\n                settings.godRaysType = 'standard'; // Use standard rays\n                break;\n                \n            case 'quality':\n                // Quality preset - prioritizes visuals\n                settings.graphicalQuality = 'high';\n                settings.postProcessing = true;\n                settings.asteroidDetail = 'high';\n                settings.lightingQuality = 'high';\n                settings.particleEffects = 'high';\n                settings.resolutionScale = 'high';\n                settings.godRaysEnabled = true; // Enable god rays\n                settings.godRaysType = 'claude'; // Use Claude rays for dramatic effect\n                break;\n        }\n        \n        return settings;\n    }\n}","import { GraphicsSettings } from './graphicsSettings.ts';\nimport { AudioSettings } from './audioSettings.ts';\nimport { SettingsHelpers } from './helpers.ts';\nimport { SettingsPersistence } from './persistence.ts'; // Assuming this will be needed\nimport { SettingsStyles } from './styles.ts';\n\nexport class SettingsView {\n    styles: SettingsStyles;\n    graphicsSettings: GraphicsSettings;\n    audioSettings: AudioSettings;\n    helpers: SettingsHelpers;\n    persistence: SettingsPersistence;\n    private _isVisible: boolean = false; // Internal state for visibility\n\n    constructor(\n        styles: SettingsStyles,\n        graphicsSettings: GraphicsSettings,\n        audioSettings: AudioSettings,\n        helpers: SettingsHelpers,\n        persistence: SettingsPersistence\n    ) {\n        this.styles = styles;\n        this.graphicsSettings = graphicsSettings;\n        this.audioSettings = audioSettings;\n        this.helpers = helpers;\n        this.persistence = persistence;\n    }\n\n    // --- Methods expected by SettingsEventHandlers ---\n    updateSettings(): void {\n        console.warn(\"SettingsView: updateSettings not fully implemented yet.\");\n        // This method will read values from UI and prepare them for application\n        // For example:\n        // const newGraphicsSettings = this.graphicsSettings.readGraphicsSettings();\n        // const newAudioSettings = this.audioSettings.readAudioSettings();\n        // this.currentSettings = { ...this.currentSettings, ...newGraphicsSettings, ...newAudioSettings };\n    }\n\n    saveSettings(): void {\n        console.warn(\"SettingsView: saveSettings not fully implemented yet.\");\n        // This method will save the current settings via persistence\n        // For example:\n        // this.persistence.saveSettings(this.currentSettings);\n    }\n\n    applyAllSettings(): void {\n        console.warn(\"SettingsView: applyAllSettings not fully implemented yet.\");\n        // This method will apply all settings to the game\n        // For example:\n        // this.graphicsSettings.applyGraphicsSettings(this.currentSettings);\n        // this.audioSettings.applyAudioSettings(this.currentSettings);\n    }\n\n    applyPreset(presetName: string): void {\n        console.warn(`SettingsView: applyPreset('${presetName}') not fully implemented yet.`);\n        // This method will apply a preset and update the UI\n        // For example:\n        // const newSettings = this.helpers.getPerformanceRecommendation(presetName); // Or a specific preset logic\n        // this.currentSettings = { ...this.currentSettings, ...newSettings };\n        // this.updateAllUI(this.currentSettings);\n    }\n\n    get isVisible(): boolean {\n        return this._isVisible;\n    }\n\n\n    /**\n     * Creates the complete settings UI\n     */\n    createSettingsUI(): HTMLElement {\n        // Create settings container\n        const settingsContainer: HTMLDivElement = this.styles.createSettingsContainer();\n        \n        // Create settings content\n        settingsContainer.innerHTML = this.createSettingsHTML();\n        \n        // Inject toggle CSS\n        this.styles.injectToggleCSS();\n        \n        // Add to document\n        document.body.appendChild(settingsContainer);\n        \n        return settingsContainer;\n    }\n\n    /**\n     * Creates the complete settings HTML content\n     */\n    createSettingsHTML(): string {\n        return `\n            <h2 style=\"${this.styles.getMainTitleStyle()}\">GAME SETTINGS</h2>\n            \n            ${this.graphicsSettings.createGraphicsSettingsHTML()}\n            \n            ${this.createPerformanceSettingsHTML()}\n            \n            ${this.audioSettings.createAudioSettingsHTML()}\n            \n            ${this.createPresetsHTML()}\n            \n            ${this.createActionButtonsHTML()}\n        `;\n    }\n\n    /**\n     * Creates the performance settings section HTML\n     */\n    createPerformanceSettingsHTML(): string {\n        return `\n            <div style=\"margin-bottom: 20px;\">\n                <h3 style=\"${this.styles.getSectionHeaderStyle()}\">PERFORMANCE SETTINGS</h3>\n                \n                ${this.styles.createSelectRow(\n                    'Frame Rate Cap',\n                    'Limits maximum frame rate',\n                    'frame-rate-cap',\n                    [\n                        { value: '30', text: '30 FPS' },\n                        { value: '60', text: '60 FPS' },\n                        { value: 'auto', text: `Monitor Refresh Rate (60Hz)` },\n                        { value: '0', text: 'Unlimited' }\n                    ]\n                )}\n                \n                ${this.styles.createToggleRow(\n                    'Show FPS Counter',\n                    'Display current frame rate',\n                    'show-fps'\n                )}\n                \n                ${this.styles.createToggleRow(\n                    'Auto-Adjust Quality',\n                    'Automatically adjusts settings based on performance',\n                    'auto-quality'\n                )}\n            </div>\n        `;\n    }\n\n    /**\n     * Creates the presets section HTML\n     */\n    createPresetsHTML(): string {\n        return `\n            <div style=\"margin-bottom: 20px;\">\n                <h3 style=\"${this.styles.getSectionHeaderStyle()}\">PRESETS</h3>\n                \n                <div style=\"${this.styles.getPresetContainerStyle()}\">\n                    <button id=\"preset-performance\" style=\"${this.styles.getPresetButtonStyle()}\">\n                        PERFORMANCE\n                    </button>\n                    <button id=\"preset-balanced\" style=\"${this.styles.getPresetButtonStyle()}\">\n                        BALANCED\n                    </button>\n                    <button id=\"preset-quality\" style=\"${this.styles.getPresetButtonStyle()}\">\n                        QUALITY\n                    </button>\n                </div>\n            </div>\n        `;\n    }\n\n    /**\n     * Creates the action buttons HTML\n     */\n    createActionButtonsHTML(): string {\n        return `\n            <div style=\"${this.styles.getActionButtonsContainerStyle()}\">\n                <button id=\"apply-settings\" style=\"${this.styles.getApplyButtonStyle()}\">\n                    APPLY\n                </button>\n                <button id=\"settings-back\" style=\"${this.styles.getBackButtonStyle()}\">\n                    BACK\n                </button>\n            </div>\n        `;\n    }\n\n    /**\n     * Shows the settings panel\n     */\n    show(): boolean {\n        const settingsContainer: HTMLDivElement | null = document.getElementById('settings-container') as HTMLDivElement;\n        if (settingsContainer) {\n            settingsContainer.style.display = 'block';\n            this._isVisible = true;\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Hides the settings panel\n     */\n    hide(): boolean {\n        const settingsContainer: HTMLDivElement | null = document.getElementById('settings-container') as HTMLDivElement;\n        if (settingsContainer) {\n            settingsContainer.style.display = 'none';\n            this._isVisible = false;\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Updates the refresh rate display in the frame rate cap dropdown\n     */\n    updateRefreshRateDisplay(refreshRate: number): void {\n        const frameRateSelect: HTMLSelectElement | null = document.getElementById('frame-rate-cap') as HTMLSelectElement;\n        if (frameRateSelect) {\n            const autoOption: HTMLOptionElement | null = frameRateSelect.querySelector('option[value=\"auto\"]');\n            if (autoOption) {\n                autoOption.textContent = `Monitor Refresh Rate (${refreshRate}Hz)`;\n            }\n        }\n    }\n\n    /**\n     * Shows a settings applied notification\n     */\n    showSettingsApplied(): void {\n        // Create notification\n        const notification: HTMLDivElement = document.createElement('div');\n        const notificationStyles: Record<string, string> = this.styles.getNotificationStyle();\n        \n        // Apply all styles\n        Object.assign(notification.style, notificationStyles);\n        notification.textContent = 'Settings applied and saved';\n        \n        document.body.appendChild(notification);\n        \n        // Remove after a few seconds\n        setTimeout(() => {\n            notification.style.opacity = '0';\n            notification.style.transition = 'opacity 0.5s';\n            \n            setTimeout(() => {\n                notification.remove();\n            }, 500);\n        }, 1500);\n    }\n}","// persistence.js - Settings save/load and localStorage handling\n\nexport class SettingsPersistence {\n    storageKey: string;\n\n    constructor() {\n        this.storageKey = 'asteroidMinerSettings';\n    }\n\n    /**\n     * Gets default settings object\n     */\n    getDefaultSettings(): {\n        graphicalQuality: string;\n        postProcessing: boolean;\n        asteroidDetail: string;\n        lightingQuality: string;\n        particleEffects: string;\n        resolutionScale: string;\n        frameRateCap: string;\n        showFPS: boolean;\n        spatialAudio: boolean;\n        autoQuality: boolean;\n        godRaysEnabled: boolean;\n        godRaysType: string;\n    } {\n        return {\n            graphicalQuality: 'medium',    // low, medium, high\n            postProcessing: true,          // true, false\n            asteroidDetail: 'medium',      // low, medium, high\n            lightingQuality: 'medium',     // low, medium, high\n            particleEffects: 'medium',     // low, medium, high\n            resolutionScale: 'medium',     // low, medium, high\n            frameRateCap: 'auto',          // 30, 60, auto (monitor refresh rate), 0 (unlimited)\n            showFPS: false,                // Show FPS counter\n            spatialAudio: true,            // Enable spatial audio\n            autoQuality: true,             // Automatically adjust quality based on performance\n            godRaysEnabled: false,         // Enable/disable volumetric lighting effects\n            godRaysType: 'standard'        // 'standard' (new god rays) or 'claude' (Claude Rays)\n        };\n    }\n\n    /**\n     * Loads settings from localStorage\n     */\n    loadSettings(): {\n        graphicalQuality: string;\n        postProcessing: boolean;\n        asteroidDetail: string;\n        lightingQuality: string;\n        particleEffects: string;\n        resolutionScale: string;\n        frameRateCap: string;\n        showFPS: boolean;\n        spatialAudio: boolean;\n        autoQuality: boolean;\n        godRaysEnabled: boolean;\n        godRaysType: string;\n    } {\n        try {\n            const savedSettings: string | null = localStorage.getItem(this.storageKey);\n            if (savedSettings) {\n                const parsedSettings: Record<string, any> = JSON.parse(savedSettings);\n                // Merge saved settings with defaults to handle new settings\n                const defaultSettings = this.getDefaultSettings();\n                const mergedSettings = {...defaultSettings, ...parsedSettings};\n                console.log(\"Settings loaded from localStorage:\", mergedSettings);\n                return mergedSettings;\n            }\n        } catch (error: any) {\n            console.error(\"Error loading settings:\", error);\n        }\n        \n        // Return defaults if loading fails\n        return this.getDefaultSettings();\n    }\n\n    /**\n     * Saves settings to localStorage\n     */\n    saveSettings(settings: Record<string, any>): boolean {\n        try {\n            localStorage.setItem(this.storageKey, JSON.stringify(settings));\n            console.log(\"Settings saved to localStorage\");\n            return true;\n        } catch (error: any) {\n            console.error(\"Error saving settings:\", error);\n            return false;\n        }\n    }\n\n    /**\n     * Validates settings object to ensure all required properties exist\n     */\n    validateSettings(settings: Record<string, any>): Record<string, any> {\n        const defaults = this.getDefaultSettings();\n        const validatedSettings: Record<string, any> = {...defaults};\n        \n        // Only copy valid properties from the input settings\n        for (const key in defaults) {\n            if (Object.prototype.hasOwnProperty.call(settings, key)) {\n                validatedSettings[key] = settings[key];\n            }\n        }\n        \n        return validatedSettings;\n    }\n\n    /**\n     * Clears saved settings (resets to defaults)\n     */\n    clearSettings(): boolean {\n        try {\n            localStorage.removeItem(this.storageKey);\n            console.log(\"Settings cleared from localStorage\");\n            return true;\n        } catch (error: any) {\n            console.error(\"Error clearing settings:\", error);\n            return false;\n        }\n    }\n\n    /**\n     * Exports settings as JSON string\n     */\n    exportSettings(settings: Record<string, any>): string | null {\n        try {\n            return JSON.stringify(settings, null, 2);\n        } catch (error: any) {\n            console.error(\"Error exporting settings:\", error);\n            return null;\n        }\n    }\n\n    /**\n     * Imports settings from JSON string\n     */\n    importSettings(jsonString: string): Record<string, any> | null {\n        try {\n            const importedSettings: Record<string, any> = JSON.parse(jsonString);\n            return this.validateSettings(importedSettings);\n        } catch (error: any) {\n            console.error(\"Error importing settings:\", error);\n            return null;\n        }\n    }\n\n    /**\n     * Backs up current settings with timestamp\n     */\n    backupSettings(settings: Record<string, any>): string | null {\n        const timestamp: string = new Date().toISOString();\n        const backupKey: string = `${this.storageKey}_backup_${timestamp}`;\n        \n        try {\n            localStorage.setItem(backupKey, JSON.stringify({\n                timestamp,\n                settings\n            }));\n            console.log(`Settings backed up with key: ${backupKey}`);\n            return backupKey;\n        } catch (error: any) {\n            console.error(\"Error backing up settings:\", error);\n            return null;\n        }\n    }\n\n    /**\n     * Lists available setting backups\n     */\n    listBackups(): { key: string; timestamp: string; date: Date }[] {\n        const backups: { key: string; timestamp: string; date: Date }[] = [];\n        const backupPrefix: string = `${this.storageKey}_backup_`;\n        \n        try {\n            for (let i = 0; i < localStorage.length; i++) {\n                const key: string | null = localStorage.key(i);\n                if (key && key.startsWith(backupPrefix)) {\n                    const backupData = JSON.parse(localStorage.getItem(key) || '{}');\n                    backups.push({\n                        key,\n                        timestamp: backupData.timestamp,\n                        date: new Date(backupData.timestamp)\n                    });\n                }\n            }\n            \n            // Sort by date, newest first\n            backups.sort((a, b) => b.date.getTime() - a.date.getTime());\n            return backups;\n        } catch (error: any) {\n            console.error(\"Error listing backups:\", error);\n            return [];\n        }\n    }\n\n    /**\n     * Restores settings from a backup\n     */\n    restoreFromBackup(backupKey: string): Record<string, any> | null {\n        try {\n            const backupData: string | null = localStorage.getItem(backupKey);\n            if (backupData) {\n                const parsedBackup: { timestamp: string; settings: Record<string, any> } = JSON.parse(backupData);\n                return this.validateSettings(parsedBackup.settings);\n            }\n        } catch (error: any) {\n            console.error(\"Error restoring from backup:\", error);\n        }\n        return null;\n    }\n\n    /**\n     * Cleans up old backups (keeps only the most recent N backups)\n     */\n    cleanupBackups(keepCount: number = 5): void {\n        const backups = this.listBackups();\n        \n        // Remove backups beyond the keep count\n        for (let i = keepCount; i < backups.length; i++) {\n            try {\n                localStorage.removeItem(backups[i].key);\n                console.log(`Removed old backup: ${backups[i].key}`);\n            } catch (error: any) {\n                console.error(`Error removing backup ${backups[i].key}:`, error);\n            }\n        }\n    }\n}","// eventHandlers.js - Settings UI event handling\n\nimport { SettingsView } from './settingsView.ts';\n\nexport class SettingsEventHandlers {\n    settings: SettingsView;\n    isMobile: boolean;\n\n    constructor(settings: SettingsView, isMobile: boolean) {\n        this.settings = settings;\n        this.isMobile = isMobile;\n    }\n\n    /**\n     * Sets up all event listeners for the settings UI\n     */\n    setupEventListeners(): void {\n        this.setupBackButton();\n        this.setupApplyButton();\n        this.setupPresetButtons();\n    }\n\n    /**\n     * Sets up the back button event listeners\n     */\n    setupBackButton(): void {\n        const backButton: HTMLButtonElement | null = document.getElementById('settings-back') as HTMLButtonElement;\n        if (backButton) {\n            // Mouse event\n            backButton.addEventListener('click', () => {\n                this.settings.hide();\n            });\n            \n            // Touch event for mobile\n            if (this.isMobile) {\n                backButton.addEventListener('touchend', (e: TouchEvent) => {\n                    e.preventDefault();\n                    this.settings.hide();\n                });\n            }\n        }\n    }\n\n    /**\n     * Sets up the apply button event listeners\n     */\n    setupApplyButton(): void {\n        const applyButton: HTMLButtonElement | null = document.getElementById('apply-settings') as HTMLButtonElement;\n        if (applyButton) {\n            const applyHandler = (): void => {\n                this.settings.updateSettings();\n                this.settings.saveSettings();\n                this.settings.applyAllSettings();\n                \n                // Show confirmation message\n                this.settings.showSettingsApplied();\n            };\n            \n            // Mouse event\n            applyButton.addEventListener('click', applyHandler);\n            \n            // Touch event for mobile\n            if (this.isMobile) {\n                applyButton.addEventListener('touchend', (e: TouchEvent) => {\n                    e.preventDefault();\n                    applyHandler();\n                });\n            }\n        }\n    }\n\n    /**\n     * Sets up preset button event listeners\n     */\n    setupPresetButtons(): void {\n        this.setupPresetButton('preset-performance', 'performance');\n        this.setupPresetButton('preset-balanced', 'balanced');\n        this.setupPresetButton('preset-quality', 'quality');\n    }\n\n    /**\n     * Sets up a single preset button with event listeners and effects\n     */\n    setupPresetButton(buttonId: string, presetName: string): void {\n        const button: HTMLButtonElement | null = document.getElementById(buttonId) as HTMLButtonElement;\n        if (!button) return;\n        \n        const presetHandler = (): void => {\n            this.settings.applyPreset(presetName);\n        };\n        \n        // Mouse event\n        button.addEventListener('click', presetHandler);\n        \n        // Touch event for mobile\n        if (this.isMobile) {\n            button.addEventListener('touchend', (e: TouchEvent) => {\n                e.preventDefault();\n                presetHandler();\n            });\n        }\n        \n        // Add hover/touch effects\n        this.setupButtonEffects(button);\n    }\n\n    /**\n     * Sets up visual effects for buttons (hover/touch feedback)\n     */\n    setupButtonEffects(button: HTMLElement): void {\n        if (this.isMobile) {\n            // Touch effects for mobile\n            button.addEventListener('touchstart', () => {\n                button.style.backgroundColor = '#3a4b6a';\n                button.style.boxShadow = '0 0 10px #33aaff';\n            }, { passive: true });\n            \n            button.addEventListener('touchend', () => {\n                button.style.backgroundColor = '#2a3a5a';\n                button.style.boxShadow = 'none';\n            }, { passive: true });\n        } else {\n            // Mouse effects for desktop\n            button.addEventListener('mouseover', () => {\n                button.style.backgroundColor = '#3a4b6a';\n                button.style.boxShadow = '0 0 10px #33aaff';\n            });\n            \n            button.addEventListener('mouseout', () => {\n                button.style.backgroundColor = '#2a3a5a';\n                button.style.boxShadow = 'none';\n            });\n        }\n    }\n\n    /**\n     * Sets up keyboard navigation for settings (optional enhancement)\n     */\n    setupKeyboardNavigation(): void {\n        document.addEventListener('keydown', (e: KeyboardEvent) => {\n            // ESC key to close settings\n            if (e.key === 'Escape' && this.settings.isVisible) {\n                this.settings.hide();\n                e.preventDefault();\n            }\n            \n            // Enter key to apply settings\n            if (e.key === 'Enter' && this.settings.isVisible && e.ctrlKey) {\n                const applyButton: HTMLButtonElement | null = document.getElementById('apply-settings') as HTMLButtonElement;\n                if (applyButton) {\n                    applyButton.click();\n                    e.preventDefault();\n                }\n            }\n        });\n    }\n\n    /**\n     * Removes all event listeners (cleanup)\n     */\n    removeEventListeners(): void {\n        // Remove button event listeners\n        const buttons: string[] = [\n            'settings-back',\n            'apply-settings', \n            'preset-performance',\n            'preset-balanced',\n            'preset-quality'\n        ];\n        \n        buttons.forEach((buttonId: string) => {\n            const button: HTMLElement | null = document.getElementById(buttonId);\n            if (button) {\n                // Clone and replace to remove all event listeners\n                const newButton: Node = button.cloneNode(true);\n                button.parentNode?.replaceChild(newButton, button);\n            }\n        });\n    }\n\n    /**\n     * Validates form inputs before applying settings\n     */\n    validateSettingsForm(): boolean {\n        // Add validation logic here if needed\n        // For now, all settings are from dropdowns/checkboxes so they're valid by default\n        return true;\n    }\n\n    /**\n     * Handles setting changes in real-time (optional)\n     */\n    setupRealTimeUpdates(): void {\n        const settingElements: string[] = [\n            'graphical-quality',\n            'post-processing',\n            'asteroid-detail',\n            'lighting-quality',\n            'particle-effects',\n            'resolution-scale',\n            'frame-rate-cap',\n            'show-fps',\n            'spatial-audio',\n            'auto-quality',\n            'god-rays-enabled',\n            'god-rays-type'\n        ];\n\n        settingElements.forEach((elementId: string) => {\n            const element: HTMLElement | null = document.getElementById(elementId);\n            if (element) {\n                element.addEventListener('change', () => {\n                    // Optional: Apply settings immediately on change\n                    // this.settings.updateSettings();\n                    // this.settings.applyAllSettings();\n                });\n            }\n        });\n    }\n}","// helpers.js - Settings utility functions and validation\n\nexport class SettingsHelpers {\n    monitorRefreshRate: number; // Default refresh rate\n    updateRefreshRateCallback?: () => void;\n\n    constructor() {\n        this.monitorRefreshRate = 60; \n    }\n\n    /**\n     * Detects system capabilities for auto-configuration\n     */\n    detectSystemCapabilities(): string {\n        const performance: Record<string, any> = {};\n        \n        // Check device pixel ratio (higher on high-end devices)\n        performance.highDPI = window.devicePixelRatio > 1;\n        \n        // Check if WebGL2 is available\n        const canvas: HTMLCanvasElement = document.createElement('canvas');\n        const gl: WebGL2RenderingContext | null = canvas.getContext('webgl2');\n        performance.webgl2 = !!gl;\n        \n        // Get GPU info if available\n        if (gl) {\n            const debugInfo: WEBGL_debug_renderer_info | null = gl.getExtension('WEBGL_debug_renderer_info');\n            if (debugInfo) {\n                performance.gpu = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);\n            }\n        }\n        \n        // Check for recent browser features that suggest a modern device\n        performance.modernBrowser = \n            'IntersectionObserver' in window && \n            'requestAnimationFrame' in window &&\n            'localStorage' in window;\n            \n        // Make a recommendation based on the detected capabilities\n        if (performance.webgl2 && performance.highDPI && performance.modernBrowser) {\n            return 'high';\n        } else if (performance.webgl2 && performance.modernBrowser) {\n            return 'medium';\n        } else {\n            return 'low';\n        }\n    }\n\n    /**\n     * Detects monitor refresh rate\n     */\n    detectMonitorRefreshRate(): void {\n        // Start with intelligent default based on common scenarios\n        this.monitorRefreshRate = 60;\n        \n        try {\n            // Method 1: Try modern Chrome API first (most reliable when available)\n            if ('getScreenDetails' in window && (window as any).getScreenDetails) {\n                (window as any).getScreenDetails().then((details: any) => {\n                    if (details && details.currentScreen && details.currentScreen.refreshRate) {\n                        this.monitorRefreshRate = Math.round(details.currentScreen.refreshRate);\n                        console.log(`Using getScreenDetails API: ${this.monitorRefreshRate}Hz`);\n                        this.updateRefreshRateCallback?.();\n                    }\n                }).catch((_err: any) => {\n                    console.log(\"getScreenDetails not available, falling back to other methods\");\n                });\n            }\n            \n            // Method 2: Try screen.refresh (older API but sometimes available)\n            if (window.screen && typeof (window.screen as any).refresh === 'number' && (window.screen as any).refresh > 0) {\n                this.monitorRefreshRate = Math.round((window.screen as any).refresh);\n                console.log(`Using screen.refresh value: ${this.monitorRefreshRate}Hz`);\n                return; // Use this value immediately if available\n            }\n            \n            // Method 3: Quick synchronous measurement (first few frames)\n            const quickMeasure = this.quickRefreshRateMeasure();\n            if (quickMeasure > 0) {\n                this.monitorRefreshRate = quickMeasure;\n                console.log(`Quick measure refresh rate: ${this.monitorRefreshRate}Hz`);\n            }\n            \n            // Method 4: Start accurate async measurement for refinement\n            this.startAccurateRefreshDetection();\n            \n        } catch (error) {\n            console.warn(\"Error detecting refresh rate:\", error);\n        }\n    }\n\n    /**\n     * Quick refresh rate measurement\n     */\n    quickRefreshRateMeasure(): number {\n        // Check if we have screen refresh rate available\n        if (window.screen && typeof (window.screen as any).refresh === 'number' && (window.screen as any).refresh > 0) {\n            return Math.round((window.screen as any).refresh);\n        }\n        \n        // Check common indicators for high refresh displays\n        const userAgent = navigator.userAgent.toLowerCase();\n        const isGaming = userAgent.includes('gaming') || userAgent.includes('rog');\n        const isHighEnd = window.screen && window.screen.width > 2560;\n        \n        // Make educated guess based on device\n        const isMobile = /Mobi|Android/i.test(navigator.userAgent);\n        if (isMobile) {\n            return 60; // Most mobile devices are 60Hz\n        } else if (isGaming || isHighEnd) {\n            return 144; // Assume high refresh for gaming systems\n        }\n        \n        // Default to 60Hz for standard displays\n        return 60;\n    }\n\n    /**\n     * Starts accurate refresh rate detection over time\n     */\n    startAccurateRefreshDetection(): void {\n        let warmupFrames: number = 5; // Skip initial irregular frames\n        let frameCount: number = 0;\n        const timestamps: number[] = [];\n        const startTime: number = performance.now();\n        \n        const detectFrame = (timestamp: number): void => {\n            frameCount++;\n            \n            // Skip warmup frames\n            if (frameCount <= warmupFrames) {\n                requestAnimationFrame(detectFrame);\n                return;\n            }\n            \n            timestamps.push(timestamp);\n            \n            // Collect for 1 second or 120 frames\n            if (timestamps.length < 120 && performance.now() - startTime < 1000) {\n                requestAnimationFrame(detectFrame);\n            } else {\n                this.processRefreshRateSamples(timestamps);\n            }\n        };\n        \n        requestAnimationFrame(detectFrame);\n    }\n\n    /**\n     * Processes refresh rate samples to determine accurate rate\n     */\n    processRefreshRateSamples(timestamps: number[]): void {\n        if (timestamps.length < 2) return;\n        \n        const intervals: number[] = [];\n        for (let i = 1; i < timestamps.length; i++) {\n            const delta = timestamps[i] - timestamps[i-1];\n            if (delta > 0) {\n                intervals.push(1000 / delta);\n            }\n        }\n        \n        if (intervals.length === 0) return;\n        \n        // Remove outliers using IQR method\n        intervals.sort((a, b) => a - b);\n        const q1 = intervals[Math.floor(intervals.length * 0.25)];\n        const q3 = intervals[Math.floor(intervals.length * 0.75)];\n        const iqr = q3 - q1;\n        \n        const validRates = intervals.filter(rate => \n            rate >= q1 - 1.5 * iqr && rate <= q3 + 1.5 * iqr\n        );\n        \n        if (validRates.length > 0) {\n            const avg = validRates.reduce((a, b) => a + b, 0) / validRates.length;\n            const newRate = this.roundToCommonRefreshRate(avg);\n            \n            // Only update if significantly different\n            if (Math.abs(newRate - this.monitorRefreshRate) >= 5) {\n                console.log(`Refined refresh rate: ${this.monitorRefreshRate}Hz -> ${newRate}Hz`);\n                this.monitorRefreshRate = newRate;\n                \n                // Notify callback if set\n                this.updateRefreshRateCallback?.();\n            }\n        }\n    }\n\n    /**\n     * Rounds measured rate to common refresh rates\n     */\n    roundToCommonRefreshRate(rate: number): number {\n        // Common refresh rates in 2024\n        const commonRates = [24, 30, 48, 50, 60, 72, 75, 90, 100, 120, 144, 165, 180, 240, 360, 480];\n        \n        let closest = 60;\n        let minDiff = Math.abs(rate - 60);\n        \n        for (const commonRate of commonRates) {\n            const diff = Math.abs(rate - commonRate);\n            if (diff < minDiff) {\n                minDiff = diff;\n                closest = commonRate;\n            }\n        }\n        \n        // Only accept if within 10% of a common rate\n        if (minDiff / closest < 0.1) {\n            return closest;\n        }\n        \n        return Math.round(rate); // Return raw rate if no close match\n    }\n\n    /**\n     * Gets the current monitor refresh rate\n     */\n    getMonitorRefreshRate(): number {\n        return this.monitorRefreshRate;\n    }\n\n    /**\n     * Sets a callback to be called when refresh rate is updated\n     */\n    setRefreshRateUpdateCallback(callback: () => void): void {\n        this.updateRefreshRateCallback = callback;\n    }\n\n    /**\n     * Validates a settings object\n     */\n    validateSettings(settings: Record<string, any>): { isValid: boolean; errors: string[] } {\n        const validationRules: Record<string, string[]> = {\n            graphicalQuality: ['low', 'medium', 'high'],\n            asteroidDetail: ['low', 'medium', 'high'],\n            lightingQuality: ['low', 'medium', 'high'],\n            particleEffects: ['low', 'medium', 'high'],\n            resolutionScale: ['low', 'medium', 'high'],\n            frameRateCap: ['30', '60', 'auto', '0'],\n            godRaysType: ['standard', 'claude']\n        };\n\n        const errors: string[] = [];\n\n        // Validate enum values\n        for (const [key, validValues] of Object.entries(validationRules)) {\n            if (settings[key] && !validValues.includes(settings[key])) {\n                errors.push(`Invalid value for ${key}: ${settings[key]}`);\n            }\n        }\n\n        // Validate boolean values\n        const booleanSettings = ['postProcessing', 'showFPS', 'spatialAudio', 'autoQuality', 'godRaysEnabled'];\n        booleanSettings.forEach(key => {\n            if (settings[key] !== undefined && typeof settings[key] !== 'boolean') {\n                errors.push(`Invalid value for ${key}: must be boolean`);\n            }\n        });\n\n        return {\n            isValid: errors.length === 0,\n            errors\n        };\n    }\n\n    /**\n     * Gets performance recommendation based on system capabilities\n     */\n    getPerformanceRecommendation(): Record<string, any> {\n        const capability: string = this.detectSystemCapabilities();\n        \n        const recommendations: Record<string, any> = {\n            low: {\n                graphicalQuality: 'low',\n                postProcessing: false,\n                asteroidDetail: 'low',\n                lightingQuality: 'low',\n                particleEffects: 'low',\n                resolutionScale: 'low',\n                frameRateCap: '30',\n                godRaysEnabled: false\n            },\n            medium: {\n                graphicalQuality: 'medium',\n                postProcessing: true,\n                asteroidDetail: 'medium',\n                lightingQuality: 'medium',\n                particleEffects: 'medium',\n                resolutionScale: 'medium',\n                frameRateCap: '60',\n                godRaysEnabled: true,\n                godRaysType: 'standard'\n            },\n            high: {\n                graphicalQuality: 'high',\n                postProcessing: true,\n                asteroidDetail: 'high',\n                lightingQuality: 'high',\n                particleEffects: 'high',\n                resolutionScale: 'high',\n                frameRateCap: 'auto',\n                godRaysEnabled: true,\n                godRaysType: 'claude'\n            }\n        };\n\n        return recommendations[capability] || recommendations.medium;\n    }\n\n    /**\n     * Formats settings for display\n     */\n    formatSettingsForDisplay(settings: Record<string, any>): Record<string, string> {\n        const formatted: Record<string, string> = {};\n        \n        for (const [key, value] of Object.entries(settings)) {\n            if (typeof value === 'boolean') {\n                formatted[key] = value ? 'Enabled' : 'Disabled';\n            } else if (key === 'frameRateCap') {\n                if (value === '0') {\n                    formatted[key] = 'Unlimited';\n                } else if (value === 'auto') {\n                    formatted[key] = `Monitor Refresh Rate (${this.monitorRefreshRate}Hz)`;\n                } else {\n                    formatted[key] = `${value} FPS`;\n                }\n            } else {\n                formatted[key] = value.charAt(0).toUpperCase() + value.slice(1);\n            }\n        }\n        \n        return formatted;\n    }\n\n    /**\n     * Calculates estimated performance impact of settings\n     */\n    calculatePerformanceImpact(settings: Record<string, any>): number {\n        let impact: number = 0;\n        \n        // Quality settings impact\n        const qualityMap: Record<string, number> = { low: 1, medium: 2, high: 3 };\n        impact += qualityMap[settings.graphicalQuality] || 2;\n        impact += qualityMap[settings.asteroidDetail] || 2;\n        impact += qualityMap[settings.lightingQuality] || 2;\n        impact += qualityMap[settings.particleEffects] || 2;\n        impact += qualityMap[settings.resolutionScale] || 2;\n        \n        // Boolean settings impact\n        if (settings.postProcessing) impact += 1;\n        if (settings.godRaysEnabled) impact += 2;\n        \n        // Normalize to 0-100 scale\n        const maxImpact = 17; // Maximum possible impact\n        return Math.round((impact / maxImpact) * 100);\n    }\n}","// settings.js - Handles game settings and performance options\n\nimport { MobileDetector } from '../../utils/mobileDetector.ts';\nimport { SettingsStyles } from './components/settings/styles.js';\nimport { AudioSettings } from './components/settings/audioSettings.js';\nimport { GraphicsSettings } from './components/settings/graphicsSettings.js';\nimport { SettingsView } from './components/settings/settingsView.js';\nimport { SettingsPersistence } from './components/settings/persistence.js';\nimport { SettingsEventHandlers } from './components/settings/eventHandlers.js';\nimport { SettingsHelpers } from './components/settings/helpers.js';\n\ntype SettingsData = {\n    frameRateCap: string;\n    showFPS: boolean;\n    autoQuality: boolean;\n    spatialAudio?: boolean;\n    [key: string]: unknown;\n};\n\ntype SettingsGame = {\n    frameRateCap: number;\n    lastFrameTime: number;\n    currentFPS?: number;\n    [key: string]: unknown;\n};\n\ntype StargateInterfaceRef = {\n    showStargateUI: () => void;\n};\n\nexport class Settings {\n    game: SettingsGame | null;\n    stargateInterface: StargateInterfaceRef | null;\n    isVisible: boolean;\n    isMobile: boolean;\n    styles: SettingsStyles;\n    helpers: SettingsHelpers;\n    persistence: SettingsPersistence;\n    graphicsSettings: GraphicsSettings;\n    audioSettings: AudioSettings;\n    settingsView: SettingsView;\n    eventHandlers: SettingsEventHandlers;\n    settings: SettingsData;\n\n    constructor(game: SettingsGame | null) {\n        this.game = game;\n        this.stargateInterface = null;\n        this.isVisible = false;\n        this.isMobile = MobileDetector.isMobile();\n        \n        console.log(\"Settings constructor - isMobile:\", this.isMobile);\n        \n        // Initialize submodules\n        this.styles = new SettingsStyles(this.isMobile);\n        this.helpers = new SettingsHelpers();\n        this.persistence = new SettingsPersistence();\n        this.graphicsSettings = new GraphicsSettings(this.game, this.styles);\n        this.audioSettings = new AudioSettings(this.game, this.styles);\n        this.settingsView = new SettingsView(\n            this.styles,\n            this.graphicsSettings,\n            this.audioSettings,\n            this.helpers,\n            this.persistence as any\n        );\n        this.eventHandlers = new SettingsEventHandlers(this as unknown as SettingsView, this.isMobile);\n        \n        // Set up refresh rate callback\n        this.helpers.setRefreshRateUpdateCallback(() => {\n            this.settingsView.updateRefreshRateDisplay(this.helpers.getMonitorRefreshRate());\n        });\n        \n        // Detect monitor refresh rate\n        this.helpers.detectMonitorRefreshRate();\n        \n        // Load settings from localStorage if available\n        this.settings = this.persistence.loadSettings() as SettingsData;\n        \n        // Create settings UI\n        this.setupSettingsUI();\n        \n        // Apply initial settings\n        this.applyAllSettings();\n        \n        // Apply initial FPS display visibility\n        setTimeout(() => this.applyUISettings(), 100);\n    }\n    \n    setStargateInterface(stargateInterface: StargateInterfaceRef): void {\n        this.stargateInterface = stargateInterface;\n    }\n    \n    loadSettings(): void {\n        this.settings = this.persistence.loadSettings() as SettingsData;\n    }\n    \n    saveSettings(): void {\n        this.persistence.saveSettings(this.settings);\n    }\n    \n    setupSettingsUI(): void {\n        // Create settings UI using the settings view\n        this.settingsView.createSettingsUI();\n        \n        // Add event listeners\n        this.eventHandlers.setupEventListeners();\n    }\n    \n    \n    updateSettings(): void {\n        // Read graphics settings\n        const graphicsSettings = this.graphicsSettings.readGraphicsSettings() as Record<string, unknown>;\n        Object.assign(this.settings, graphicsSettings);\n        \n        // Read audio settings\n        const audioSettings = this.audioSettings.readAudioSettings() as Record<string, unknown>;\n        Object.assign(this.settings, audioSettings);\n        \n        // Read performance settings\n        const frameRateCapElement = document.getElementById('frame-rate-cap') as HTMLInputElement | HTMLSelectElement | null;\n        const showFPSElement = document.getElementById('show-fps') as HTMLInputElement | null;\n        const autoQualityElement = document.getElementById('auto-quality') as HTMLInputElement | null;\n        \n        if (frameRateCapElement) this.settings.frameRateCap = frameRateCapElement.value;\n        if (showFPSElement) this.settings.showFPS = showFPSElement.checked;\n        if (autoQualityElement) this.settings.autoQuality = autoQualityElement.checked;\n    }\n    \n    updateUI(): void {\n        // Update graphics UI\n        this.graphicsSettings.updateGraphicsUI(this.settings as any);\n        \n        // Update audio UI\n        this.audioSettings.updateAudioUI(this.settings as any);\n        \n        // Update performance UI\n        const frameRateCapElement = document.getElementById('frame-rate-cap') as HTMLInputElement | HTMLSelectElement | null;\n        const showFPSElement = document.getElementById('show-fps') as HTMLInputElement | null;\n        const autoQualityElement = document.getElementById('auto-quality') as HTMLInputElement | null;\n        \n        if (frameRateCapElement) frameRateCapElement.value = this.settings.frameRateCap;\n        if (showFPSElement) showFPSElement.checked = this.settings.showFPS;\n        if (autoQualityElement) autoQualityElement.checked = this.settings.autoQuality;\n    }\n    \n    applyPreset(preset: string): void {\n        console.log(`Applying ${preset} preset`);\n        \n        // Apply graphics preset\n        this.settings = this.graphicsSettings.applyGraphicsPreset(preset, this.settings as any) as SettingsData;\n        \n        // Apply audio preset\n        this.settings = this.audioSettings.applyAudioPreset(preset, this.settings as any) as SettingsData;\n        \n        // Apply performance preset\n        switch (preset) {\n            case 'performance':\n                this.settings.frameRateCap = '60'; // Cap at 60 FPS for better consistency\n                break;\n                \n            case 'balanced':\n                this.settings.frameRateCap = 'auto'; // Use monitor refresh rate\n                break;\n                \n            case 'quality':\n                this.settings.frameRateCap = '0'; // Unlimited\n                break;\n        }\n        \n        // Don't change auto quality and FPS display settings\n        \n        // Update the UI to reflect new settings\n        this.updateUI();\n        \n        // Show confirmation message\n        this.showSettingsApplied();\n    }\n    \n    applyAllSettings(): void {\n        if (!this.game) return;\n        \n        // Apply graphics settings\n        this.graphicsSettings.applyGraphicsSettings(this.settings as any);\n        \n        // Apply physics settings related to graphics\n        this.graphicsSettings.applyPhysicsSettings(this.settings as any);\n        \n        // Apply audio settings\n        this.audioSettings.applyAudioSettings(this.settings as any);\n        \n        // Apply UI settings\n        this.applyUISettings();\n        \n        console.log('All settings applied successfully');\n    }\n    \n    applyGraphicsSettings(): void {\n        if (!this.game) return;\n        \n        // Apply graphics settings\n        this.graphicsSettings.applyGraphicsSettings(this.settings as any);\n        \n        console.log('Graphics settings applied successfully');\n    }\n    \n    \n    applyUISettings(): void {\n        // Apply FPS counter setting - we'll use the existing HUD FPS display\n        const fpsElement = document.getElementById('fps-display') as HTMLDivElement | null;\n        if (fpsElement) {\n            if (this.settings.showFPS) {\n                // Show FPS display in HUD\n                fpsElement.style.display = 'block';\n                \n                // Update FPS immediately if we have a current value\n                if (this.game && this.game.currentFPS) {\n                    fpsElement.textContent = `FPS: ${Math.round(this.game.currentFPS)}`;\n                }\n            } else {\n                // Hide FPS display in HUD\n                fpsElement.style.display = 'none';\n            }\n        } else {\n            console.warn(\"FPS display element not found in HUD. It should have ID 'fps-display'\");\n        }\n        \n        // Update frame rate cap in game\n        if (this.game) {\n            const oldCap = this.game.frameRateCap;\n            const monitorRefreshRate = this.helpers.getMonitorRefreshRate();\n            \n            // Handle auto (monitor refresh rate) setting\n            if (this.settings.frameRateCap === 'auto') {\n                // If refresh rate is over 65Hz, set to unlimited (0)\n                if (monitorRefreshRate > 65) {\n                    this.game.frameRateCap = 0;\n                    console.log(`Using unlimited frame rate (refresh rate ${monitorRefreshRate}Hz > 65Hz)`);\n                } else {\n                    this.game.frameRateCap = monitorRefreshRate;\n                    console.log(`Setting frame rate cap to monitor refresh rate: ${monitorRefreshRate}Hz`);\n                }\n            } else {\n                // Use the selected numeric value\n                this.game.frameRateCap = parseInt(this.settings.frameRateCap) || 0;\n            }\n            \n            // Only reset timing when changing from unlimited to limited or vice versa\n            // This prevents disrupting the animation loop when just changing cap values\n            if ((oldCap === 0 && this.game.frameRateCap > 0) || \n                (oldCap > 0 && this.game.frameRateCap === 0)) {\n                this.game.lastFrameTime = 0;\n            }\n            \n            console.log(`Frame rate cap changed from ${oldCap} to ${this.game.frameRateCap}`);\n        }\n    }\n    \n    showSettingsApplied(): void {\n        this.settingsView.showSettingsApplied();\n    }\n    \n    show(): void {\n        // Update UI to reflect current settings\n        this.updateUI();\n        \n        // Show settings\n        if (this.settingsView.show()) {\n            this.isVisible = true;\n        }\n    }\n    \n    hide(): void {\n        if (this.settingsView.hide()) {\n            this.isVisible = false;\n            \n            // Show the stargate UI when returning from settings\n            if (this.stargateInterface) {\n                this.stargateInterface.showStargateUI();\n            }\n        }\n    }\n    \n    toggle(): void {\n        if (this.isVisible) {\n            this.hide();\n        } else {\n            this.show();\n        }\n    }\n} \n"],"names":["SettingsStyles","isMobile","__publicField","settingsContainer","style","labelText","description","controlHtml","inputId","toggleHtml","selectId","options","optionsHtml","option","selectHtml","AudioSettings","game","styles","settings","audio","spatialAudioElement","preset","GraphicsSettings","renderer","THREE.PCFShadowMap","THREE.PCFSoftShadowMap","useClaudeRays","intensity","pixelRatio","environment","physics","elements","elementId","value","element","defaultValue","SettingsView","graphicsSettings","audioSettings","helpers","persistence","presetName","refreshRate","frameRateSelect","autoOption","notification","notificationStyles","SettingsPersistence","savedSettings","parsedSettings","mergedSettings","error","defaults","validatedSettings","key","jsonString","importedSettings","timestamp","backupKey","backups","backupPrefix","i","backupData","a","b","parsedBackup","keepCount","SettingsEventHandlers","backButton","e","applyButton","applyHandler","buttonId","button","presetHandler","newButton","_a","SettingsHelpers","performance","gl","debugInfo","details","_err","quickMeasure","userAgent","isGaming","isHighEnd","warmupFrames","frameCount","timestamps","startTime","detectFrame","intervals","delta","q1","q3","iqr","validRates","rate","avg","newRate","commonRates","closest","minDiff","commonRate","diff","callback","validationRules","errors","validValues","capability","recommendations","formatted","impact","qualityMap","Settings","MobileDetector","stargateInterface","frameRateCapElement","showFPSElement","autoQualityElement","fpsElement","oldCap","monitorRefreshRate"],"mappings":"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"}