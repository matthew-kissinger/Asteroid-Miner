const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/stargateInterface-oDq5uNE_.js","assets/game-core-OtPnLuF2.js","assets/three-DBvJLP14.js","assets/gameOverScreen-BN38I_7h.js","assets/pathUtils-CUZPms8F.js","assets/starMap-DErtprvI.js","assets/blackjackGame-DXuUSgae.js","assets/settings-BHCPrtiN.js"])))=>i.map(i=>d[i]);
var Z=Object.defineProperty;var K=(r,e,t)=>e in r?Z(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var p=(r,e,t)=>K(r,typeof e!="symbol"?e+"":e,t);import{o as A,m as b,c as U,_ as y,b as J}from"./game-core-OtPnLuF2.js";import{V as $}from"./three-DBvJLP14.js";import{P as f,g as Q,a as ee}from"./ecs-systems-DNfKaFsz.js";import"./vendor-D1adT2yx.js";class s{static initializeStyles(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;600&family=Electrolize&display=swap",e.rel="stylesheet",document.head.appendChild(e);const t=document.createElement("style");t.textContent=`
            @keyframes pulse {
                0% { opacity: 0.7; }
                50% { opacity: 1; }
                100% { opacity: 0.7; }
            }
            
            @keyframes radar-ping {
                0% { transform: translate(-50%, -50%) scale(0); opacity: 0.5; }
                100% { transform: translate(-50%, -50%) scale(3); opacity: 0; }
            }
            
            @keyframes text-flicker {
                0% { opacity: 1; }
                3% { opacity: 0.4; }
                6% { opacity: 1; }
                9% { opacity: 0.4; }
                12% { opacity: 1; }
                35% { opacity: 1; }
                38% { opacity: 0.4; }
                41% { opacity: 1; }
                100% { opacity: 1; }
            }
            
            @keyframes blink {
                0% { opacity: 1; }
                49% { opacity: 1; }
                50% { opacity: 0; }
                100% { opacity: 0; }
            }

            @keyframes pulse-horde {
                0% { box-shadow: 0 0 5px rgba(255, 30, 30, 0.5); }
                50% { box-shadow: 0 0 10px rgba(255, 30, 30, 0.8); }
                100% { box-shadow: 0 0 5px rgba(255, 30, 30, 0.5); }
            }
        `,document.head.appendChild(t)}static getMainContainerStyles(){return{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",pointerEvents:"none",fontFamily:'"Rajdhani", "Electrolize", sans-serif',fontWeight:"400",color:"rgba(120, 220, 232, 0.9)",textShadow:"0 0 10px rgba(120, 220, 232, 0.5)",opacity:"0",transition:"opacity 0.5s ease"}}static getPanelStyles(){return{backgroundColor:"rgba(6, 22, 31, 0.7)",backdropFilter:"blur(5px)",borderRadius:"10px",border:"1px solid rgba(120, 220, 232, 0.3)",boxShadow:"0 0 15px rgba(120, 220, 232, 0.2), inset 0 0 10px rgba(120, 220, 232, 0.1)",overflow:"hidden"}}static getPanelHeaderStyles(){return{fontWeight:"600",fontSize:"14px",textTransform:"uppercase",letterSpacing:"2px",marginBottom:"15px",paddingBottom:"8px",borderBottom:"1px solid rgba(120, 220, 232, 0.3)",display:"flex",justifyContent:"space-between",alignItems:"center"}}static getStatusIndicatorStyles(){return{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"rgba(120, 220, 232, 0.8)",boxShadow:"0 0 5px rgba(120, 220, 232, 0.8)",animation:"pulse 2s infinite"}}static getPanelRowStyles(){return{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"10px 0"}}static getButtonStyles(){return{width:"100%",marginTop:"15px",padding:"8px",backgroundColor:"rgba(120, 220, 232, 0.15)",border:"1px solid rgba(120, 220, 232, 0.5)",borderRadius:"5px",color:"rgba(120, 220, 232, 0.9)",fontSize:"12px",fontFamily:'"Rajdhani", sans-serif',cursor:"pointer",transition:"all 0.2s ease",textTransform:"uppercase",letterSpacing:"1px",fontWeight:"600",outline:"none",pointerEvents:"auto"}}static getBarContainerStyles(){return{height:"10px",backgroundColor:"rgba(10, 30, 40, 0.5)",borderRadius:"5px",overflow:"hidden"}}static getBarStyles(){return{width:"100%",height:"100%",boxShadow:"inset 0 0 5px rgba(255, 255, 255, 0.5)",transition:"width 0.3s ease"}}static getScanlineEffectStyles(){return{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",background:"linear-gradient(transparent 50%, rgba(120, 220, 232, 0.03) 50%)",backgroundSize:"100% 4px",zIndex:"1000",pointerEvents:"none",opacity:"0.5"}}static getActiveScanlineStyles(){return{position:"absolute",left:"0",width:"100%",height:"3px",background:"linear-gradient(90deg, transparent 0%, rgba(120, 220, 232, 0.1) 50%, transparent 100%)",boxShadow:"0 0 10px rgba(120, 220, 232, 0.3)",zIndex:"1001",top:"0",opacity:"0.7",pointerEvents:"none"}}static createGlitchAnimation(){const e=Date.now(),t=`
            @keyframes glitch-${e} {
                0% { transform: translate(0, 0) skew(0deg); filter: hue-rotate(0deg); }
                1% { transform: translate(2px, 2px) skew(1deg); filter: hue-rotate(90deg); }
                2% { transform: translate(-2px, -3px) skew(-1deg); filter: hue-rotate(180deg); }
                3% { transform: translate(0, 0) skew(0deg); filter: hue-rotate(0deg); }
                12% { clip-path: inset(0 0 0 0); }
                13% { clip-path: inset(10% 0 0 0); }
                14% { clip-path: inset(0 0 0 0); }
                15% { clip-path: inset(0 0 10% 0); }
                16% { clip-path: inset(0 0 0 0); }
                100% { transform: translate(0, 0) skew(0deg); filter: hue-rotate(0deg); }
            }
        `,n=document.createElement("style");return n.textContent=t,document.head.appendChild(n),`glitch-${e}`}static applyStyles(e,t){Object.assign(e.style,t)}static addCornerElements(e){const t=document.createElement("div");s.applyStyles(t,{position:"absolute",top:"0",left:"0",width:"10px",height:"10px",borderTop:"2px solid rgba(120, 220, 232, 0.8)",borderLeft:"2px solid rgba(120, 220, 232, 0.8)"}),e.appendChild(t);const n=document.createElement("div");s.applyStyles(n,{position:"absolute",top:"0",right:"0",width:"10px",height:"10px",borderTop:"2px solid rgba(120, 220, 232, 0.8)",borderRight:"2px solid rgba(120, 220, 232, 0.8)"}),e.appendChild(n);const o=document.createElement("div");s.applyStyles(o,{position:"absolute",bottom:"0",left:"0",width:"10px",height:"10px",borderBottom:"2px solid rgba(120, 220, 232, 0.8)",borderLeft:"2px solid rgba(120, 220, 232, 0.8)"}),e.appendChild(o);const i=document.createElement("div");s.applyStyles(i,{position:"absolute",bottom:"0",right:"0",width:"10px",height:"10px",borderBottom:"2px solid rgba(120, 220, 232, 0.8)",borderRight:"2px solid rgba(120, 220, 232, 0.8)"}),e.appendChild(i)}}class h{static createFlightPanel(e){const t=document.createElement("div");t.id="flight-panel",t.className="hud-panel",s.applyStyles(t,{position:"absolute",bottom:"20px",left:"20px",width:"260px",padding:"15px",...s.getPanelStyles()}),e.appendChild(t);const n=document.createElement("div");n.className="panel-header",n.innerHTML="<span>FLIGHT SYSTEMS</span>",s.applyStyles(n,s.getPanelHeaderStyles()),t.appendChild(n);const o=document.createElement("div");return o.className="status-indicator",s.applyStyles(o,s.getStatusIndicatorStyles()),n.appendChild(o),h.createFuelGauge(t),h.createPanelRow(t,"CREDITS","credits","1000 CR"),h.createControlsButton(t),s.addCornerElements(t),t}static createStatusPanel(e){const t=document.createElement("div");t.id="status-panel",t.className="hud-panel",s.applyStyles(t,{position:"absolute",bottom:"20px",right:"20px",width:"260px",padding:"15px",...s.getPanelStyles()}),e.appendChild(t);const n=document.createElement("div");n.className="panel-header",n.innerHTML="<span>SHIP STATUS</span>",s.applyStyles(n,s.getPanelHeaderStyles()),t.appendChild(n);const o=document.createElement("div");return o.className="status-indicator",s.applyStyles(o,s.getStatusIndicatorStyles()),n.appendChild(o),h.createShieldBar(t),h.createHullBar(t),s.addCornerElements(t),h.createSoundToggleButton(t),t}static createLocationPanel(e){const t=document.createElement("div");return t.id="location-panel",t.className="hud-panel",s.applyStyles(t,{position:"absolute",top:"20px",left:"20px",padding:"10px 20px",backgroundColor:"rgba(6, 22, 31, 0.7)",backdropFilter:"blur(5px)",borderRadius:"8px",border:"1px solid rgba(120, 220, 232, 0.3)",boxShadow:"0 0 15px rgba(120, 220, 232, 0.2)",fontSize:"14px"}),e.appendChild(t),t.innerHTML=`
            <div style="display:flex; align-items:center; gap:10px;">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22C12 22 19 14.25 19 9C19 5.13 15.87 2 12 2ZM12 11.5C10.62 11.5 9.5 10.38 9.5 9C9.5 7.62 10.62 6.5 12 6.5C13.38 6.5 14.5 7.62 14.5 9C14.5 10.38 13.38 11.5 12 11.5Z" 
                          fill="rgba(120, 220, 232, 0.8)"/>
                </svg>
                <span id="current-system" style="font-weight:600; letter-spacing:1px;">SOLAR SYSTEM</span>
            </div>
            <div id="location-coordinates" style="margin-top:5px; font-size:12px; opacity:0.8;">X: 0 Y: 0 Z: 0</div>
            <div id="fps-display" style="margin-top:5px; font-size:12px; opacity:0.8;">FPS: 0</div>
            <div style="margin-top:5px; display:flex; align-items:center; gap:10px; font-size:12px; opacity:0.8;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" 
                          fill="rgba(120, 220, 232, 0.8)"/>
                    <path d="M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" 
                          fill="rgba(120, 220, 232, 0.5)"/>
                </svg>
                <span>ANOMALIES: <span id="anomaly-count" style="font-weight:600;">0</span></span>
            </div>
        `,s.addCornerElements(t),t}static createResourcePanel(e){const t=document.createElement("div");t.id="resource-panel",t.className="hud-panel",s.applyStyles(t,{position:"absolute",top:"20px",right:"20px",width:"180px",padding:"10px 15px",backgroundColor:"rgba(6, 22, 31, 0.7)",backdropFilter:"blur(5px)",borderRadius:"8px",border:"1px solid rgba(120, 220, 232, 0.3)",boxShadow:"0 0 15px rgba(120, 220, 232, 0.2)",fontSize:"14px"}),e.appendChild(t);const n=document.createElement("div");return n.className="panel-header",n.innerHTML="<span>CARGO BAY</span>",s.applyStyles(n,{fontWeight:"600",fontSize:"12px",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px",paddingBottom:"5px",borderBottom:"1px solid rgba(120, 220, 232, 0.3)",display:"flex",justifyContent:"space-between",alignItems:"center"}),t.appendChild(n),h.createResourceRow(t,"IRON","iron-amount","rgba(180, 180, 180, 0.8)"),h.createResourceRow(t,"GOLD","gold-amount","rgba(255, 215, 0, 0.8)"),h.createResourceRow(t,"PLATINUM","platinum-amount","rgba(229, 228, 226, 0.8)"),h.createCapacityMeter(t),s.addCornerElements(t),t}static createFuelGauge(e){const t=document.createElement("div");t.className="panel-row",s.applyStyles(t,s.getPanelRowStyles()),e.appendChild(t);const n=document.createElement("span");n.className="row-label",n.textContent="FUEL",n.style.width="40%",t.appendChild(n);const o=document.createElement("span");o.id="fuel-value",o.className="row-value",o.textContent="100 / 100",s.applyStyles(o,{position:"absolute",right:"15px",top:"-18px",fontSize:"12px",color:"rgba(120, 220, 232, 0.9)"});const i=document.createElement("div");s.applyStyles(i,{width:"60%",position:"relative",...s.getBarContainerStyles()}),i.appendChild(o),t.appendChild(i);const a=document.createElement("div");a.id="fuel-bar",s.applyStyles(a,{backgroundColor:"rgba(120, 220, 232, 0.8)",...s.getBarStyles()}),i.appendChild(a)}static createShieldBar(e){const t=document.createElement("div");t.className="panel-row",s.applyStyles(t,s.getPanelRowStyles()),e.appendChild(t);const n=document.createElement("span");n.className="row-label",n.textContent="SHIELD",n.style.width="50%",t.appendChild(n);const o=document.createElement("div");s.applyStyles(o,{width:"50%",...s.getBarContainerStyles()}),t.appendChild(o);const i=document.createElement("div");i.id="shield-bar",s.applyStyles(i,{backgroundColor:"rgba(51, 153, 255, 0.8)",...s.getBarStyles()}),o.appendChild(i)}static createHullBar(e){const t=document.createElement("div");t.className="panel-row",s.applyStyles(t,s.getPanelRowStyles()),e.appendChild(t);const n=document.createElement("span");n.className="row-label",n.textContent="HULL INTEGRITY",n.style.width="50%",t.appendChild(n);const o=document.createElement("div");s.applyStyles(o,{width:"50%",...s.getBarContainerStyles()}),t.appendChild(o);const i=document.createElement("div");i.id="hull-bar",s.applyStyles(i,{backgroundColor:"rgba(120, 220, 232, 0.8)",...s.getBarStyles()}),o.appendChild(i)}static createResourceRow(e,t,n,o){const i=document.createElement("div");s.applyStyles(i,{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"5px 0"});const a=document.createElement("div");s.applyStyles(a,{width:"12px",height:"14px",clipPath:"polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)",backgroundColor:o,marginRight:"8px"});const l=document.createElement("div");s.applyStyles(l,{display:"flex",alignItems:"center",width:"50%",fontSize:"12px"}),l.appendChild(a),l.appendChild(document.createTextNode(t));const c=document.createElement("div");c.id=n,s.applyStyles(c,{width:"50%",textAlign:"right",fontWeight:"600",fontSize:"12px"}),c.textContent="0",i.appendChild(l),i.appendChild(c),e.appendChild(i)}static createCapacityMeter(e){const t=document.createElement("div");s.applyStyles(t,{marginTop:"8px",display:"flex",justifyContent:"space-between",alignItems:"center",borderTop:"1px solid rgba(120, 220, 232, 0.3)",paddingTop:"8px"}),e.appendChild(t);const n=document.createElement("div");n.textContent="CAPACITY",n.style.fontSize="12px",t.appendChild(n);const o=document.createElement("div");o.id="cargo-capacity",o.textContent="0 / 1000",s.applyStyles(o,{fontSize:"12px",fontWeight:"600"}),t.appendChild(o);const i=document.createElement("div");s.applyStyles(i,{width:"100%",height:"5px",backgroundColor:"rgba(10, 30, 40, 0.5)",borderRadius:"3px",overflow:"hidden",marginTop:"5px"}),e.appendChild(i);const a=document.createElement("div");a.id="capacity-bar",s.applyStyles(a,{width:"0%",height:"100%",backgroundColor:"rgba(120, 220, 232, 0.8)",transition:"width 0.3s ease"}),i.appendChild(a)}static createPanelRow(e,t,n,o,i=!1){const a=document.createElement("div");a.className="panel-row",s.applyStyles(a,{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"8px 0"}),e.appendChild(a);const l=document.createElement("span");l.className="row-label",l.textContent=t,a.appendChild(l);const c=document.createElement("span");c.id=n,c.className="row-value",c.textContent=o,i&&o==="ON"?c.style.color="#5fff8f":i&&o==="OFF"&&(c.style.color="#ff7f7f"),a.appendChild(c)}static createControlsButton(e){const t=document.createElement("button");t.id="show-controls",t.textContent="SYSTEM CONTROLS",s.applyStyles(t,s.getButtonStyles()),t.addEventListener("mouseover",()=>{s.applyStyles(t,{backgroundColor:"rgba(120, 220, 232, 0.3)",boxShadow:"0 0 10px rgba(120, 220, 232, 0.5)"})}),t.addEventListener("mouseout",()=>{s.applyStyles(t,{backgroundColor:"rgba(120, 220, 232, 0.15)",boxShadow:"none"})}),e.appendChild(t)}static createSoundToggleButton(e){const t=document.createElement("button");t.id="sound-toggle",t.textContent="SOUND: ON",s.applyStyles(t,{background:"none",border:"1px solid rgba(120, 220, 232, 0.5)",color:"rgba(120, 220, 232, 0.9)",padding:"5px 10px",borderRadius:"5px",cursor:"pointer",fontFamily:'"Rajdhani", sans-serif',fontSize:"12px",marginLeft:"10px",marginTop:"10px",outline:"none",pointerEvents:"auto"}),t.addEventListener("click",()=>{if(window.game&&window.game.audio){const n=window.game.audio.toggleMute();t.textContent=n?"SOUND: OFF":"SOUND: ON"}}),e.appendChild(t)}}class w{static createNotificationsArea(e){const t=document.createElement("div");return t.id="notifications-area",s.applyStyles(t,{position:"absolute",top:"20px",left:"50%",transform:"translateX(-50%)",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"}),e.appendChild(t),w.createHordeModeIndicator(t),t}static createHordeModeIndicator(e){const t=document.createElement("div");t.id="horde-mode-indicator",t.className="hud-panel",s.applyStyles(t,{display:"none",padding:"8px 12px",backgroundColor:"rgba(51, 10, 10, 0.8)",backdropFilter:"blur(5px)",borderRadius:"8px",border:"1px solid #ff3030",boxShadow:"0 0 15px rgba(255, 48, 48, 0.5)",animation:"pulse-horde 2s infinite",marginBottom:"10px",fontSize:"18px",fontWeight:"600",letterSpacing:"1px"});const n=document.createElement("div");s.applyStyles(n,{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"});const o=document.createElement("span");s.applyStyles(o,{color:"#ff3030",textShadow:"0 0 5px rgba(255,48,48,0.5)"}),o.textContent="HORDE MODE";const i=document.createElement("span");return i.id="horde-survival-time",s.applyStyles(i,{color:"#ff9999",fontWeight:"bold"}),i.textContent="00:00",n.appendChild(o),n.appendChild(i),t.appendChild(n),s.addCornerElements(t),e.appendChild(t),t}static updateHordeModeDisplay(){const e=document.getElementById("horde-mode-indicator"),t=document.getElementById("horde-survival-time");if(!(!e||!t))if(window.game&&window.game.isHordeActive){if(e.style.display==="none"&&(e.style.display="flex"),window.game&&window.game.getFormattedHordeSurvivalTime)t.textContent=window.game.getFormattedHordeSurvivalTime();else if(window.game&&window.game.hordeSurvivalTime!==void 0){const n=Math.floor(window.game.hordeSurvivalTime/1e3),o=Math.floor(n/60),i=n%60;t.textContent=`${o.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}if(window.game&&window.game.hordeSurvivalTime>3*60*1e3){const n=document.createElement("style");n.textContent=`
                    @keyframes pulse-horde {
                        0% { box-shadow: 0 0 8px rgba(255, 30, 30, 0.7); }
                        50% { box-shadow: 0 0 15px rgba(255, 30, 30, 1); }
                        100% { box-shadow: 0 0 8px rgba(255, 30, 30, 0.7); }
                    }
                `,document.head.appendChild(n),e.style.animation="pulse-horde 1s infinite"}}else e.style.display="none"}static showNotification(e,t="info",n=3e3){const o=document.getElementById("notifications-area");if(!o)return;const i=document.createElement("div");i.className="hud-notification";let a,l;switch(t){case"warning":a="rgba(255, 204, 0, 0.1)",l="rgba(255, 204, 0, 0.5)";break;case"error":a="rgba(255, 48, 48, 0.1)",l="rgba(255, 48, 48, 0.5)";break;case"success":a="rgba(95, 255, 143, 0.1)",l="rgba(95, 255, 143, 0.5)";break;default:a="rgba(120, 220, 232, 0.1)",l="rgba(120, 220, 232, 0.5)"}s.applyStyles(i,{padding:"8px 15px",backgroundColor:a,backdropFilter:"blur(5px)",borderRadius:"5px",border:`1px solid ${l}`,fontSize:"14px",color:"rgba(255, 255, 255, 0.9)",textAlign:"center",animation:"fadeIn 0.3s ease-in-out",marginBottom:"5px",maxWidth:"300px",wordWrap:"break-word"}),i.textContent=e,o.appendChild(i);const c=document.createElement("style");c.textContent=`
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(-10px); }
                to { opacity: 1; transform: translateY(0); }
            }
            @keyframes fadeOut {
                from { opacity: 1; transform: translateY(0); }
                to { opacity: 0; transform: translateY(-10px); }
            }
        `,document.head.appendChild(c),setTimeout(()=>{i.style.animation="fadeOut 0.3s ease-in-out",setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i)},300)},n)}static showCriticalAlert(e){w.showNotification(e,"error",5e3);const t=document.createElement("div");s.applyStyles(t,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(255, 0, 0, 0.1)",pointerEvents:"none",zIndex:"9999",animation:"flash 0.5s ease-in-out"});const n=document.createElement("style");n.textContent=`
            @keyframes flash {
                0% { opacity: 0; }
                50% { opacity: 1; }
                100% { opacity: 0; }
            }
        `,document.head.appendChild(n),document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.parentNode&&n.parentNode.removeChild(n)},500)}}class u{static createTargetingSystem(e){const t=document.createElement("div");t.id="targeting-system",s.applyStyles(t,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100px",height:"100px",zIndex:"100"}),e.appendChild(t);const n=document.createElement("div");return n.id="crosshair",s.applyStyles(n,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"50px",height:"50px"}),n.innerHTML=`
            <svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="25" cy="25" r="20" stroke="rgba(120, 220, 232, 0.5)" stroke-width="1" stroke-dasharray="8 4"/>
                <circle cx="25" cy="25" r="3" stroke="rgba(120, 220, 232, 0.8)" stroke-width="1"/>
                <circle cx="25" cy="25" r="1" fill="rgba(120, 220, 232, 0.8)"/>
                <line x1="25" y1="10" x2="25" y2="18" stroke="rgba(120, 220, 232, 0.8)" stroke-width="1"/>
                <line x1="25" y1="32" x2="25" y2="40" stroke="rgba(120, 220, 232, 0.8)" stroke-width="1"/>
                <line x1="10" y1="25" x2="18" y2="25" stroke="rgba(120, 220, 232, 0.8)" stroke-width="1"/>
                <line x1="32" y1="25" x2="40" y2="25" stroke="rgba(120, 220, 232, 0.8)" stroke-width="1"/>
                <!-- Add a pulsing animation to the outer circle -->
                <circle cx="25" cy="25" r="24" stroke="rgba(120, 220, 232, 0.3)" stroke-width="1">
                    <animate attributeName="r" values="24;28;24" dur="3s" repeatCount="indefinite"/>
                    <animate attributeName="opacity" values="0.3;0.1;0.3" dur="3s" repeatCount="indefinite"/>
                </circle>
            </svg>
        `,t.appendChild(n),u.createTargetInfoDisplay(e),u.createLaserBeam(e),t}static createTargetInfoDisplay(e){const t=document.createElement("div");t.id="target-info",t.className="hud-panel";const o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2||window.innerWidth<=768?{bottom:"15px",top:"auto"}:{top:"15px",bottom:"auto"};return s.applyStyles(t,{position:"fixed",left:"50%",transform:"translateX(-50%)",width:"280px",padding:"10px 15px",backgroundColor:"rgba(6, 22, 31, 0.7)",backdropFilter:"blur(5px)",borderRadius:"8px",fontSize:"14px",color:"rgba(120, 220, 232, 0.9)",border:"1px solid rgba(120, 220, 232, 0.3)",boxShadow:"0 0 15px rgba(120, 220, 232, 0.2)",textAlign:"center",display:"none",zIndex:"999",fontFamily:'"Rajdhani", "Electrolize", sans-serif',...o}),e.appendChild(t),s.addCornerElements(t),t.innerHTML=`
            <div id="target-name" style="font-weight:600; margin-bottom:5px;">NO TARGET</div>
            <div id="target-distance" style="margin-bottom:0;">DISTANCE: ---</div>
        `,t}static createLaserBeam(e){const t=document.createElement("div");return t.id="laser-beam",s.applyStyles(t,{position:"absolute",top:"50%",left:"50%",width:"0px",height:"2px",backgroundColor:"rgba(255, 50, 50, 0.8)",boxShadow:"0 0 10px rgba(255, 50, 50, 0.8)",transformOrigin:"left",transform:"rotate(var(--angle, 0deg))",zIndex:"90",display:"none"}),e.appendChild(t),t}static createScanlineEffect(e){return null}static updateShieldDisplay(e){const t=document.getElementById("shield-bar");if(!t)return;let n=100,o=!1;try{if(window.game&&window.game.world){const i=window.game.world.getEntitiesByTag("player");if(i&&i.length>0){const l=i[0].getComponent("HealthComponent");l&&(n=l.getShieldPercentage(),e&&(l.shield>e.shield?(e.shield=l.shield,e.maxShield=l.maxShield):e.shield>l.shield&&(l.shield=e.shield,console.log(`Updated HealthComponent shield from spaceship: ${l.shield}`),n=l.getShieldPercentage())),o=!0)}}}catch(i){console.error("Error accessing player shield component:",i)}!o&&e&&e.shield!==void 0&&(n=e.shield/e.maxShield*100),t.style.width=`${n}%`,n<25?t.style.backgroundColor="rgba(255, 80, 80, 0.8)":n<50?t.style.backgroundColor="rgba(255, 204, 0, 0.8)":t.style.backgroundColor="rgba(51, 153, 255, 0.8)"}static updateHullDisplay(e){const t=document.getElementById("hull-bar");if(!t)return;let n=100,o=!1;try{if(window.game&&window.game.world){const i=window.game.world.getEntitiesByTag("player");if(i&&i.length>0){const l=i[0].getComponent("HealthComponent");l&&(n=l.getHealthPercentage(),e&&(l.health>e.hull?(e.hull=l.hull,e.maxHull=l.maxHull):e.hull>l.health&&(l.health=e.hull,console.log(`Updated HealthComponent health from spaceship: ${l.hull}`),n=l.getHealthPercentage())),o=!0)}}}catch(i){console.error("Error accessing player health component:",i)}!o&&e&&e.hull!==void 0&&(n=e.hull/e.maxHull*100),t.style.width=`${n}%`,n<30?t.style.backgroundColor="rgba(255, 80, 80, 0.8)":n<60?t.style.backgroundColor="rgba(255, 204, 0, 0.8)":t.style.backgroundColor="rgba(120, 220, 232, 0.8)"}static updateFuelDisplay(e){const t=document.getElementById("fuel-bar"),n=document.getElementById("fuel-value");if(!t||!e)return;const o=e.maxFuel>0?e.fuel/e.maxFuel*100:0;t.style.width=`${o}%`,o<20?t.style.backgroundColor="rgba(255, 80, 80, 0.8)":o<40?t.style.backgroundColor="rgba(255, 204, 0, 0.8)":t.style.backgroundColor="rgba(120, 220, 232, 0.8)",n&&(n.textContent=`${Math.round(e.fuel)} / ${Math.round(e.maxFuel)}`)}static updateCreditsDisplay(e){const t=document.getElementById("credits-value");t&&e&&(t.textContent=`${e.credits} CR`)}static updateCoordinates(e,t,n){const o=document.getElementById("location-coordinates");o&&(o.textContent=`X: ${Math.round(e)} Y: ${Math.round(t)} Z: ${Math.round(n)}`)}static updateFPS(e,t){const n=document.getElementById("fps-display");n&&(t?(n.textContent=`FPS: ${Math.round(e)}/${t}`,e<t*.9?n.style.color="rgba(255, 120, 120, 0.9)":n.style.color="rgba(120, 220, 232, 0.8)"):(n.textContent=`FPS: ${Math.round(e)}`,n.style.color="rgba(120, 220, 232, 0.8)"),window.game&&window.game.ui&&window.game.ui.settings&&window.game.ui.settings.settings.frameRateCap==="auto"&&(t>0?n.textContent=`FPS: ${Math.round(e)}/${t} (Auto)`:n.textContent=`FPS: ${Math.round(e)} (Auto: Unlimited)`))}static updateLocation(e,t="Unknown System"){const n=document.getElementById("current-system");n&&(n.textContent=t.toUpperCase())}}class te{constructor(){p(this,"animationFrames");p(this,"glitchInterval");p(this,"scanline");this.animationFrames=[],this.glitchInterval=null,this.scanline=null}animateHudIn(){this.addStartupGlitchEffect(),setTimeout(()=>{this.scanline&&this.animateScanline()},1500)}addStartupGlitchEffect(){const e=document.getElementById("hud-container");e&&(setTimeout(()=>{e.style.opacity="0.3",this.addGlitch(e)},300),setTimeout(()=>{e.style.opacity="0.7",this.addGlitch(e)},800),setTimeout(()=>{e.style.opacity="1",this.addGlitch(e)},1200),this.glitchInterval=setInterval(()=>{Math.random()>.7&&this.addGlitch(e)},5e3))}addGlitch(e){const t=s.createGlitchAnimation();e.style.animation=`${t} 1s forwards`,setTimeout(()=>{e.style.animation="",document.querySelectorAll("style").forEach(o=>{o.textContent.includes(t)&&o.remove()})},1e3)}animateScanline(){let e=0;const t=window.innerHeight,n=()=>{this.scanline&&(e=(e+2)%t,this.scanline.style.top=`${e}px`,Math.random()>.97&&(this.scanline.style.opacity="0",setTimeout(()=>{this.scanline&&(this.scanline.style.opacity="0.7")},50)),this.animationFrames.push(requestAnimationFrame(n)))};n()}setScanline(e){this.scanline=e}handleLocationChange(e,t){const n=document.getElementById("location-panel");n&&this.addGlitch(n)}show(){const e=document.getElementById("hud-container");e&&(e.style.opacity="1"),this.scanline&&this.animateScanline(),this.glitchInterval||(this.glitchInterval=setInterval(()=>{Math.random()>.7&&this.addGlitch(e)},5e3))}hide(){const e=document.getElementById("hud-container");e&&(e.style.opacity="0"),this.animationFrames.forEach(t=>cancelAnimationFrame(t)),this.animationFrames=[],this.glitchInterval&&(clearInterval(this.glitchInterval),this.glitchInterval=null)}destroy(){this.animationFrames.forEach(t=>{cancelAnimationFrame(t)}),this.animationFrames=[],this.glitchInterval&&(clearInterval(this.glitchInterval),this.glitchInterval=null);const e=document.getElementById("show-controls");e&&(e.removeEventListener("click",e.clickHandler),e.removeEventListener("mouseover",e.mouseoverHandler),e.removeEventListener("mouseout",e.mouseoutHandler)),this.scanline=null}handleResize(){this.scanline&&this.animateScanline()}handlePerformanceUpdate(e,t){e<30&&this.glitchInterval&&(clearInterval(this.glitchInterval),this.glitchInterval=setInterval(()=>{Math.random()>.9&&this.addGlitch(document.getElementById("hud-container"))},1e4))}handleGameStateChange(e,t){switch(e){case"playing":this.show();break;case"paused":const n=document.getElementById("hud-container");n&&(n.style.opacity="0.5");break;case"game-over":this.hide();break}}handleCriticalEvent(e,t){const n=document.getElementById("hud-container");switch(e){case"low-health":n&&(n.style.filter="hue-rotate(0deg) saturate(1.5)",setTimeout(()=>{n.style.filter="none"},200));break;case"shield-down":n&&(n.style.filter="hue-rotate(240deg) saturate(1.5)",setTimeout(()=>{n.style.filter="none"},300));break;case"low-fuel":n&&(n.style.filter="hue-rotate(60deg) saturate(1.5)",setTimeout(()=>{n.style.filter="none"},250));break}}}class F{static formatNumber(e){return e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}static formatTime(e){const t=Math.floor(e/1e3),n=Math.floor(t/60),o=t%60;return`${n.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`}static formatCoordinates(e,t,n){return`X: ${Math.round(e)} Y: ${Math.round(t)} Z: ${Math.round(n)}`}static formatDistance(e){return e>=1e3?`${(e/1e3).toFixed(1)} km`:`${Math.round(e)} m`}static formatPercentage(e,t){return t===0?0:Math.round(e/t*100)}static getStatusColor(e){return e>=75?"rgba(95, 255, 143, 0.8)":e>=50?"rgba(255, 255, 95, 0.8)":e>=25?"rgba(255, 204, 0, 0.8)":"rgba(255, 80, 80, 0.8)"}static getFuelColor(e){return e<20?"rgba(255, 80, 80, 0.8)":e<40?"rgba(255, 204, 0, 0.8)":"rgba(120, 220, 232, 0.8)"}static getShieldColor(e){return e<25?"rgba(255, 80, 80, 0.8)":e<50?"rgba(255, 204, 0, 0.8)":"rgba(51, 153, 255, 0.8)"}static getHullColor(e){return e<30?"rgba(255, 80, 80, 0.8)":e<60?"rgba(255, 204, 0, 0.8)":"rgba(120, 220, 232, 0.8)"}static isMobileDevice(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2||window.innerWidth<=768}static clamp(e,t,n){return Math.min(Math.max(e,t),n)}static lerp(e,t,n){return e+(t-e)*n}static degToRad(e){return e*(Math.PI/180)}static radToDeg(e){return e*(180/Math.PI)}static getResourceColor(e){switch(e.toLowerCase()){case"iron":return"rgba(180, 180, 180, 0.8)";case"gold":return"rgba(255, 215, 0, 0.8)";case"platinum":return"rgba(229, 228, 226, 0.8)";case"titanium":return"rgba(135, 135, 135, 0.8)";case"uranium":return"rgba(0, 255, 0, 0.8)";default:return"rgba(120, 220, 232, 0.8)"}}static generateId(e="hud"){return`${e}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}static debounce(e,t){let n;return function(...i){const a=()=>{clearTimeout(n),e(...i)};clearTimeout(n),n=setTimeout(a,t)}}static throttle(e,t){let n;return function(){const o=arguments,i=this;n||(e.apply(i,o),n=!0,setTimeout(()=>n=!1,t))}}static safeGet(e,t,n=null){try{return t.split(".").reduce((o,i)=>o[i],e)??n}catch{return n}}static isElementVisible(e){if(!e)return!1;const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}static getGameState(){return F.safeGet(window,"game.state","unknown")}static getPlayerData(){try{if(window.game&&window.game.world){const e=window.game.world.getEntitiesByTag("player");return e&&e.length>0?e[0]:null}}catch(e){console.error("Error accessing player data:",e)}return null}static getPlayerHealthComponent(){const e=F.getPlayerData();if(e)try{return e.getComponent("HealthComponent")}catch(t){console.error("Error accessing health component:",t)}return null}static sanitizeString(e){return typeof e!="string"?"":e.replace(/[<>'"&]/g,"")}static isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}static getOptimalTextColor(e){var n;const t=((n=e.match(/\d+/g))==null?void 0:n.map(Number))||null;return t&&t.length>=3&&(.299*t[0]+.587*t[1]+.114*t[2])/255>.5?"#000000":"#ffffff"}}class ne{constructor(e){p(this,"spaceship");p(this,"eventHandlers");var t;this.spaceship=e,this.eventHandlers=new te,this.setupHUD(),(t=this.eventHandlers)==null||t.animateHudIn()}setupHUD(){s.initializeStyles();const e=this.createMainContainer();h.createFlightPanel(e),h.createStatusPanel(e),u.createTargetingSystem(e),h.createLocationPanel(e),h.createResourcePanel(e),w.createNotificationsArea(e)}createMainContainer(){const e=document.createElement("div");return e.id="hud-container",s.applyStyles(e,s.getMainContainerStyles()),document.body.appendChild(e),e}update(){this.spaceship&&(u.updateShieldDisplay(this.spaceship),u.updateHullDisplay(this.spaceship),u.updateFuelDisplay(this.spaceship),u.updateCreditsDisplay(this.spaceship),w.updateHordeModeDisplay())}updateLocation(e,t="Unknown System"){var o;const n=e??"Unknown Location";u.updateLocation(n,t),(o=this.eventHandlers)==null||o.handleLocationChange(n,t)}updateCoordinates(e,t,n){u.updateCoordinates(e,t,n)}updateFPS(e,t){u.updateFPS(e,t??0)}hide(){var e;(e=this.eventHandlers)==null||e.hide()}show(){var e;(e=this.eventHandlers)==null||e.show()}destroy(){var t;(t=this.eventHandlers)==null||t.destroy();const e=document.getElementById("hud-container");e&&e.parentNode&&e.parentNode.removeChild(e),this.spaceship=null,this.eventHandlers=null}updateShieldDisplay(){u.updateShieldDisplay(this.spaceship)}updateHullDisplay(){u.updateHullDisplay(this.spaceship)}updateHordeModeDisplay(){w.updateHordeModeDisplay()}showNotification(e,t="info",n=3e3){w.showNotification(e,t,n)}showCriticalAlert(e){w.showCriticalAlert(e)}static get helpers(){return F}}class oe{constructor(e){p(this,"spaceship");p(this,"controls");this.spaceship=e,this.controls=null,this.setupMobileHUD()}setupMobileHUD(){const e=document.createElement("style");e.textContent=`
            @keyframes pulse-horde-mobile {
                0% { box-shadow: 0 0 5px rgba(255, 30, 30, 0.5); }
                50% { box-shadow: 0 0 10px rgba(255, 30, 30, 0.8); }
                100% { box-shadow: 0 0 5px rgba(255, 30, 30, 0.5); }
            }
        `,document.head.appendChild(e);const t=document.createElement("div");t.id="mobile-hud-container",t.style.position="absolute",t.style.top="10px",t.style.right="10px",t.style.width="min(140px, 25vw)",t.style.backgroundColor="rgba(6, 22, 31, 0.8)",t.style.backdropFilter="blur(5px)",t.style.setProperty("webkitBackdropFilter","blur(5px)"),t.style.borderRadius="8px",t.style.border="1px solid rgba(120, 220, 232, 0.3)",t.style.padding="10px",t.style.color="rgba(120, 220, 232, 0.9)",t.style.fontFamily='"Rajdhani", "Electrolize", sans-serif',t.style.fontSize="14px",t.style.boxShadow="0 0 10px rgba(120, 220, 232, 0.2)",t.style.zIndex="1000",t.style.transform="translateZ(0)",t.style.backfaceVisibility="hidden",document.body.appendChild(t),this.createStatusBar(t,"S","shield-bar-mobile","rgba(51, 153, 255, 0.8)"),this.createStatusBar(t,"H","hull-bar-mobile","rgba(120, 220, 232, 0.8)"),this.createStatusBar(t,"F","fuel-bar-mobile","rgba(120, 220, 232, 0.8)"),this.createAnomalyDisplay(t);const n=document.createElement("div");n.style.display="flex",n.style.justifyContent="space-between",n.style.alignItems="center",n.style.marginTop="10px";const o=document.createElement("div");o.textContent="C",o.style.marginRight="10px",o.style.fontSize="14px";const i=document.createElement("div");i.id="cargo-value-mobile",i.textContent="0 / 1000",i.style.textAlign="right",i.style.flexGrow="1",i.style.fontSize="14px",n.appendChild(o),n.appendChild(i),t.appendChild(n);const a=document.createElement("div");a.id="mobile-horde-indicator",a.style.display="none",a.style.marginTop="10px",a.style.padding="5px",a.style.backgroundColor="rgba(255, 30, 30, 0.2)",a.style.borderRadius="4px",a.style.border="1px solid #ff3030",a.style.animation="pulse-horde-mobile 2s infinite",a.style.fontSize="12px";const l=document.createElement("div");l.id="mobile-horde-timer",l.textContent="00:00",l.style.textAlign="center",l.style.fontWeight="bold",l.style.color="#ff3030",a.appendChild(l),t.appendChild(a),this.addCornerElements(t)}createStatusBar(e,t,n,o){const i=document.createElement("div");i.style.display="flex",i.style.alignItems="center",i.style.marginBottom="8px";const a=document.createElement("div");a.textContent=t,a.style.marginRight="8px",a.style.width="16px",a.style.textAlign="center",a.style.fontSize="14px";const l=document.createElement("div");if(l.style.flexGrow="1",l.style.height="8px",l.style.backgroundColor="rgba(10, 30, 40, 0.5)",l.style.borderRadius="4px",l.style.overflow="hidden",l.style.position="relative",n==="fuel-bar-mobile"){const d=document.createElement("div");d.id="fuel-value-mobile",d.style.position="absolute",d.style.right="0",d.style.top="-14px",d.style.fontSize="10px",d.style.color="rgba(120, 220, 232, 0.9)",d.textContent="100 / 100",l.appendChild(d)}const c=document.createElement("div");c.id=n,c.style.width="100%",c.style.height="100%",c.style.backgroundColor=o,c.style.transition="width 0.2s ease",l.appendChild(c),i.appendChild(a),i.appendChild(l),e.appendChild(i)}createAnomalyDisplay(e){const t=document.createElement("div");t.style.display="flex",t.style.justifyContent="space-between",t.style.alignItems="center",t.style.marginBottom="8px";const n=document.createElement("div");n.textContent="A",n.style.marginRight="8px",n.style.width="16px",n.style.textAlign="center",n.style.fontSize="14px";const o=document.createElement("div");o.id="anomaly-count-mobile",o.textContent="0",o.style.textAlign="right",o.style.flexGrow="1",o.style.fontSize="14px",o.style.fontWeight="bold",o.style.color="rgba(120, 220, 232, 0.9)",t.appendChild(n),t.appendChild(o),e.appendChild(t)}addCornerElements(e){const t=document.createElement("div");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="6px",t.style.height="6px",t.style.borderTop="1px solid rgba(120, 220, 232, 0.8)",t.style.borderLeft="1px solid rgba(120, 220, 232, 0.8)",e.appendChild(t);const n=document.createElement("div");n.style.position="absolute",n.style.top="0",n.style.right="0",n.style.width="6px",n.style.height="6px",n.style.borderTop="1px solid rgba(120, 220, 232, 0.8)",n.style.borderRight="1px solid rgba(120, 220, 232, 0.8)",e.appendChild(n);const o=document.createElement("div");o.style.position="absolute",o.style.bottom="0",o.style.left="0",o.style.width="6px",o.style.height="6px",o.style.borderBottom="1px solid rgba(120, 220, 232, 0.8)",o.style.borderLeft="1px solid rgba(120, 220, 232, 0.8)",e.appendChild(o);const i=document.createElement("div");i.style.position="absolute",i.style.bottom="0",i.style.right="0",i.style.width="6px",i.style.height="6px",i.style.borderBottom="1px solid rgba(120, 220, 232, 0.8)",i.style.borderRight="1px solid rgba(120, 220, 232, 0.8)",e.appendChild(i)}update(){this.updateShieldDisplay(),this.updateHullDisplay(),this.updateFuelDisplay(),this.updateCargoDisplay(),this.updateAnomalyCount(),this.updateHordeModeDisplay()}updateShieldDisplay(){var i,a;const e=document.getElementById("shield-bar-mobile");if(!e)return;let t=100;const n=((i=this.spaceship)==null?void 0:i.shield)??null,o=((a=this.spaceship)==null?void 0:a.maxShield)??null;typeof n=="number"&&typeof o=="number"&&o>0&&(t=n/o*100),e.style.width=`${t}%`,t<25?e.style.backgroundColor="rgba(255, 80, 80, 0.8)":t<50?e.style.backgroundColor="rgba(255, 204, 0, 0.8)":e.style.backgroundColor="rgba(51, 153, 255, 0.8)"}updateHullDisplay(){var i,a;const e=document.getElementById("hull-bar-mobile");if(!e)return;let t=100;const n=((i=this.spaceship)==null?void 0:i.hull)??null,o=((a=this.spaceship)==null?void 0:a.maxHull)??null;typeof n=="number"&&typeof o=="number"&&o>0&&(t=n/o*100),e.style.width=`${t}%`,t<30?e.style.backgroundColor="rgba(255, 80, 80, 0.8)":t<60?e.style.backgroundColor="rgba(255, 204, 0, 0.8)":e.style.backgroundColor="rgba(120, 220, 232, 0.8)"}updateFuelDisplay(){const e=document.getElementById("fuel-bar-mobile"),t=document.getElementById("fuel-value-mobile");if(!e||!this.spaceship)return;const n=this.spaceship.maxFuel??0,o=this.spaceship.fuel??0,i=n>0?o/n*100:0;e.style.width=`${i}%`,i<20?e.style.backgroundColor="rgba(255, 80, 80, 0.8)":i<40?e.style.backgroundColor="rgba(255, 204, 0, 0.8)":e.style.backgroundColor="rgba(120, 220, 232, 0.8)",t&&(t.textContent=`${Math.round(o)} / ${Math.round(n)}`)}updateCargoDisplay(){const e=document.getElementById("cargo-value-mobile");if(!e)return;let t=null,n=1e3;if(this.controls&&this.controls.resources?(t=this.controls.resources,this.spaceship&&typeof this.spaceship.maxCargoCapacity=="number"&&(n=this.spaceship.maxCargoCapacity)):this.spaceship&&this.spaceship.cargoComponent&&this.spaceship.cargoComponent.resources?(t=this.spaceship.cargoComponent.resources,typeof this.spaceship.cargoComponent.maxCapacity=="number"&&(n=this.spaceship.cargoComponent.maxCapacity)):this.spaceship&&this.spaceship.resources&&(t=this.spaceship.resources),!t)return;let o=0;for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const a=parseFloat(String(t[i]))||0;o+=a}o=Math.round(o),e.textContent=`${o} / ${n}`,o>=n*.9?e.style.color="rgba(255, 80, 80, 0.9)":o>=n*.7?e.style.color="rgba(255, 204, 0, 0.9)":e.style.color="rgba(120, 220, 232, 0.9)"}updateAnomalyCount(){const e=document.getElementById("anomaly-count-mobile");if(!e)return;let t=0;window.game&&window.game.environment&&window.game.environment.anomalyCount&&(t=window.game.environment.anomalyCount),e.textContent=t.toString(),t>0?(e.style.color="rgba(255, 204, 0, 0.9)",e.style.textShadow="0 0 5px rgba(255, 204, 0, 0.5)"):(e.style.color="rgba(120, 220, 232, 0.9)",e.style.textShadow="none")}updateHordeModeDisplay(){const e=document.getElementById("mobile-horde-indicator"),t=document.getElementById("mobile-horde-timer");if(!(!e||!t))if(window.game&&window.game.isHordeActive){if(e.style.display==="none"&&(e.style.display="block",e.innerHTML='<div style="text-align:center; color:#ff3030; font-weight:bold; margin-bottom:2px;">HORDE MODE</div>',e.appendChild(t)),window.game.getFormattedHordeSurvivalTime)t.textContent=window.game.getFormattedHordeSurvivalTime();else{const n=window.game.hordeSurvivalTime??0,o=Math.floor(n/1e3),i=Math.floor(o/60),a=o%60;t.textContent=`${i.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}if((window.game.hordeSurvivalTime??0)>3*60*1e3){const n=document.createElement("style");n.textContent=`
                    @keyframes pulse-horde-mobile {
                        0% { box-shadow: 0 0 5px rgba(255, 30, 30, 0.7); }
                        50% { box-shadow: 0 0 10px rgba(255, 30, 30, 1); }
                        100% { box-shadow: 0 0 5px rgba(255, 30, 30, 0.7); }
                    }
                `,document.head.appendChild(n),e.style.animation="pulse-horde-mobile 0.8s infinite",e.style.backgroundColor="rgba(255, 30, 30, 0.3)"}}else e.style.display="none"}hide(){const e=document.getElementById("mobile-hud-container");e&&(e.style.display="none")}show(){if(window.game&&window.game.introSequenceActive){console.log("MobileHUD: Not showing HUD during intro sequence");return}const e=document.getElementById("mobile-hud-container");e&&(e.style.display="block")}setControls(e){console.log("MobileHUD: Setting controls reference"),this.controls=e}updateLocation(e,t="Unknown System"){this.updateAnomalyCount()}}const G={float32:[],int32:[],uint32:[],uint16:[],uint8:[]},j={vectorPoolSize:0,objectPoolSizes:{},typedArrayPoolSizes:{},update(){var r,e;if(window.vectorPool&&(this.vectorPoolSize=window.vectorPool.pool.length),(e=(r=A)==null?void 0:r.registry)!=null&&e.typeToPool)for(const t of Array.from(A.registry.typeToPool.keys())){const n=A.registry.typeToPool.get(t);n&&(this.objectPoolSizes[t]=n.objects.length)}for(const t in G)this.typedArrayPoolSizes[t]=G[t].length},getReport(){this.update();let r=`Memory Pool Stats:
`;r+=`Vector Pool: ${this.vectorPoolSize} vectors
`,r+=`Object Pools:
`;for(const e in this.objectPoolSizes)r+=`  ${e}: ${this.objectPoolSizes[e]} objects
`;for(const e in this.typedArrayPoolSizes)r+=`  ${e}: ${this.typedArrayPoolSizes[e]} arrays
`;return r},logReport(){console.log(this.getReport())}};typeof window<"u"&&(window.MemoryStats=j);let m=null,k=null;function ie(){m||(m=document.createElement("div"),m.id="screen-flash-overlay",Object.assign(m.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",pointerEvents:"none",zIndex:"9999",opacity:"0",backgroundColor:"transparent",transition:"opacity 50ms ease-out"}),document.body.appendChild(m),ae(),console.log("Screen flash system initialized"))}function ae(){b.subscribe("player.damaged",e=>{const{damage:t,shieldDamage:n}=e.data;t>0?P("rgba(255, 0, 0, 0.3)",150):n>0&&P("rgba(0, 100, 255, 0.2)",100)});const r=()=>{P("rgba(255, 255, 255, 0.4)",100)};b.subscribe("vfx.explosion",r),b.subscribe("explosion",r),b.subscribe("player.levelup",()=>{P("rgba(255, 215, 0, 0.3)",500)})}function P(r,e=200){m&&(k&&(clearTimeout(k),k=null),m.style.transition="none",m.style.backgroundColor=r,m.style.opacity="1",m.offsetWidth,m.style.transition=`opacity ${e}ms ease-out`,m.style.opacity="0",k=window.setTimeout(()=>{m.style.backgroundColor="transparent",k=null},e))}let R=null,B=null;const z=[],T=[];let S=null;function se(r,e){R=r,B=e,!S&&(S=document.createElement("div"),S.id="damage-numbers-container",Object.assign(S.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",pointerEvents:"none",zIndex:"9998",fontSize:"20px",fontFamily:"Arial, sans-serif",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0, 0, 0, 0.8)"}),document.body.appendChild(S),re(),console.log("Damage numbers system initialized"))}function re(){b.subscribe("player.damaged",r=>{const{damage:e,shieldDamage:t,position:n}=r.data;e>0&&n&&M(n,e,"#FF4444"),t>0&&n&&M(n,t,"#4488FF")}),b.subscribe("enemy.damaged",r=>{const{damage:e,position:t}=r.data;e>0&&t&&M(t,e,"#FF4444")}),b.subscribe("entity.damaged",r=>{const{damage:e,damageType:t,position:n}=r.data;if(e>0&&n){let o="#FF4444";t==="shield"?o="#4488FF":t==="healing"&&(o="#44FF44"),M(n,e,o)}}),b.subscribe("player.healed",r=>{const{amount:e,position:t}=r.data;e>0&&t&&M(t,e,"#44FF44")})}function M(r,e,t){if(!R||!B||!S)return;let n;z.length>0?(n=z.pop(),n.element.style.display="block"):n=le(),n.position=r.clone(),n.value=e,n.color=t,n.lifetime=0,n.maxLifetime=1e3,n.element.textContent=`-${Math.round(e)}`,n.element.style.color=t,W(n),T.push(n)}function le(){const r=document.createElement("div");return Object.assign(r.style,{position:"fixed",whiteSpace:"nowrap",fontSize:"24px",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0, 0, 0, 0.9)",transform:"translateZ(0)",willChange:"transform, opacity"}),S.appendChild(r),{element:r,position:new $,value:0,lifetime:0,maxLifetime:1e3,color:"#FFFFFF"}}function W(r){if(!R||!B)return;const e=new $;e.copy(r.position),e.project(R);const t=B.domElement.clientWidth,n=B.domElement.clientHeight,o=(e.x*.5+.5)*t,i=(-e.y*.5+.5)*n,a=r.lifetime/r.maxLifetime,l=a*40,c=Math.max(.8,Math.min(1.5,r.value/50)),d=Math.max(0,1-a);r.element.style.transform=`translate(${o}px, ${i-l}px) scale(${c})`,r.element.style.opacity=String(d)}function de(r){if(T.length!==0)for(let e=T.length-1;e>=0;e--){const t=T[e];t.lifetime+=r,t.lifetime>=t.maxLifetime?(t.element.style.display="none",z.push(t),T.splice(e,1)):W(t)}}const L=6,ce=500,D=30,_=20,pe=150,he=300;let H=[],E=null,N=null,O=!1;function ue(){if(!O){E=document.createElement("div"),E.id="threat-indicators-container",Object.assign(E.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",pointerEvents:"none",zIndex:"1000"}),document.body.appendChild(E);for(let r=0;r<L;r++){const e=me();H.push({element:e,inUse:!1}),E.appendChild(e)}O=!0,console.log("[ThreatIndicators] Initialized with",L,"indicators")}}function me(){const r=document.createElement("div");return r.className="threat-arrow",Object.assign(r.style,{position:"absolute",width:`${D}px`,height:`${D}px`,borderLeft:"3px solid",borderBottom:"3px solid",borderColor:"white",opacity:"0",transition:"opacity 0.15s ease-out",pointerEvents:"none",transformOrigin:"center center"}),r}function ge(r){N=r}function ye(r,e){if(!O||!N||!E||e===-1)return;for(const d of H)d.inUse=!1,d.element.style.opacity="0";const t=f.x[e],n=f.y[e],o=f.z[e],i=[];for(const d of r){const g=f.x[d]-t,v=f.y[d]-n,I=f.z[d]-o,x=Math.sqrt(g*g+v*v+I*I);x>ce||i.push({eid:d,distance:x})}i.sort((d,g)=>d.distance-g.distance);let a=0;const l=window.innerWidth,c=window.innerHeight;for(const d of i){if(a>=L)break;const{eid:g,distance:v}=d,x=new $(f.x[g],f.y[g],f.z[g]).clone().project(N);if(!(Math.abs(x.x)>1||Math.abs(x.y)>1||x.z>1))continue;const C=H[a];if(!C)break;C.inUse=!0;const{screenX:V,screenY:Y,angle:X}=fe(x.x,x.y,l,c);C.element.style.left=`${V-D/2}px`,C.element.style.top=`${Y-D/2}px`,C.element.style.transform=`rotate(${X-45}deg)`;const q=be(v);C.element.style.borderColor=q,C.element.style.opacity="0.8",a++}}function fe(r,e,t,n){const o=_/t*2,i=_/n*2,a=Math.max(-1+o,Math.min(1-o,r)),l=Math.max(-1+i,Math.min(1-i,e)),c=(a+1)/2*t,d=(1-l)/2*n,g=t/2,v=n/2,I=Math.atan2(d-v,c-g)*(180/Math.PI);return{screenX:c,screenY:d,angle:I}}function be(r){return r<pe?"#ff3030":r<he?"#ffaa30":"#30ff30"}class Ie{constructor(e,t){p(this,"spaceship");p(this,"environment");p(this,"controls");p(this,"audio");p(this,"isMobile");p(this,"hud");p(this,"miningDisplay");p(this,"targetingUI");p(this,"stargateInterface");p(this,"gameOverScreen");p(this,"controlsMenu");p(this,"starMap");p(this,"blackjackGame",null);p(this,"settings",null);p(this,"startScreen",null);p(this,"statsInterval");p(this,"camera",null);p(this,"renderer",null);this.spaceship=e,this.environment=t,this.controls=null,this.audio=null,this.isMobile=U.isMobile(),console.log(`Initializing UI components for ${this.isMobile?"mobile":"desktop"} device...`),this.isMobile&&this.loadMobileCSS(),this.isMobile?this.hud=new oe(e):this.hud=new ne(e)}async initializeUIComponents(){var l,c;ie(),ue(),this.camera&&this.renderer&&se(this.camera,this.renderer);const{MiningDisplay:e}=await y(async()=>{const{MiningDisplay:d}=await import("./miningDisplay-qrCNkB-M.js");return{MiningDisplay:d}},[]);this.miningDisplay=new e;const{TargetingUI:t}=await y(async()=>{const{TargetingUI:d}=await import("./targetingUI-DljOVUld.js");return{TargetingUI:d}},[]);this.targetingUI=new t;const{StargateInterface:n}=await y(async()=>{const{StargateInterface:d}=await import("./stargateInterface-oDq5uNE_.js");return{StargateInterface:d}},__vite__mapDeps([0,1,2]));this.stargateInterface=new n;const{GameOverScreen:o}=await y(async()=>{const{GameOverScreen:d}=await import("./gameOverScreen-BN38I_7h.js");return{GameOverScreen:d}},__vite__mapDeps([3,4]));this.gameOverScreen=new o;const{ControlsMenu:i}=await y(async()=>{const{ControlsMenu:d}=await import("./controlsMenu-D3mudg7n.js");return{ControlsMenu:d}},[]);this.controlsMenu=new i;const{StarMap:a}=await y(async()=>{const{StarMap:d}=await import("./starMap-DErtprvI.js");return{StarMap:d}},__vite__mapDeps([5,1,2]));this.starMap=new a(this.environment.starSystemGenerator??null,null,this.stargateInterface),this.blackjackGame=null,this.settings=null,(c=(l=this.stargateInterface).setStarMap)==null||c.call(l,this.starMap),this.startScreen=null,J.enabled&&this.initializePerformanceMonitor(),console.log("UI components initialized")}loadMobileCSS(){const e=document.createElement("link");e.rel="stylesheet",e.href="css/mobile.css",e.type="text/css",document.head.appendChild(e),console.log("Mobile CSS loaded")}async setAudio(e){var t,n;if(console.log("Setting audio reference in UI"),this.audio=e,this.audio){this.spaceship&&!this.spaceship.cargo&&(this.spaceship.cargo={iron:0,gold:0,platinum:0},console.warn("UI: Created empty cargo object for spaceship"));const{BlackjackGame:o}=await y(async()=>{const{BlackjackGame:i}=await import("./blackjackGame-DXuUSgae.js");return{BlackjackGame:i}},__vite__mapDeps([6,1,2]));this.blackjackGame=new o(null,this.spaceship,this.audio),console.log("UI: Created BlackjackGame with spaceship:",this.spaceship),(n=(t=this.stargateInterface).setBlackjackGame)==null||n.call(t,this.blackjackGame)}}setControls(e){console.log("Setting controls reference in UI"),this.controls=e,this.miningDisplay.setControls&&this.miningDisplay.setControls(this.controls),this.isMobile&&this.hud&&this.hud.setControls&&this.hud.setControls(this.controls),this.starMap&&this.controls.dockingSystem&&(this.starMap.dockingSystem=this.controls.dockingSystem),this.setupEventHandlers()}setCameraAndRenderer(e,t){this.camera=e,this.renderer=t,ge(e)}async initializeSettings(e){var o,i;if(!e){console.error("Cannot initialize settings without game instance");return}const{Settings:t}=await y(async()=>{const{Settings:a}=await import("./settings-BHCPrtiN.js");return{Settings:a}},__vite__mapDeps([7,1,2]));this.settings=new t(e),(i=(o=this.stargateInterface).setSettings)==null||i.call(o,this.settings);const{StartScreen:n}=await y(async()=>{const{StartScreen:a}=await import("./startScreen-CgaiDBdS.js");return{StartScreen:a}},[]);this.startScreen=new n(e,this),console.log("Settings and StartScreen initialized with game instance")}setupEventHandlers(){var e;console.log("Setting up UI event handlers"),this.controlsMenu&&this.controlsMenu.setupButtonHandler&&this.controlsMenu.setupButtonHandler(),this.controls&&this.controls.setupStargateUIControls&&this.controls.setupStargateUIControls(),(e=b)==null||e.subscribe("ui.notification",this.handleNotification.bind(this)),window.addEventListener("resize",()=>{const t=this.isMobile;this.isMobile=U.isMobile(),t!==this.isMobile&&(console.log(`Device type changed from ${t?"mobile":"desktop"} to ${this.isMobile?"mobile":"desktop"}`),location.reload())})}handleNotification(e){if(e&&e.data){const t=e.data.message||"System notification",n=e.data.duration||3e3;this.showNotification(t,n)}}handleGameOver(e){}update(e=16){this.hud&&this.hud.update&&this.hud.update(),this.miningDisplay&&this.miningDisplay.update&&this.miningDisplay.update(),de(e);const t=Q(),n=ee();ye(t,n),this.isMobile&&this.controls&&this.controls.touchControls&&this.controls.touchControls.update()}updateLocation(e){let t="Unknown System";if(this.environment&&this.environment.starSystemGenerator){const n=this.environment.starSystemGenerator.getCurrentSystemData();t=n?n.name:"Unknown System"}this.hud&&this.hud.updateLocation&&this.hud.updateLocation(null,t)}updateCoordinates(e,t,n){this.hud&&this.hud.updateCoordinates&&this.hud.updateCoordinates(e,t,n)}updateFPS(e,t){if(this.hud&&this.hud.updateFPS&&(this.hud.updateFPS(e,t),this.settings&&this.settings.settings)){const n=document.getElementById("fps-display");n&&(n.style.display=this.settings.settings.showFPS?"block":"none")}}showNotification(e,t=3e3){const n=document.getElementById("notifications-area");if(!n)return;const o=document.createElement("div");o.className="notification",o.textContent=e,o.style.backgroundColor="rgba(6, 22, 31, 0.7)",o.style.backdropFilter="blur(5px)",o.style.color="rgba(120, 220, 232, 0.9)",o.style.padding="8px 15px",o.style.borderRadius="5px",o.style.marginBottom="10px",o.style.border="1px solid rgba(120, 220, 232, 0.3)",o.style.boxShadow="0 0 10px rgba(120, 220, 232, 0.2)",o.style.textAlign="center",o.style.opacity="0",o.style.transition="opacity 0.3s",n.appendChild(o),setTimeout(()=>{o.style.opacity="1"},10),setTimeout(()=>{o.style.opacity="0",setTimeout(()=>{o.parentNode&&o.parentNode.removeChild(o)},300)},t)}showGameOver(e,t){var n,o;if(console.log("Showing game over screen"),console.log("Resources data:",e),this.gameOverScreen&&this.gameOverScreen.show)document.getElementById("game-over-container")||(console.warn("Game over container not found in DOM, recreating"),(o=(n=this.gameOverScreen).setupGameOverScreen)==null||o.call(n)),this.audio&&(this.gameOverScreen.audio=this.audio),this.gameOverScreen.show(e,t);else{console.error("Game over screen not properly initialized");const i=document.createElement("div");i.id="fallback-overlay",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.backgroundColor="rgba(0, 0, 0, 0.8)",i.style.display="flex",i.style.justifyContent="center",i.style.alignItems="center",i.style.zIndex="9999";const a=t,l=typeof t=="string"?t:a&&a.data&&a.data.reason?a.data.reason:"Your ship was destroyed!",c=document.createElement("div");c.innerHTML=`
                <h1 style="color: #ff3030; font-size: 48px; margin-bottom: 20px;">GAME OVER</h1>
                <p style="color: #fff; font-size: 24px; margin-bottom: 30px;">${l}</p>
                <button id="restart-btn" style="padding: 15px 30px; background-color: #ff3030; color: #fff; border: none; 
                    font-size: 24px; cursor: pointer; border-radius: 5px;">RESTART GAME</button>
            `,i.appendChild(c),document.body.appendChild(i);const d=document.getElementById("restart-btn");d&&d.addEventListener("click",()=>{location.reload()})}this.hideUI()}hideUI(){if(console.log("Hiding UI elements"),window.game&&window.game.introSequenceActive){console.log("Intro sequence active - forcing ALL UI elements to be hidden"),[document.getElementById("hud-container"),document.getElementById("mobile-hud-container"),document.getElementById("pointer-lock-instructions"),document.getElementById("notifications-area")].forEach(n=>{n&&(n.style.display="none")}),document.querySelectorAll(".ui-panel, .panel, .hud-panel, .status-panel").forEach(n=>{n instanceof HTMLElement&&(n.style.display="none")});return}this.hud&&this.hud.hide&&this.hud.hide(),this.miningDisplay&&this.miningDisplay.hide&&this.miningDisplay.hide(),this.targetingUI&&this.targetingUI.hideLockOn&&this.targetingUI.hideLockOn(),this.targetingUI&&this.targetingUI.hideTargetInfo&&this.targetingUI.hideTargetInfo(),this.stargateInterface&&this.stargateInterface.hideDockingPrompt&&this.stargateInterface.hideDockingPrompt(),this.isMobile&&this.controls&&this.controls.touchControls&&this.controls.touchControls.hide()}showUI(){if(console.log("Showing UI elements"),window.game&&window.game.introSequenceActive){console.warn("showUI called while intro is still active - not showing UI elements");return}if(this.startScreen&&this.startScreen.isVisible){console.warn("showUI called while start screen is visible - not showing UI elements");return}if(this.hud&&this.hud.show&&(console.log("Calling hud.show()"),this.hud.show()),this.miningDisplay&&this.miningDisplay.show&&this.miningDisplay.show(),this.isMobile&&this.controls&&this.controls.touchControls&&this.controls.touchControls.show(),window.game&&window.game.introSequenceActive)return;console.log("Forcing all UI elements to be displayed");const e=document.getElementById("hud-container");e?(console.log("Setting hudContainer to display:block"),e.style.display="block",e.style.visibility="visible"):console.warn("HUD container not found - could not make visible");const t=document.getElementById("mobile-hud-container");t&&(t.style.display="block",t.style.visibility="visible");const n=document.getElementById("pointer-lock-instructions");n&&!document.pointerLockElement&&(n.style.display="block",n.style.visibility="visible");const o=document.getElementById("notifications-area");o&&(o.style.display="block",o.style.visibility="visible"),document.querySelectorAll(".ui-panel, .panel, .hud-panel, .status-panel").forEach(a=>{a instanceof HTMLElement&&(a.id!=="target-info"&&(a.style.display="block"),a.style.visibility="visible")})}initializePerformanceMonitor(){const e=document.createElement("div");e.id="performance-stats",e.style.position="fixed",e.style.bottom="10px",e.style.right="10px",e.style.backgroundColor="rgba(0, 0, 0, 0.7)",e.style.color="#0ff",e.style.padding="10px",e.style.fontFamily="monospace",e.style.fontSize="12px",e.style.borderRadius="4px",e.style.zIndex="1000",e.style.maxWidth="300px",e.style.maxHeight="200px",e.style.overflow="auto";const t=document.createElement("div");t.id="memory-stats",e.appendChild(t);const n=document.createElement("div");n.id="fps-counter",e.appendChild(n),document.body.appendChild(e),this.statsInterval=window.setInterval(()=>{t.innerHTML=j.getReport().replace(/\n/g,"<br>"),window.game&&window.game.currentFPS&&(n.innerHTML=`FPS: ${Math.round(window.game.currentFPS)}`)},1e3)}onDisabled(){this.statsInterval&&(clearInterval(this.statsInterval),this.statsInterval=void 0)}}export{Ie as UI};
//# sourceMappingURL=ui-DLX1Dt1V.js.map
