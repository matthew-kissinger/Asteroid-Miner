{"version":3,"mappings":"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","names":["ThreeImports.THREE","ThreeImports.OrbitControls","ThreeImports.GLTFLoader","ThreeImports.EffectComposer","ThreeImports.RenderPass","ThreeImports.UnrealBloomPass","ThreeImports.ShaderPass","ThreeImports.FXAAShader","ThreeImports.ColorCorrectionShader","ThreeImports.FilmShader","ThreeImports.VignetteShader","ThreeImports.WebGL","path","registry","getGlobalPoolRegistry","type","factory","initialSize","maxSize","_o","args","e","obj","createLoadingOverlay","overlay","text","barContainer","bar","loadingManager","_url","_itemsLoaded","_itemsTotal","itemsLoaded","itemsTotal","percent","__vitePreload","essentialTextures","textureLoader","tex"],"ignoreList":[],"sources":["../../src/main.ts"],"sourcesContent":["// Import all Three.js modules from our centralized import file\nimport * as ThreeImports from './three-imports.ts';\n\n// Make THREE extensible before adding properties\n// @ts-ignore - We are intentionally extending THREE on window\nwindow.THREE = Object.assign({}, ThreeImports.THREE);\n\n// Set up global THREE addon references that the original code expects\nwindow.THREE.OrbitControls = ThreeImports.OrbitControls;\nwindow.THREE.GLTFLoader = ThreeImports.GLTFLoader;\nwindow.THREE.EffectComposer = ThreeImports.EffectComposer;\nwindow.THREE.RenderPass = ThreeImports.RenderPass;\nwindow.THREE.UnrealBloomPass = ThreeImports.UnrealBloomPass;\nwindow.THREE.ShaderPass = ThreeImports.ShaderPass;\nwindow.THREE.FXAAShader = ThreeImports.FXAAShader;\nwindow.THREE.ColorCorrectionShader = ThreeImports.ColorCorrectionShader;\nwindow.THREE.FilmShader = ThreeImports.FilmShader;\nwindow.THREE.VignetteShader = ThreeImports.VignetteShader;\nwindow.THREE.WebGL = ThreeImports.WebGL;\n\n// Create a global compat layer for fixing module imports\nwindow.__vite_compat = {\n  resolveImport(path: string) {\n    // This will be used to help resolve imports in the original code\n    return path;\n  }\n};\n\n// @ts-ignore - js/modules might not be typed yet\nimport { getGlobalPoolRegistry } from '../js/modules/pooling/PoolRegistry.ts';\n\n// Initialize the global object pool early via PoolRegistry facade\nwindow.objectPool = (() => {\n  const registry = getGlobalPoolRegistry();\n  return {\n    createPool: function(type: string, factory: () => any, initialSize = 10, maxSize = 100) {\n      registry.register(type, { factory, reset: (_o: any)=>{}, preallocate: initialSize, maxSize });\n    },\n    get: function(type: string, ...args: any[]) {\n      try { return registry.get(type, ...args); } catch (e: any) { console.warn(e.message); return null; }\n    },\n    release: function(type: string, obj: any) { registry.release(type, obj); },\n    clearAllPools: function() { registry.clearAll(); },\n    clearPool: function(type: string) { registry.clear(type); }\n  };\n})();\n\n// ---------------- Asynchronous Asset Loading & Progress UI -----------------\n\ninterface LoadingOverlay {\n  overlay: HTMLDivElement;\n  text: HTMLDivElement;\n  bar: HTMLDivElement;\n}\n\n// Create and inject a basic loading overlay that will display progress to the user\nfunction createLoadingOverlay(): LoadingOverlay {\n  const overlay = document.createElement('div');\n  overlay.id = 'loading-overlay';\n  overlay.style.position = 'fixed';\n  overlay.style.top = '0';\n  overlay.style.left = '0';\n  overlay.style.width = '100%';\n  overlay.style.height = '100%';\n  overlay.style.display = 'flex';\n  overlay.style.flexDirection = 'column';\n  overlay.style.justifyContent = 'center';\n  overlay.style.alignItems = 'center';\n  overlay.style.background = 'radial-gradient(circle at center, #101020 0%, #000000 80%)';\n  overlay.style.zIndex = '10000';\n\n  const text = document.createElement('div');\n  text.id = 'loading-text';\n  text.style.fontFamily = 'Courier New, monospace';\n  text.style.fontSize = '24px';\n  text.style.color = '#30cfd0';\n  text.style.marginBottom = '20px';\n  text.textContent = 'Loading 0%';\n  overlay.appendChild(text);\n\n  const barContainer = document.createElement('div');\n  barContainer.style.width = '60%';\n  barContainer.style.maxWidth = '400px';\n  barContainer.style.height = '10px';\n  barContainer.style.border = '1px solid #30cfd0';\n  barContainer.style.borderRadius = '5px';\n  barContainer.style.overflow = 'hidden';\n\n  const bar = document.createElement('div');\n  bar.id = 'loading-bar';\n  bar.style.width = '0%';\n  bar.style.height = '100%';\n  bar.style.background = '#30cfd0';\n  bar.style.transition = 'width 0.2s ease-out';\n\n  barContainer.appendChild(bar);\n  overlay.appendChild(barContainer);\n\n  return { overlay, text, bar };\n}\n\n// Wait until the DOM is ready before injecting the overlay and kicking off pre-loading\ndocument.addEventListener('DOMContentLoaded', () => {\n  const { overlay, text, bar } = createLoadingOverlay();\n  document.body.appendChild(overlay);\n\n  // Reference to the shared loading manager (DefaultLoadingManager is used by all loaders by default)\n  const loadingManager = window.THREE.DefaultLoadingManager;\n\n  // Track loading progress and update UI\n  loadingManager.onStart = function (_url: string, _itemsLoaded: number, _itemsTotal: number) {\n  };\n\n  loadingManager.onProgress = function (_url: string, itemsLoaded: number, itemsTotal: number) {\n    const percent = Math.round((itemsLoaded / itemsTotal) * 100);\n    text.textContent = `Loading ${percent}%`;\n    bar.style.width = `${percent}%`;\n  };\n\n  loadingManager.onError = function (_url: string) {\n  };\n\n  // Once everything is loaded we fade out the overlay and launch the game\n  loadingManager.onLoad = async function () {\n    text.textContent = 'Initializingâ€¦';\n    bar.style.width = '100%';\n\n    // Small delay to let the user see 100%\n    setTimeout(async () => {\n      overlay.style.opacity = '0';\n      overlay.style.transition = 'opacity 0.5s ease-out';\n      setTimeout(() => overlay.remove(), 600);\n\n      // Dynamically import the main game module now that assets are ready\n      try {\n        // @ts-ignore\n        await import('js/main.ts');\n      } catch (err) {\n      }\n    }, 200);\n  };\n\n  // ---------------- Pre-load essential assets -----------------\n\n  // NOTE: These are assets required for the first visible scene (ship trail, sun lens flares, skybox, etc.)\n  const essentialTextures = [\n    './assets/2k_stars_milky_way.jpg',\n    'https://threejs.org/examples/textures/sprites/spark1.png',\n    'https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/textures/lensflare/lensflare0.png',\n    'https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/textures/lensflare/lensflare2.png',\n    'https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/textures/lensflare/lensflare3.png'\n  ];\n\n  const textureLoader = new window.THREE.TextureLoader(loadingManager);\n  essentialTextures.forEach((tex) => textureLoader.load(tex, () => {}));\n\n  // Pre-load enemy model (not strictly visible at start but avoids hitch later)\n  const gltfLoader = new window.THREE.GLTFLoader(loadingManager);\n  gltfLoader.load('assets/enemy.glb', () => {\n  });\n});\n\n// ---------------------------------------------------------------------------\n"],"file":"assets/index-EcocMYdO.js"}