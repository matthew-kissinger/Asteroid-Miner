{"version":3,"file":"customSystemCreator-CrsQgtpA.js","sources":["../../js/modules/utils/apiClient.ts","../../js/modules/ui/components/customSystem/styles.ts","../../js/modules/ui/components/customSystem/validation.ts","../../js/modules/ui/components/customSystem/systemData.ts","../../js/modules/ui/components/customSystem/formView.ts","../../js/modules/ui/components/customSystem/preview.ts","../../js/modules/ui/components/customSystem/eventHandlers.ts","../../js/modules/ui/components/customSystem/helpers.ts","../../js/modules/ui/customSystemCreator.ts"],"sourcesContent":["// apiClient.ts - Client for interacting with the skybox generation API\n\ntype RefreshCallback = (success: boolean) => void;\n\nexport class ApiClient {\n    private apiBaseUrl: string;\n    private token: string | null;\n    private tokenExpiry: string | null;\n    private clientId: string;\n    private isRefreshing: boolean;\n    private refreshCallbacks: RefreshCallback[];\n\n    constructor() {\n        // API configuration\n        this.apiBaseUrl = this.getApiBaseUrl();\n        \n        // In-memory token storage (no localStorage)\n        this.token = null;\n        this.tokenExpiry = null;\n        \n        // Default client ID\n        this.clientId = 'game_client';\n        \n        // For token refresh\n        this.isRefreshing = false;\n        this.refreshCallbacks = [];\n        \n        console.log(`API Client initialized with base URL: ${this.apiBaseUrl}`);\n    }\n    \n    // Get base URL from environment or use default\n    private getApiBaseUrl(): string {\n        // For local development\n        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n            return 'http://localhost:8001';\n        }\n        \n        // For production - Use the Heroku app URL\n        return 'https://aminer-skybox-generator-833fe937a945.herokuapp.com';\n    }\n    \n    // Check if token is valid and not expired\n    private hasValidToken(): boolean {\n        if (!this.token || !this.tokenExpiry) {\n            return false;\n        }\n        \n        const expiryTime = new Date(this.tokenExpiry).getTime();\n        const currentTime = new Date().getTime();\n        \n        // Consider token expired if less than 5 minutes remain\n        const fiveMinutesInMs = 5 * 60 * 1000;\n        return (expiryTime - currentTime) > fiveMinutesInMs;\n    }\n    \n    // Clear token from memory\n    private clearToken(): void {\n        this.token = null;\n        this.tokenExpiry = null;\n    }\n    \n    // Get a new token from the API\n    private async getToken(): Promise<boolean> {\n        // Prevent multiple simultaneous refresh attempts\n        if (this.isRefreshing) {\n            return new Promise((resolve) => {\n                this.refreshCallbacks.push((success) => resolve(success));\n            });\n        }\n        \n        this.isRefreshing = true;\n        \n        try {\n            const response = await fetch(`${this.apiBaseUrl}/token`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({ client_id: this.clientId })\n            });\n            \n            if (!response.ok) {\n                const errorData = await response.json();\n                const errorMessage = errorData.detail || 'Failed to get token';\n                console.error(`Token error (${response.status}): ${errorMessage}`);\n                \n                // Execute callbacks with failure\n                this.refreshCallbacks.forEach(cb => cb(false));\n                this.refreshCallbacks = [];\n                this.isRefreshing = false;\n                \n                throw new Error(errorMessage);\n            }\n            \n            interface TokenResponse {\n                access_token: string;\n            }\n            const data: TokenResponse = await response.json();\n            \n            // Save token in memory\n            this.token = data.access_token;\n            \n            // Set expiry (tokens are valid for 1 hour)\n            const expiryDate = new Date();\n            expiryDate.setHours(expiryDate.getHours() + 1);\n            this.tokenExpiry = expiryDate.toISOString();\n            \n            // Execute callbacks with success\n            this.refreshCallbacks.forEach(cb => cb(true));\n            this.refreshCallbacks = [];\n            this.isRefreshing = false;\n            \n            return true;\n        } catch (error: any) {\n            console.error('Error getting token:', error);\n            \n            // Execute callbacks with failure\n            this.refreshCallbacks.forEach(cb => cb(false));\n            this.refreshCallbacks = [];\n            this.isRefreshing = false;\n            \n            return false;\n        }\n    }\n    \n    // Handle API response errors\n    private async handleApiResponse(response: Response): Promise<boolean> {\n        if (response.status === 401) {\n            // Token has expired or is invalid\n            this.clearToken();\n            \n            // Try to get a new token and retry the request\n            const success = await this.getToken();\n            if (!success) {\n                throw new Error('Authentication failed. Please reload the application.');\n            }\n            \n            // Return false to indicate a retry is needed\n            return false;\n        }\n        \n        if (response.status === 429) {\n            // Rate limit exceeded\n            throw new Error('Rate limit exceeded. Please try again later.');\n        }\n        \n        if (!response.ok) {\n            const errorData = await response.json();\n            throw new Error(errorData.message || errorData.detail || `Error: ${response.status} ${response.statusText}`);\n        }\n        \n        // Return true to indicate success\n        return true;\n    }\n    \n    // Generate a skybox based on the system name and description\n    async generateSkybox(systemName: string, description: string): Promise<any> {\n        // Get a new token if current one is invalid\n        if (!this.hasValidToken()) {\n            const success = await this.getToken();\n            if (!success) {\n                throw new Error('Failed to authenticate with the API');\n            }\n        }\n        \n        // Make request to generate skybox\n        const response = await fetch(`${this.apiBaseUrl}/generate-skybox`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${this.token}`\n            },\n            body: JSON.stringify({\n                system_name: systemName,\n                skybox_description: description\n            })\n        });\n        \n        // Handle response errors\n        const isValid = await this.handleApiResponse(response);\n        if (!isValid) {\n            // Retry the request with the new token\n            return this.generateSkybox(systemName, description);\n        }\n        \n        return await response.json();\n    }\n    \n    // Generate a planet texture based on the planet name and description\n    async generatePlanet(planetName: string, description: string): Promise<any> {\n        // Get a new token if current one is invalid\n        if (!this.hasValidToken()) {\n            const success = await this.getToken();\n            if (!success) {\n                throw new Error('Failed to authenticate with the API');\n            }\n        }\n        \n        // Make request to generate planet\n        const response = await fetch(`${this.apiBaseUrl}/generate-planet`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${this.token}`\n            },\n            body: JSON.stringify({\n                planet_name: planetName,\n                planet_description: description\n            })\n        });\n        \n        // Handle response errors\n        const isValid = await this.handleApiResponse(response);\n        if (!isValid) {\n            // Retry the request with the new token\n            return this.generatePlanet(planetName, description);\n        }\n        \n        return await response.json();\n    }\n    \n    // Convert a relative image path to a full URL\n    getFullImageUrl(relativeUrl: string): string {\n        // If it's already a full URL, return as is\n        if (relativeUrl.startsWith('http')) {\n            return relativeUrl;\n        }\n        \n        // Remove leading slash if present\n        const cleanPath = relativeUrl.startsWith('/') ? relativeUrl.substring(1) : relativeUrl;\n        \n        // Get the API base URL\n        const baseUrl = this.apiBaseUrl;\n        \n        // Join with API base URL\n        return `${baseUrl}/${cleanPath}`;\n    }\n}","// styles.ts - CSS styles for the custom system creator\n\nexport class StyleManager {\n    isMobile: boolean;\n    stylesInjected: boolean;\n\n    constructor(isMobile: boolean = false) {\n        this.isMobile = isMobile;\n        this.stylesInjected = false;\n    }\n\n    injectStyles(): void {\n        if (this.stylesInjected) return;\n\n        this.injectBaseStyles();\n\n        if (this.isMobile) {\n            this.injectMobileStyles();\n        }\n\n        this.stylesInjected = true;\n    }\n\n    injectBaseStyles(): void {\n        if (!document.getElementById('custom-system-creator-styles')) {\n            const style = document.createElement('style');\n            style.id = 'custom-system-creator-styles';\n            style.textContent = `\n                .property-row {\n                    display: flex;\n                    align-items: center;\n                    margin-bottom: 10px;\n                }\n\n                .property-row label {\n                    flex: 0 0 150px;\n                    margin-right: 10px;\n                }\n\n                .property-row .slider {\n                    flex: 1;\n                    height: 10px;\n                    background: #2a2a2a;\n                    outline: none;\n                    border-radius: 5px;\n                }\n\n                .property-row .slider-value {\n                    flex: 0 0 60px;\n                    margin-left: 10px;\n                    text-align: right;\n                }\n\n                .planet-properties {\n                    background: rgba(0, 0, 0, 0.2);\n                    padding: 15px;\n                    border-radius: 5px;\n                    margin-top: 10px;\n                    margin-bottom: 15px;\n                }\n\n                .help-text {\n                    font-size: 12px;\n                    color: #aaa;\n                    margin-top: 5px;\n                }\n\n                select.form-control {\n                    width: 100%;\n                    padding: 8px;\n                    border-radius: 4px;\n                    background: #25303e;\n                    color: white;\n                    border: 1px solid #3a5472;\n                }\n\n                /* Active slider styles */\n                .slider-active {\n                    background: #3a5472 !important;\n                }\n\n                /* Add smooth transitions */\n                #custom-system-creator button {\n                    transition: all 0.2s ease;\n                }\n\n                #custom-system-creator button:active {\n                    transform: scale(0.95);\n                }\n\n                /* Modal open styles */\n                .modal-open {\n                    overflow: hidden;\n                    position: fixed;\n                    width: 100%;\n                    height: 100%;\n                }\n            `;\n            document.head.appendChild(style);\n        }\n    }\n\n    injectMobileStyles(): void {\n        if (!document.getElementById('custom-system-creator-mobile-styles')) {\n            const style = document.createElement('style');\n            style.id = 'custom-system-creator-mobile-styles';\n            style.innerHTML = `\n                @media (max-width: 900px) {\n                    /* Mobile-specific styles for CustomSystemCreator */\n                    #custom-system-creator .modal-content {\n                        border-radius: 10px;\n                        padding-bottom: 120px;\n                    }\n\n                    #custom-system-creator .form-group {\n                        margin-bottom: 24px;\n                    }\n\n                    #custom-system-creator label {\n                        font-size: 16px;\n                        margin-bottom: 10px;\n                        display: block;\n                    }\n\n                    #custom-system-creator .property-row {\n                        flex-direction: column;\n                        align-items: flex-start;\n                        margin-bottom: 20px;\n                    }\n\n                    #custom-system-creator .property-row label {\n                        margin-bottom: 10px;\n                        width: 100%;\n                    }\n\n                    #custom-system-creator .slider {\n                        width: 100%;\n                        margin: 10px 0;\n                    }\n\n                    #custom-system-creator .slider-value {\n                        margin-top: 5px;\n                        align-self: flex-end;\n                    }\n\n                    #custom-system-creator .planet-input {\n                        padding: 20px;\n                        margin-bottom: 30px;\n                    }\n\n                    #custom-system-creator input[type=\"text\"],\n                    #custom-system-creator textarea,\n                    #custom-system-creator select {\n                        font-size: 16px !important;\n                        padding: 14px !important;\n                    }\n\n                    #custom-system-creator .planet-preview {\n                        flex: 0 0 100%;\n                        margin-bottom: 15px;\n                    }\n\n                    #custom-system-creator .form-actions {\n                        text-align: center;\n                    }\n\n                    /* Better slider for touch */\n                    #custom-system-creator input[type=\"range\"] {\n                        -webkit-appearance: none;\n                        height: 30px;\n                        background: #0d1e2f;\n                        border-radius: 15px;\n                        padding: 0;\n                        outline: none;\n                    }\n\n                    #custom-system-creator input[type=\"range\"]::-webkit-slider-thumb {\n                        -webkit-appearance: none;\n                        width: 30px;\n                        height: 30px;\n                        border-radius: 50%;\n                        background: #4a9dff;\n                        cursor: pointer;\n                    }\n\n                    #custom-system-creator input[type=\"range\"]::-moz-range-thumb {\n                        width: 30px;\n                        height: 30px;\n                        border-radius: 50%;\n                        background: #4a9dff;\n                        cursor: pointer;\n                        border: none;\n                    }\n\n                    /* Touch ripple effect for buttons */\n                    .ripple {\n                        position: relative;\n                        overflow: hidden;\n                        transform: translate3d(0, 0, 0);\n                    }\n\n                    .ripple:after {\n                        content: \"\";\n                        display: block;\n                        position: absolute;\n                        width: 100%;\n                        height: 100%;\n                        top: 0;\n                        left: 0;\n                        pointer-events: none;\n                        background-image: radial-gradient(circle, #fff 10%, transparent 10.01%);\n                        background-repeat: no-repeat;\n                        background-position: 50%;\n                        transform: scale(10, 10);\n                        opacity: 0;\n                        transition: transform .5s, opacity 1s;\n                    }\n\n                    .ripple:active:after {\n                        transform: scale(0, 0);\n                        opacity: .3;\n                        transition: 0s;\n                    }\n\n                    /* Character counter for text areas */\n                    .char-counter {\n                        font-size: 12px;\n                        color: #aaa;\n                        text-align: right;\n                        margin-top: 5px;\n                    }\n\n                    .char-counter.warning {\n                        color: #ff9900;\n                    }\n\n                    .char-counter.error {\n                        color: #ff3030;\n                    }\n                }\n            `;\n            document.head.appendChild(style);\n        }\n    }\n\n    getMobileStyles(type?: string): Record<string, string> {\n        const styles: Record<string, string> = {\n            modalContent: this.isMobile ? 'width: 94%; max-height: 85vh; overflow-y: auto; -webkit-overflow-scrolling: touch; padding-bottom: 100px; overscroll-behavior: contain;' : '',\n            closeBtn: this.isMobile ? 'font-size: 28px; padding: 12px; min-height: 48px; min-width: 48px;' : '',\n            modalBody: this.isMobile ? 'padding-bottom: 150px;' : '',\n            input: this.isMobile ? 'font-size: 16px; padding: 14px; height: 48px;' : '',\n            textarea: this.isMobile ? 'font-size: 16px; padding: 14px;' : '',\n            select: this.isMobile ? 'font-size: 16px; padding: 14px; height: 48px;' : '',\n            slider: this.isMobile ? 'height: 30px; margin: 10px 0;' : '',\n            checkbox: this.isMobile ? 'transform: scale(1.7); margin: 0 15px; min-height: 24px; min-width: 24px;' : '',\n            checkboxRow: this.isMobile ? 'margin-top: 15px;' : '',\n            primaryBtn: this.isMobile ? 'min-height: 54px; padding: 16px; font-size: 18px; margin-top: 20px; width: 100%;' : '',\n            secondaryBtn: this.isMobile ? 'min-height: 50px; padding: 14px; font-size: 16px; width: 100%; margin: 15px 0;' : '',\n            removeBtn: this.isMobile ? 'min-height: 50px; padding: 14px; font-size: 16px; right: 15px; top: 15px;' : '',\n            previewContainer: this.isMobile ? 'flex-direction: column;' : '',\n            skyboxPreview: this.isMobile ? 'width: 100%; margin-bottom: 20px;' : '',\n            planetsPreview: this.isMobile ? 'width: 100%;' : '',\n            formActions: this.isMobile ? 'padding-bottom: 30px;' : ''\n        };\n\n        return type ? { [type]: styles[type] } : styles;\n    }\n\n    getTextareaRows(defaultRows: number): number {\n        return this.isMobile ? Math.max(2, defaultRows - 1) : defaultRows;\n    }\n\n    cleanup(): void {\n        const stylesToRemove = [\n            'custom-system-creator-styles',\n            'custom-system-creator-mobile-styles',\n            'modal-open-style'\n        ];\n\n        stylesToRemove.forEach(id => {\n            const style = document.getElementById(id);\n            if (style) {\n                style.remove();\n            }\n        });\n\n        this.stylesInjected = false;\n    }\n}\n","// validation.ts - Form validation, constraints, error handling\n\ntype ValidationResult = {\n    isValid: boolean;\n    message?: string;\n};\n\ntype PlanetDataCollectionResult = {\n    planets: {\n        name: string;\n        description: string;\n        size: number;\n        distance: number;\n        speed: number;\n        rings: boolean;\n    }[];\n    errors: string[];\n};\n\nexport class ValidationManager {\n    isMobile: boolean;\n\n    constructor(isMobile: boolean = false) {\n        this.isMobile = isMobile;\n    }\n\n    validateSystemForm(systemNameInput: HTMLInputElement, skyboxDescription: HTMLTextAreaElement): ValidationResult {\n        const systemName = systemNameInput.value.trim();\n        const skyboxDesc = skyboxDescription.value.trim();\n\n        if (!systemName) {\n            return { isValid: false, message: 'Please enter a system name.' };\n        }\n\n        if (!skyboxDesc) {\n            return { isValid: false, message: 'Please enter a skybox description.' };\n        }\n\n        if (systemName.length < 3) {\n            return { isValid: false, message: 'System name must be at least 3 characters long.' };\n        }\n\n        if (skyboxDesc.length < 10) {\n            return { isValid: false, message: 'Skybox description must be at least 10 characters long.' };\n        }\n\n        return { isValid: true };\n    }\n\n    validatePlanetData(planetDiv: HTMLElement, planetIndex: number): ValidationResult {\n        const nameInput = planetDiv.querySelector<HTMLInputElement>(`input[id^=\"planet-name-\"]`);\n        const descInput = planetDiv.querySelector<HTMLTextAreaElement>(`textarea[id^=\"planet-description-\"]`);\n\n        if (!nameInput || !descInput) {\n            return { isValid: false, message: `Planet ${planetIndex} is missing required fields.` };\n        }\n\n        const planetName = nameInput.value.trim();\n        const planetDesc = descInput.value.trim();\n\n        if (!planetName) {\n            return { isValid: false, message: `Please enter a name for Planet ${planetIndex}.` };\n        }\n\n        if (!planetDesc) {\n            return { isValid: false, message: `Please enter a description for Planet ${planetIndex}.` };\n        }\n\n        if (planetName.length < 2) {\n            return { isValid: false, message: `Planet ${planetIndex} name must be at least 2 characters long.` };\n        }\n\n        if (planetDesc.length < 5) {\n            return { isValid: false, message: `Planet ${planetIndex} description must be at least 5 characters long.` };\n        }\n\n        return { isValid: true };\n    }\n\n    collectPlanetData(planetInputs: HTMLCollectionOf<Element>): PlanetDataCollectionResult {\n        const planets: {\n            name: string;\n            description: string;\n            size: number;\n            distance: number;\n            speed: number;\n            rings: boolean;\n        }[] = [];\n        const errors: string[] = [];\n\n        for (let i = 0; i < planetInputs.length; i++) {\n            const planetDiv = planetInputs[i] as HTMLElement;\n            const planetIndex = i + 1;\n\n            const validation = this.validatePlanetData(planetDiv, planetIndex);\n            if (!validation.isValid) {\n                if (validation.message) {\n                    errors.push(validation.message);\n                }\n                continue;\n            }\n\n            const nameInput = planetDiv.querySelector<HTMLInputElement>(`input[id^=\"planet-name-\"]`);\n            const descInput = planetDiv.querySelector<HTMLTextAreaElement>(`textarea[id^=\"planet-description-\"]`);\n            const sizeInput = planetDiv.querySelector<HTMLInputElement>(`input[id^=\"planet-size-\"]`);\n            const distanceInput = planetDiv.querySelector<HTMLInputElement>(`input[id^=\"planet-distance-\"]`);\n            const speedInput = planetDiv.querySelector<HTMLInputElement>(`input[id^=\"planet-speed-\"]`);\n            const ringsInput = planetDiv.querySelector<HTMLInputElement>(`input[id^=\"planet-rings-\"]`);\n\n            if (!nameInput || !descInput || !sizeInput || !distanceInput || !speedInput || !ringsInput) {\n                errors.push(`Planet ${planetIndex} is missing required input fields.`);\n                continue;\n            }\n\n            // Calculate speed from slider (1-10 to 0.001-0.002)\n            const speedValue = parseFloat(speedInput.value);\n            const orbitSpeed = 0.001 + (speedValue - 1) * (0.001 / 9);\n\n            planets.push({\n                name: nameInput.value.trim(),\n                description: descInput.value.trim(),\n                size: parseInt(sizeInput.value),\n                distance: parseInt(distanceInput.value),\n                speed: orbitSpeed,\n                rings: ringsInput.checked\n            });\n        }\n\n        return { planets, errors };\n    }\n\n    addCharacterCounter(textarea: HTMLTextAreaElement, maxChars: number): void {\n        if (!textarea || !this.isMobile) return;\n\n        // Create counter element\n        const counter = document.createElement('div');\n        counter.className = 'char-counter';\n\n        // Update counter text\n        const updateCounter = (): void => {\n            const remaining = maxChars - textarea.value.length;\n            counter.textContent = `${remaining} characters remaining`;\n\n            // Change color based on remaining characters\n            counter.className = 'char-counter';\n            if (remaining < 30) {\n                counter.classList.add('warning');\n            }\n            if (remaining < 10) {\n                counter.classList.add('error');\n            }\n\n            // Enforce character limit\n            if (remaining < 0) {\n                textarea.value = textarea.value.substring(0, maxChars);\n                counter.textContent = '0 characters remaining';\n            }\n        };\n\n        // Add event listeners\n        textarea.addEventListener('input', updateCounter);\n        textarea.addEventListener('keydown', (e: KeyboardEvent) => {\n            // Allow deletion even at max characters\n            if (textarea.value.length >= maxChars &&\n                e.key !== 'Backspace' &&\n                e.key !== 'Delete' &&\n                e.key !== 'ArrowLeft' &&\n                e.key !== 'ArrowRight' &&\n                !e.ctrlKey &&\n                !e.metaKey) {\n                e.preventDefault();\n            }\n        });\n\n        // Set initial counter\n        updateCounter();\n\n        // Add counter after textarea\n        textarea.parentNode?.insertBefore(counter, textarea.nextSibling);\n\n        // Set maxlength attribute (fallback)\n        textarea.setAttribute('maxlength', maxChars.toString());\n    }\n\n    setupCharacterCounters(skyboxDescription: HTMLTextAreaElement, _planetDescriptions: HTMLElement): void {\n        if (!this.isMobile) return;\n\n        // Skybox description\n        this.addCharacterCounter(skyboxDescription, 250);\n\n        // Add counter to first planet and set up event listener for future planets\n        const firstPlanetDesc = document.getElementById('planet-description-1') as HTMLTextAreaElement | null;\n        if (firstPlanetDesc) {\n            this.addCharacterCounter(firstPlanetDesc, 150);\n        }\n    }\n\n    validatePlanetCount(planetInputs: HTMLCollectionOf<Element>): ValidationResult {\n        if (planetInputs.length === 0) {\n            return { isValid: false, message: 'Please add at least one planet to your system.' };\n        }\n\n        if (planetInputs.length > 8) {\n            return { isValid: false, message: 'Maximum of 8 planets allowed per system.' };\n        }\n\n        return { isValid: true };\n    }\n\n    showMobileAlert(message: string, playUISound: (() => void) | null = null): void {\n        if (this.isMobile) {\n            // Create a custom alert overlay for mobile\n            const alertOverlay = document.createElement('div');\n            alertOverlay.style.position = 'fixed';\n            alertOverlay.style.top = '0';\n            alertOverlay.style.left = '0';\n            alertOverlay.style.width = '100%';\n            alertOverlay.style.height = '100%';\n            alertOverlay.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';\n            alertOverlay.style.display = 'flex';\n            alertOverlay.style.justifyContent = 'center';\n            alertOverlay.style.alignItems = 'center';\n            alertOverlay.style.zIndex = '10000';\n\n            const alertBox = document.createElement('div');\n            alertBox.style.backgroundColor = '#0a1a2a';\n            alertBox.style.color = '#c5d8f1';\n            alertBox.style.padding = '20px';\n            alertBox.style.borderRadius = '10px';\n            alertBox.style.maxWidth = '80%';\n            alertBox.style.textAlign = 'center';\n            alertBox.style.border = '2px solid #2c5a8c';\n\n            const messageEl = document.createElement('p');\n            messageEl.textContent = message;\n            messageEl.style.marginBottom = '20px';\n            messageEl.style.fontSize = '16px';\n\n            const okButton = document.createElement('button');\n            okButton.textContent = 'OK';\n            okButton.style.padding = '12px 30px';\n            okButton.style.fontSize = '16px';\n            okButton.style.backgroundColor = '#2c5a8c';\n            okButton.style.color = 'white';\n            okButton.style.border = 'none';\n            okButton.style.borderRadius = '5px';\n            okButton.style.minHeight = '48px';\n            okButton.style.minWidth = '120px';\n\n            alertBox.appendChild(messageEl);\n            alertBox.appendChild(okButton);\n            alertOverlay.appendChild(alertBox);\n            document.body.appendChild(alertOverlay);\n\n            // Play sound if available\n            if (playUISound) {\n                playUISound();\n            }\n\n            // Handle button click and touch\n            okButton.addEventListener('click', () => {\n                document.body.removeChild(alertOverlay);\n            });\n\n            okButton.addEventListener('touchend', (e: TouchEvent) => {\n                e.preventDefault();\n                document.body.removeChild(alertOverlay);\n                if (playUISound) {\n                    playUISound();\n                }\n            });\n\n        } else {\n            // Fall back to regular alert for desktop\n            alert(message);\n        }\n    }\n}\n","// systemData.ts - System data structures, presets, configurations\n\ntype StarClass = {\n    value: string;\n    label: string;\n    color: number;\n    selected?: boolean;\n};\n\ntype PlanetDefaults = {\n    size: { min: number; max: number; default: number };\n    distance: { min: number; max: number; default: number };\n    speed: { min: number; max: number; default: number };\n    rings: boolean;\n};\n\ntype PlanetData = {\n    name: string;\n    textureUrl?: string | null;\n    description?: string;\n    size: number;\n    distance: number;\n    speed: number;\n    color: number;\n    rings: boolean;\n};\n\ntype SystemData = {\n    id: string;\n    name: string;\n    starClass: string;\n    classification: string;\n    description: string;\n    skyboxUrl: string;\n    lightIntensityMultiplier: number;\n    planetData: PlanetData[];\n};\n\ntype SystemPreset = {\n    name: string;\n    starClass: string;\n    skyboxDescription: string;\n    planets: {\n        name: string;\n        description: string;\n        size: number;\n        distance: number;\n        speed: number;\n        rings: boolean;\n    }[];\n};\n\ntype ValidationResult = {\n    isValid: boolean;\n    errors: string[];\n};\n\nexport class SystemDataManager {\n    starClasses: StarClass[];\n    planetDefaults: PlanetDefaults;\n\n    constructor() {\n        this.starClasses = this.getStarClasses();\n        this.planetDefaults = this.getPlanetDefaults();\n    }\n\n    getStarClasses(): StarClass[] {\n        return [\n            { value: 'O', label: 'O - Blue Giant (Hot, Blue)', color: 0x9bb0ff },\n            { value: 'B', label: 'B - Blue-White', color: 0xaabfff },\n            { value: 'A', label: 'A - White', color: 0xcad7ff },\n            { value: 'F', label: 'F - Yellow-White', color: 0xf8f7ff },\n            { value: 'G', label: 'G - Yellow (Sun-like)', color: 0xfff4ea, selected: true },\n            { value: 'K', label: 'K - Orange', color: 0xffd2a1 },\n            { value: 'M', label: 'M - Red Dwarf', color: 0xffcc6f }\n        ];\n    }\n\n    getPlanetDefaults(): PlanetDefaults {\n        return {\n            size: { min: 300, max: 1000, default: 450 },\n            distance: { min: 4000, max: 60000, default: 8000 },\n            speed: { min: 1, max: 10, default: 5 },\n            rings: false\n        };\n    }\n\n    getStarColorForClass(starClass: string): number {\n        const starClassData = this.starClasses.find(sc => sc.value === starClass);\n        return starClassData ? starClassData.color : 0xfff4ea; // Default to G-class if undefined\n    }\n\n    createSystemData(\n        systemName: string,\n        starClass: string,\n        skyboxUrl: string,\n        planets: { name: string; description?: string; textureUrl?: string | null; size: number; distance: number; speed: number; rings: boolean }[],\n        lightIntensityMultiplier: number = 0.8\n    ): SystemData {\n        return {\n            id: `Custom-${Date.now()}`,\n            name: systemName,\n            starClass: starClass,\n            classification: 'Custom',\n            description: `Custom star system with ${planets.length} planets`,\n            skyboxUrl: skyboxUrl,\n            lightIntensityMultiplier: lightIntensityMultiplier,\n            planetData: planets.map((planet) => {\n                return {\n                    name: planet.name,\n                    textureUrl: planet.textureUrl || null,\n                    size: planet.size,\n                    distance: planet.distance,\n                    speed: planet.speed,\n                    color: this.getStarColorForClass(starClass),\n                    rings: planet.rings\n                };\n            })\n        };\n    }\n\n    calculatePlanetDistance(planetIndex: number, baseDistance: number = 4000, increment: number = 6000): number {\n        return baseDistance + planetIndex * increment;\n    }\n\n    convertSpeedSliderToOrbitSpeed(sliderValue: number): number {\n        // Convert 1-10 range to 0.001-0.002 range\n        return 0.001 + (sliderValue - 1) * (0.001 / 9);\n    }\n\n    getDefaultPlanetData(planetIndex: number): {\n        name: string;\n        description: string;\n        size: number;\n        distance: number;\n        speed: number;\n        rings: boolean;\n    } {\n        return {\n            name: '',\n            description: '',\n            size: this.planetDefaults.size.default,\n            distance: this.calculatePlanetDistance(planetIndex),\n            speed: this.convertSpeedSliderToOrbitSpeed(this.planetDefaults.speed.default),\n            rings: this.planetDefaults.rings\n        };\n    }\n\n    getSystemPresets(): Record<string, SystemPreset> {\n        return {\n            solar: {\n                name: 'Sol System',\n                starClass: 'G',\n                skyboxDescription: 'Deep space with distant stars and nebulae',\n                planets: [\n                    {\n                        name: 'Mercury',\n                        description: 'A small, rocky planet closest to the star',\n                        size: 350,\n                        distance: 4000,\n                        speed: 0.002,\n                        rings: false\n                    },\n                    {\n                        name: 'Venus',\n                        description: 'A hot, cloudy planet with a thick atmosphere',\n                        size: 420,\n                        distance: 6000,\n                        speed: 0.0018,\n                        rings: false\n                    },\n                    {\n                        name: 'Earth',\n                        description: 'A blue planet with oceans and continents',\n                        size: 450,\n                        distance: 8000,\n                        speed: 0.0015,\n                        rings: false\n                    }\n                ]\n            },\n            binary: {\n                name: 'Binary System',\n                starClass: 'F',\n                skyboxDescription: 'A system with twin stars casting complex shadows',\n                planets: [\n                    {\n                        name: 'Proxima',\n                        description: 'A tidally locked world with extreme temperature differences',\n                        size: 380,\n                        distance: 12000,\n                        speed: 0.001,\n                        rings: false\n                    },\n                    {\n                        name: 'Gemini Prime',\n                        description: 'A large gas giant with spectacular ring systems',\n                        size: 800,\n                        distance: 25000,\n                        speed: 0.0008,\n                        rings: true\n                    }\n                ]\n            },\n            exotic: {\n                name: 'Exotic System',\n                starClass: 'O',\n                skyboxDescription: 'A violent nebula with intense radiation and stellar phenomena',\n                planets: [\n                    {\n                        name: 'Crystalline',\n                        description: 'A planet of living crystal formations and energy storms',\n                        size: 600,\n                        distance: 15000,\n                        speed: 0.0012,\n                        rings: true\n                    }\n                ]\n            }\n        };\n    }\n\n    validateSystemData(systemData: SystemData): ValidationResult {\n        const errors: string[] = [];\n\n        if (!systemData.name || systemData.name.trim().length < 3) {\n            errors.push('System name must be at least 3 characters long');\n        }\n\n        if (!systemData.starClass || !this.starClasses.find(sc => sc.value === systemData.starClass)) {\n            errors.push('Invalid star class selected');\n        }\n\n        if (!systemData.planetData || systemData.planetData.length === 0) {\n            errors.push('System must have at least one planet');\n        }\n\n        if (systemData.planetData && systemData.planetData.length > 8) {\n            errors.push('System cannot have more than 8 planets');\n        }\n\n        systemData.planetData?.forEach((planet, index) => {\n            if (!planet.name || planet.name.trim().length < 2) {\n                errors.push(`Planet ${index + 1} name must be at least 2 characters long`);\n            }\n\n            if (planet.size < this.planetDefaults.size.min || planet.size > this.planetDefaults.size.max) {\n                errors.push(`Planet ${index + 1} size must be between ${this.planetDefaults.size.min} and ${this.planetDefaults.size.max}`);\n            }\n\n            if (planet.distance < this.planetDefaults.distance.min || planet.distance > this.planetDefaults.distance.max) {\n                errors.push(`Planet ${index + 1} distance must be between ${this.planetDefaults.distance.min} and ${this.planetDefaults.distance.max}`);\n            }\n        });\n\n        return {\n            isValid: errors.length === 0,\n            errors: errors\n        };\n    }\n}\n","// formView.ts - Form creation, input fields, UI layout\n\nimport type { StyleManager } from './styles.ts';\nimport type { ValidationManager } from './validation.ts';\n\nexport class FormViewManager {\n    isMobile: boolean;\n    styleManager: StyleManager | null;\n    scrollTimeout: number | null;\n    validationManager: ValidationManager | null;\n\n    constructor(isMobile: boolean = false, styleManager: StyleManager | null = null) {\n        this.isMobile = isMobile;\n        this.styleManager = styleManager;\n        this.scrollTimeout = null;\n        this.validationManager = null;\n    }\n\n    createMainContainer(): HTMLDivElement {\n        const container = document.createElement('div');\n        container.id = 'custom-system-creator';\n        container.className = 'modal-container';\n        container.style.display = 'none';\n        return container;\n    }\n\n    createModalContent(): string {\n        const styles = this.styleManager?.getMobileStyles() || {};\n\n        return `\n            <div class=\"modal-content\" style=\"${styles.modalContent || ''}\">\n                <div class=\"modal-header\">\n                    <h2>Create New Star System</h2>\n                    <button id=\"close-system-creator\" class=\"close-btn\" style=\"${styles.closeBtn || ''}\">&times;</button>\n                </div>\n                <div class=\"modal-body\" style=\"${styles.modalBody || ''}\">\n                    <div id=\"system-creator-form\">\n                        ${this.createSystemForm()}\n                        ${this.createPlanetSection()}\n                        ${this.createFormActions()}\n                    </div>\n                    ${this.createProgressSection()}\n                    ${this.createPreviewSection()}\n                </div>\n            </div>\n        `;\n    }\n\n    createSystemForm(): string {\n        const styles = this.styleManager?.getMobileStyles() || {};\n\n        return `\n            <div class=\"form-group\">\n                <label for=\"system-name\">System Name:</label>\n                <input type=\"text\" id=\"system-name\" placeholder=\"Enter a name for your star system\" style=\"${styles.input || ''}\">\n            </div>\n\n            <div class=\"form-group\">\n                <label for=\"skybox-description\">Skybox Description:</label>\n                <textarea id=\"skybox-description\" rows=\"${this.styleManager?.getTextareaRows(4) || 4}\" placeholder=\"Describe the skybox/space environment (e.g., 'A vibrant nebula with blue and purple clouds, dotted with bright stars')\" style=\"${styles.textarea || ''}\"></textarea>\n            </div>\n\n            <div class=\"form-group\">\n                <label for=\"star-class\">Star Class:</label>\n                <select id=\"star-class\" class=\"form-control\" style=\"${styles.select || ''}\">\n                    <option value=\"O\">O - Blue Giant (Hot, Blue)</option>\n                    <option value=\"B\">B - Blue-White</option>\n                    <option value=\"A\">A - White</option>\n                    <option value=\"F\">F - Yellow-White</option>\n                    <option value=\"G\" selected>G - Yellow (Sun-like)</option>\n                    <option value=\"K\">K - Orange</option>\n                    <option value=\"M\">M - Red Dwarf</option>\n                </select>\n                <p class=\"help-text\">Different star classes affect the lighting and appearance of your system.</p>\n            </div>\n        `;\n    }\n\n    createPlanetSection(): string {\n        const styles = this.styleManager?.getMobileStyles() || {};\n\n        return `\n            <div id=\"planet-descriptions\">\n                <div class=\"form-group planet-input\">\n                    ${this.createPlanetForm(1, styles)}\n                </div>\n            </div>\n\n            <button id=\"add-planet-btn\" class=\"secondary-btn\" style=\"${styles.secondaryBtn || ''}\">+ Add Another Planet</button>\n        `;\n    }\n\n    createPlanetForm(index: number, styles: Record<string, string> = {}): string {\n        return `\n            <h3>Planet ${index}</h3>\n            <label for=\"planet-name-${index}\">Planet Name:</label>\n            <input type=\"text\" id=\"planet-name-${index}\" placeholder=\"Enter a name for this planet\" style=\"${styles.input || ''}\">\n\n            <label for=\"planet-description-${index}\">Planet Description:</label>\n            <textarea id=\"planet-description-${index}\" rows=\"${this.styleManager?.getTextareaRows(3) || 3}\" placeholder=\"Describe the planet (e.g., 'A rocky planet with large oceans and ice caps')\" style=\"${styles.textarea || ''}\" maxlength=\"150\"></textarea>\n\n            <div class=\"planet-properties\">\n                ${this.createPlanetSliders(index, styles)}\n                ${this.createPlanetRings(index, styles)}\n            </div>\n\n            ${index > 1 ? this.createRemoveButton(styles) : ''}\n        `;\n    }\n\n    createPlanetSliders(index: number, styles: Record<string, string> = {}): string {\n        return `\n            <div class=\"property-row\">\n                <label for=\"planet-size-${index}\">Size:</label>\n                <input type=\"range\" id=\"planet-size-${index}\" min=\"300\" max=\"1000\" value=\"450\" class=\"slider\" style=\"${styles.slider || ''}\">\n                <span class=\"slider-value\" id=\"planet-size-value-${index}\">450</span>\n            </div>\n\n            <div class=\"property-row\">\n                <label for=\"planet-distance-${index}\">Distance from Star:</label>\n                <input type=\"range\" id=\"planet-distance-${index}\" min=\"4000\" max=\"60000\" value=\"${4000 + index * 6000}\" class=\"slider\" style=\"${styles.slider || ''}\">\n                <span class=\"slider-value\" id=\"planet-distance-value-${index}\">${4000 + index * 6000}</span>\n            </div>\n\n            <div class=\"property-row\">\n                <label for=\"planet-speed-${index}\">Orbit Speed:</label>\n                <input type=\"range\" id=\"planet-speed-${index}\" min=\"1\" max=\"10\" value=\"5\" class=\"slider\" style=\"${styles.slider || ''}\">\n                <span class=\"slider-value\" id=\"planet-speed-value-${index}\">0.0015</span>\n            </div>\n        `;\n    }\n\n    createPlanetRings(index: number, styles: Record<string, string> = {}): string {\n        return `\n            <div class=\"property-row\" style=\"${styles.checkboxRow || ''}\">\n                <label for=\"planet-rings-${index}\">Has Rings:</label>\n                <input type=\"checkbox\" id=\"planet-rings-${index}\" style=\"${styles.checkbox || ''}\">\n            </div>\n        `;\n    }\n\n    createRemoveButton(styles: Record<string, string> = {}): string {\n        const rippleClass = this.isMobile ? 'ripple' : '';\n        return `<button class=\"remove-planet-btn danger-btn ${rippleClass}\" style=\"${styles.removeBtn || ''}\">Remove</button>`;\n    }\n\n    createFormActions(): string {\n        const styles = this.styleManager?.getMobileStyles() || {};\n\n        return `\n            <div class=\"form-actions\">\n                <button id=\"generate-system-btn\" class=\"primary-btn\" style=\"${styles.primaryBtn || ''}\">Generate System</button>\n            </div>\n        `;\n    }\n\n    createProgressSection(): string {\n        return `\n            <div id=\"generation-progress\" style=\"display: none;\">\n                <h3>Generating your star system...</h3>\n                <div class=\"progress-bar\">\n                    <div class=\"progress-fill\"></div>\n                </div>\n                <p id=\"generation-status\">Initializing...</p>\n            </div>\n        `;\n    }\n\n    createPreviewSection(): string {\n        const styles = this.styleManager?.getMobileStyles() || {};\n\n        return `\n            <div id=\"system-preview\" style=\"display: none;\">\n                <h3>Preview</h3>\n                <div class=\"preview-container\" style=\"${styles.previewContainer || ''}\">\n                    <div class=\"skybox-preview\" style=\"${styles.skyboxPreview || ''}\">\n                        <h4>Skybox</h4>\n                        <img id=\"skybox-preview-img\" src=\"\" alt=\"Skybox Preview\">\n                    </div>\n                    <div class=\"planets-preview\" id=\"planets-preview\" style=\"${styles.planetsPreview || ''}\">\n                        <!-- Planet previews will be added here dynamically -->\n                    </div>\n                </div>\n                <div class=\"form-actions\" style=\"${styles.formActions || ''}\">\n                    <button id=\"travel-to-system-btn\" class=\"primary-btn\" style=\"${styles.primaryBtn || ''}\">Travel to System</button>\n                    <button id=\"regenerate-system-btn\" class=\"secondary-btn\" style=\"${styles.secondaryBtn || ''}\">Regenerate</button>\n                </div>\n            </div>\n        `;\n    }\n\n    addPlanetInput(\n        planetDescriptions: HTMLElement,\n        setupSliderListeners: (index: number) => void,\n        updatePlanetNumbers: () => void,\n        playUISound: (() => void) | null\n    ): HTMLDivElement {\n        const planetInputs = planetDescriptions.getElementsByClassName('planet-input');\n        const newIndex = planetInputs.length + 1;\n        const styles = this.styleManager?.getMobileStyles() || {};\n\n        const planetDiv = document.createElement('div');\n        planetDiv.className = 'form-group planet-input';\n        planetDiv.innerHTML = this.createPlanetForm(newIndex, styles);\n\n        planetDescriptions.appendChild(planetDiv);\n\n        // Set up event listeners for the sliders\n        setupSliderListeners(newIndex);\n\n        // Add event listener to remove button\n        const removeBtn = planetDiv.querySelector<HTMLButtonElement>('.remove-planet-btn');\n        if (removeBtn) {\n            this.setupRemoveButton(removeBtn, planetDiv, updatePlanetNumbers, playUISound);\n        }\n\n        // Add mobile-specific enhancements\n        if (this.isMobile) {\n            this.enhanceMobileInteraction(planetDiv);\n        }\n\n        // Scroll to new planet on mobile\n        this.scrollToNewPlanet(planetDescriptions);\n\n        return planetDiv;\n    }\n\n    setupRemoveButton(\n        removeBtn: HTMLButtonElement,\n        planetDiv: HTMLElement,\n        updatePlanetNumbers: () => void,\n        playUISound: (() => void) | null\n    ): void {\n        const removeHandler = (e?: Event): void => {\n            if (e) e.preventDefault();\n            planetDiv.remove();\n            updatePlanetNumbers();\n            if (playUISound) playUISound();\n        };\n\n        removeBtn.addEventListener('click', removeHandler);\n\n        if (this.isMobile) {\n            removeBtn.addEventListener('touchend', removeHandler as EventListener);\n        }\n    }\n\n    enhanceMobileInteraction(planetDiv: HTMLElement): void {\n        // Add touch events to sliders for better mobile interaction\n        const sliders = planetDiv.querySelectorAll<HTMLInputElement>('input[type=\"range\"]');\n        sliders.forEach(slider => {\n            slider.addEventListener('touchstart', () => {\n                slider.classList.add('slider-active');\n            });\n\n            slider.addEventListener('touchend', () => {\n                slider.classList.remove('slider-active');\n            });\n        });\n\n        // Add character counter to planet description\n        const planetDesc = planetDiv.querySelector<HTMLTextAreaElement>(`textarea[id^=\"planet-description-\"]`);\n        if (planetDesc && this.validationManager) {\n            this.validationManager.addCharacterCounter(planetDesc, 150);\n        }\n    }\n\n    scrollToNewPlanet(planetDescriptions: HTMLElement): void {\n        if (!this.isMobile) return;\n\n        // Clear any existing scroll timeout\n        if (this.scrollTimeout) {\n            clearTimeout(this.scrollTimeout);\n        }\n\n        // Use a safer scrolling approach\n        this.scrollTimeout = setTimeout(() => {\n            try {\n                const modalContent = document.querySelector<HTMLElement>('#custom-system-creator .modal-content');\n                const newPlanet = planetDescriptions.lastElementChild as HTMLElement | null;\n\n                if (modalContent && newPlanet) {\n                    const planetPos = newPlanet.offsetTop;\n                    const scrollPos = planetPos - (modalContent.clientHeight / 4);\n\n                    modalContent.scrollTo({\n                        top: scrollPos,\n                        behavior: 'smooth'\n                    });\n                }\n            } catch (err) {\n                console.warn('Error during scroll:', err);\n            }\n        }, 100);\n    }\n\n    updatePlanetNumbers(planetDescriptions: HTMLElement): void {\n        const planetInputs = planetDescriptions.getElementsByClassName('planet-input');\n        for (let i = 0; i < planetInputs.length; i++) {\n            const planetDiv = planetInputs[i];\n            const planetHeader = planetDiv.querySelector('h3');\n            if (planetHeader) {\n                planetHeader.textContent = `Planet ${i + 1}`;\n            }\n        }\n    }\n\n    addRippleEffect(container: HTMLElement): void {\n        if (!this.isMobile) return;\n\n        const buttons = container.querySelectorAll('button');\n        buttons.forEach(button => {\n            if (!button.classList.contains('ripple')) {\n                button.classList.add('ripple');\n            }\n        });\n    }\n\n    setupSliderListeners(index: number): void {\n        // Size slider\n        const sizeSlider = document.getElementById(`planet-size-${index}`) as HTMLInputElement | null;\n        const sizeValue = document.getElementById(`planet-size-value-${index}`);\n\n        if (sizeSlider && sizeValue) {\n            sizeSlider.addEventListener('input', () => {\n                sizeValue.textContent = sizeSlider.value;\n            });\n        }\n\n        // Distance slider\n        const distanceSlider = document.getElementById(`planet-distance-${index}`) as HTMLInputElement | null;\n        const distanceValue = document.getElementById(`planet-distance-value-${index}`);\n\n        if (distanceSlider && distanceValue) {\n            distanceSlider.addEventListener('input', () => {\n                distanceValue.textContent = distanceSlider.value;\n            });\n        }\n\n        // Speed slider\n        const speedSlider = document.getElementById(`planet-speed-${index}`) as HTMLInputElement | null;\n        const speedValue = document.getElementById(`planet-speed-value-${index}`);\n\n        if (speedSlider && speedValue) {\n            speedSlider.addEventListener('input', () => {\n                // Convert 1-10 range to 0.001-0.002 range\n                const speed = 0.001 + (parseFloat(speedSlider.value) - 1) * (0.001 / 9);\n                speedValue.textContent = speed.toFixed(4);\n            });\n        }\n\n        // Add mobile visual feedback\n        if (this.isMobile) {\n            const sliders = [sizeSlider, distanceSlider, speedSlider].filter((s): s is HTMLInputElement => s !== null);\n            sliders.forEach(slider => {\n                slider.addEventListener('touchstart', () => {\n                    slider.classList.add('slider-active');\n                });\n\n                slider.addEventListener('touchend', () => {\n                    slider.classList.remove('slider-active');\n                });\n            });\n        }\n    }\n\n    cleanup(): void {\n        if (this.scrollTimeout) {\n            clearTimeout(this.scrollTimeout);\n            this.scrollTimeout = null;\n        }\n    }\n}\n","// preview.ts - System preview rendering and visualization\n\nimport type { ApiClient } from '../../../utils/apiClient.ts';\n\ntype GeneratedPlanetPreview = {\n    name: string;\n    url: string | null;\n};\n\nexport class PreviewManager {\n    isMobile: boolean;\n\n    constructor(isMobile: boolean = false) {\n        this.isMobile = isMobile;\n    }\n\n    showSystemPreview(\n        generatedSkyboxUrl: string | null,\n        generatedPlanetUrls: GeneratedPlanetPreview[],\n        apiClient: ApiClient | null\n    ): void {\n        this.updateSkyboxPreview(generatedSkyboxUrl, apiClient);\n        this.updatePlanetPreviews(generatedPlanetUrls, apiClient);\n        this.showPreviewUI();\n    }\n\n    updateSkyboxPreview(skyboxUrl: string | null, apiClient: ApiClient | null): void {\n        const skyboxPreviewImg = document.getElementById('skybox-preview-img') as HTMLImageElement | null;\n        if (skyboxPreviewImg && skyboxUrl && apiClient) {\n            skyboxPreviewImg.src = apiClient.getFullImageUrl(skyboxUrl);\n        }\n    }\n\n    updatePlanetPreviews(planetUrls: GeneratedPlanetPreview[], apiClient: ApiClient | null): void {\n        const planetsPreview = document.getElementById('planets-preview');\n        if (!planetsPreview) return;\n\n        planetsPreview.innerHTML = '';\n\n        if (!planetUrls || !Array.isArray(planetUrls)) return;\n\n        planetUrls.forEach(planet => {\n            const planetDiv = document.createElement('div');\n            planetDiv.className = 'planet-preview';\n\n            const planetImageSrc = apiClient && planet.url ?\n                apiClient.getFullImageUrl(planet.url) :\n                planet.url || '';\n\n            planetDiv.innerHTML = `\n                <h4>${planet.name || 'Unknown Planet'}</h4>\n                <img src=\"${planetImageSrc}\" alt=\"${planet.name || 'Planet'}\" loading=\"lazy\">\n            `;\n\n            planetsPreview.appendChild(planetDiv);\n        });\n    }\n\n    showPreviewUI(): void {\n        const generationProgress = document.getElementById('generation-progress');\n        const systemPreview = document.getElementById('system-preview');\n\n        if (generationProgress) {\n            generationProgress.style.display = 'none';\n        }\n\n        if (systemPreview) {\n            systemPreview.style.display = 'block';\n        }\n\n        // If on mobile, scroll to top of preview\n        if (this.isMobile) {\n            setTimeout(() => {\n                if (systemPreview) {\n                    systemPreview.scrollIntoView({ behavior: 'smooth', block: 'start' });\n                }\n            }, 50);\n        }\n    }\n\n    hidePreview(): void {\n        const systemPreview = document.getElementById('system-preview');\n        const systemForm = document.getElementById('system-creator-form');\n\n        if (systemPreview) {\n            systemPreview.style.display = 'none';\n        }\n\n        if (systemForm) {\n            systemForm.style.display = 'block';\n        }\n    }\n\n    showProgress(message: string = 'Initializing...'): void {\n        const systemForm = document.getElementById('system-creator-form');\n        const generationProgress = document.getElementById('generation-progress');\n        const generationStatus = document.getElementById('generation-status');\n\n        if (systemForm) {\n            systemForm.style.display = 'none';\n        }\n\n        if (generationProgress) {\n            generationProgress.style.display = 'block';\n        }\n\n        if (generationStatus) {\n            generationStatus.textContent = message;\n        }\n    }\n\n    hideProgress(): void {\n        const generationProgress = document.getElementById('generation-progress');\n        const systemForm = document.getElementById('system-creator-form');\n\n        if (generationProgress) {\n            generationProgress.style.display = 'none';\n        }\n\n        if (systemForm) {\n            systemForm.style.display = 'block';\n        }\n    }\n\n    updateGenerationStatus(message: string): void {\n        const generationStatus = document.getElementById('generation-status');\n        if (generationStatus) {\n            generationStatus.textContent = message;\n            console.log('Generation status:', message);\n        }\n    }\n\n    createPlanetPreviewElement(planet: GeneratedPlanetPreview, apiClient: ApiClient | null): HTMLDivElement {\n        const planetDiv = document.createElement('div');\n        planetDiv.className = 'planet-preview';\n\n        const imageUrl = apiClient && planet.url ?\n            apiClient.getFullImageUrl(planet.url) :\n            planet.url || '';\n\n        // Add error handling for image loading\n        const img = document.createElement('img');\n        img.src = imageUrl;\n        img.alt = planet.name || 'Planet';\n        img.loading = 'lazy';\n\n        img.onerror = (): void => {\n            img.style.display = 'none';\n            const errorMsg = document.createElement('div');\n            errorMsg.className = 'image-error';\n            errorMsg.textContent = 'Image failed to load';\n            errorMsg.style.padding = '20px';\n            errorMsg.style.textAlign = 'center';\n            errorMsg.style.color = '#999';\n            planetDiv.appendChild(errorMsg);\n        };\n\n        const title = document.createElement('h4');\n        title.textContent = planet.name || 'Unknown Planet';\n\n        planetDiv.appendChild(title);\n        planetDiv.appendChild(img);\n\n        return planetDiv;\n    }\n\n    clearPreviews(): void {\n        const skyboxPreviewImg = document.getElementById('skybox-preview-img') as HTMLImageElement | null;\n        const planetsPreview = document.getElementById('planets-preview');\n\n        if (skyboxPreviewImg) {\n            skyboxPreviewImg.src = '';\n        }\n\n        if (planetsPreview) {\n            planetsPreview.innerHTML = '';\n        }\n    }\n\n    isPreviewVisible(): boolean {\n        const systemPreview = document.getElementById('system-preview');\n        return systemPreview !== null && systemPreview.style.display !== 'none';\n    }\n\n    isProgressVisible(): boolean {\n        const generationProgress = document.getElementById('generation-progress');\n        return generationProgress !== null && generationProgress.style.display !== 'none';\n    }\n\n    resetToForm(): void {\n        this.hidePreview();\n        this.hideProgress();\n        this.clearPreviews();\n    }\n}\n","// eventHandlers.ts - Form events, button clicks, interactions\n\nimport type { CustomSystemCreator } from '../../customSystemCreator.ts';\nimport type { FormViewManager } from './formView.ts';\nimport type { ValidationManager } from './validation.ts';\n\ntype EventHandler = (e?: Event) => void;\n\ninterface ElementRefs {\n    closeBtn: HTMLButtonElement;\n    addPlanetBtn: HTMLButtonElement;\n    generateSystemBtn: HTMLButtonElement;\n    travelToSystemBtn: HTMLButtonElement;\n    regenerateSystemBtn: HTMLButtonElement;\n    systemForm: HTMLDivElement;\n    systemPreview: HTMLDivElement;\n    systemNameInput: HTMLInputElement;\n    skyboxDescription: HTMLTextAreaElement;\n}\n\nexport class EventHandlerManager {\n    customSystemCreator: CustomSystemCreator;\n    isMobile: boolean;\n    handlers: Map<string | Element, EventHandler | Map<string, EventHandler>>;\n\n    constructor(customSystemCreator: CustomSystemCreator, isMobile: boolean = false) {\n        this.customSystemCreator = customSystemCreator;\n        this.isMobile = isMobile;\n        this.handlers = new Map();\n    }\n\n    setupAllEventHandlers(container: HTMLElement, elements: ElementRefs): void {\n        this.setupCloseHandlers(elements.closeBtn);\n        this.setupFormHandlers(elements);\n        this.setupKeyboardHandlers();\n        this.setupContainerHandlers(container);\n\n        if (this.isMobile) {\n            this.setupMobileHandlers(container, elements);\n        }\n    }\n\n    setupCloseHandlers(closeBtn: HTMLButtonElement): void {\n        const closeHandler: EventHandler = (e?: Event) => {\n            if (e) e.preventDefault();\n            this.customSystemCreator.hide();\n            this.customSystemCreator.playUISound();\n        };\n\n        closeBtn.addEventListener('click', closeHandler);\n\n        if (this.isMobile) {\n            closeBtn.addEventListener('touchend', closeHandler as EventListener);\n        }\n    }\n\n    setupFormHandlers(elements: ElementRefs): void {\n        // Add Planet button\n        const addPlanetHandler: EventHandler = (e?: Event) => {\n            if (e) e.preventDefault();\n            this.customSystemCreator.addPlanetInput();\n            this.customSystemCreator.playUISound();\n        };\n\n        elements.addPlanetBtn.addEventListener('click', addPlanetHandler);\n\n        if (this.isMobile) {\n            elements.addPlanetBtn.addEventListener('touchend', addPlanetHandler as EventListener);\n        }\n\n        // Generate System button\n        const generateHandler: EventHandler = (e?: Event) => {\n            if (e) e.preventDefault();\n            this.customSystemCreator.generateSystem();\n            this.customSystemCreator.playUISound();\n        };\n\n        elements.generateSystemBtn.addEventListener('click', generateHandler);\n\n        if (this.isMobile) {\n            elements.generateSystemBtn.addEventListener('touchend', generateHandler as EventListener);\n        }\n\n        // Travel to System button\n        const travelHandler: EventHandler = (e?: Event) => {\n            if (e) e.preventDefault();\n            this.customSystemCreator.travelToSystem();\n            this.customSystemCreator.playUISound();\n        };\n\n        elements.travelToSystemBtn.addEventListener('click', travelHandler);\n\n        if (this.isMobile) {\n            elements.travelToSystemBtn.addEventListener('touchend', travelHandler as EventListener);\n        }\n\n        // Regenerate button\n        const regenerateHandler: EventHandler = (e?: Event) => {\n            if (e) e.preventDefault();\n            elements.systemPreview.style.display = 'none';\n            elements.systemForm.style.display = 'block';\n            this.customSystemCreator.playUISound();\n        };\n\n        elements.regenerateSystemBtn.addEventListener('click', regenerateHandler);\n\n        if (this.isMobile) {\n            elements.regenerateSystemBtn.addEventListener('touchend', regenerateHandler as EventListener);\n        }\n    }\n\n    setupKeyboardHandlers(): void {\n        const escapeHandler = (e: KeyboardEvent): void => {\n            if (e.key === 'Escape' && this.customSystemCreator.isVisible) {\n                this.customSystemCreator.hide();\n            }\n        };\n\n        document.addEventListener('keydown', escapeHandler);\n        this.handlers.set('escape', escapeHandler as EventHandler);\n    }\n\n    setupContainerHandlers(container: HTMLElement): void {\n        // Click outside to close\n        const clickOutsideHandler = (e: MouseEvent): void => {\n            if (e.target === container) {\n                this.customSystemCreator.hide();\n            }\n        };\n\n        container.addEventListener('click', clickOutsideHandler);\n        this.handlers.set('clickOutside', clickOutsideHandler as EventHandler);\n    }\n\n    setupMobileHandlers(container: HTMLElement, _elements: ElementRefs): void {\n        // Touch start on container to close (mobile)\n        const touchCloseHandler = (e: TouchEvent): void => {\n            if (e.target === container) {\n                e.preventDefault();\n                this.customSystemCreator.hide();\n            }\n        };\n\n        container.addEventListener('touchstart', touchCloseHandler, { passive: false });\n        this.handlers.set('touchClose', touchCloseHandler as EventHandler);\n\n        // Improve scroll handling\n        container.addEventListener('touchmove', (e: TouchEvent) => {\n            e.stopPropagation();\n        }, { passive: true });\n\n        // Improve scroll performance\n        const modalContent = container.querySelector('.modal-content');\n        if (modalContent) {\n            modalContent.addEventListener('touchstart', () => {}, { passive: true });\n            modalContent.addEventListener('touchmove', () => {}, { passive: true });\n        }\n\n        // Add body scroll prevention\n        this.setupBodyScrollPrevention();\n    }\n\n    setupBodyScrollPrevention(): void {\n        const preventScroll = (e: TouchEvent): void => {\n            if (this.customSystemCreator.isVisible) {\n                e.preventDefault();\n            }\n        };\n\n        document.body.addEventListener('touchmove', preventScroll, { passive: false });\n        this.handlers.set('preventScroll', preventScroll as EventHandler);\n    }\n\n    setupSliderHandlers(index: number, formViewManager: FormViewManager | null): void {\n        if (formViewManager && typeof formViewManager.setupSliderListeners === 'function') {\n            formViewManager.setupSliderListeners(index);\n        }\n    }\n\n    setupRemoveButtonHandler(\n        removeBtn: HTMLButtonElement,\n        planetDiv: HTMLElement,\n        updatePlanetNumbers: () => void\n    ): void {\n        const removeHandler: EventHandler = (e?: Event) => {\n            if (e) e.preventDefault();\n            planetDiv.remove();\n            updatePlanetNumbers();\n            this.customSystemCreator.playUISound();\n        };\n\n        removeBtn.addEventListener('click', removeHandler);\n\n        if (this.isMobile) {\n            removeBtn.addEventListener('touchend', removeHandler as EventListener);\n\n            // Add touch feedback for sliders in this planet\n            const sliders = planetDiv.querySelectorAll<HTMLInputElement>('input[type=\"range\"]');\n            sliders.forEach(slider => {\n                slider.addEventListener('touchstart', () => {\n                    slider.classList.add('slider-active');\n                });\n\n                slider.addEventListener('touchend', () => {\n                    slider.classList.remove('slider-active');\n                });\n            });\n        }\n    }\n\n    addDynamicEventHandlers(element: Element, handlers: Record<string, EventListener> = {}): void {\n        Object.entries(handlers).forEach(([event, handler]) => {\n            if (typeof handler === 'function') {\n                element.addEventListener(event, handler);\n\n                // Store handler for cleanup\n                if (!this.handlers.has(element)) {\n                    this.handlers.set(element, new Map());\n                }\n                const elementHandlers = this.handlers.get(element) as Map<string, EventHandler>;\n                elementHandlers.set(event, handler as EventHandler);\n            }\n        });\n    }\n\n    removeDynamicEventHandlers(element: Element): void {\n        if (this.handlers.has(element)) {\n            const elementHandlers = this.handlers.get(element) as Map<string, EventHandler>;\n            elementHandlers.forEach((handler, event) => {\n                element.removeEventListener(event, handler as EventListener);\n            });\n            this.handlers.delete(element);\n        }\n    }\n\n    cleanup(): void {\n        // Remove all registered event handlers\n        this.handlers.forEach((handler, key) => {\n            if (typeof key === 'string') {\n                // Global handlers like escape key\n                switch (key) {\n                    case 'escape':\n                        document.removeEventListener('keydown', handler as EventListener);\n                        break;\n                    case 'preventScroll':\n                        document.body.removeEventListener('touchmove', handler as EventListener);\n                        break;\n                }\n            } else if (key instanceof Element) {\n                // Element-specific handlers\n                if (handler instanceof Map) {\n                    handler.forEach((handlerFunc, event) => {\n                        key.removeEventListener(event, handlerFunc as EventListener);\n                    });\n                } else {\n                    // Single handler\n                    key.removeEventListener('click', handler as EventListener);\n                    key.removeEventListener('touchend', handler as EventListener);\n                    key.removeEventListener('touchstart', handler as EventListener);\n                    key.removeEventListener('touchmove', handler as EventListener);\n                }\n            }\n        });\n\n        this.handlers.clear();\n    }\n\n    // Utility method to add mobile-friendly event listeners\n    addMobileFriendlyListener(\n        element: Element,\n        eventType: string,\n        handler: EventListener,\n        options: AddEventListenerOptions = {}\n    ): EventListener {\n        const wrappedHandler = (e: Event): void => {\n            if (this.isMobile && e.type === 'touchend') {\n                e.preventDefault();\n            }\n            handler(e);\n        };\n\n        element.addEventListener(eventType, wrappedHandler, options);\n\n        if (this.isMobile && eventType === 'click') {\n            element.addEventListener('touchend', wrappedHandler, options);\n        }\n\n        // Store for cleanup\n        if (!this.handlers.has(element)) {\n            this.handlers.set(element, new Map());\n        }\n        const elementHandlers = this.handlers.get(element) as Map<string, EventHandler>;\n        elementHandlers.set(eventType, wrappedHandler as EventHandler);\n\n        return wrappedHandler;\n    }\n\n    // Method to handle form validation events\n    setupValidationHandlers(elements: ElementRefs, validationManager: ValidationManager | null): void {\n        if (!validationManager) return;\n\n        // Real-time validation for system name\n        elements.systemNameInput.addEventListener('blur', () => {\n            const validation = validationManager.validateSystemForm(\n                elements.systemNameInput,\n                elements.skyboxDescription\n            );\n\n            if (!validation.isValid && elements.systemNameInput.value.trim()) {\n                this.showFieldError(elements.systemNameInput, validation.message || '');\n            } else {\n                this.clearFieldError(elements.systemNameInput);\n            }\n        });\n\n        // Real-time validation for skybox description\n        elements.skyboxDescription.addEventListener('blur', () => {\n            const validation = validationManager.validateSystemForm(\n                elements.systemNameInput,\n                elements.skyboxDescription\n            );\n\n            if (!validation.isValid && elements.skyboxDescription.value.trim()) {\n                this.showFieldError(elements.skyboxDescription, validation.message || '');\n            } else {\n                this.clearFieldError(elements.skyboxDescription);\n            }\n        });\n    }\n\n    showFieldError(field: HTMLInputElement | HTMLTextAreaElement, message: string): void {\n        this.clearFieldError(field);\n\n        const errorDiv = document.createElement('div');\n        errorDiv.className = 'field-error';\n        errorDiv.textContent = message;\n        errorDiv.style.color = '#ff3030';\n        errorDiv.style.fontSize = '12px';\n        errorDiv.style.marginTop = '5px';\n\n        field.parentNode?.insertBefore(errorDiv, field.nextSibling);\n        field.style.borderColor = '#ff3030';\n    }\n\n    clearFieldError(field: HTMLInputElement | HTMLTextAreaElement): void {\n        const existingError = field.parentNode?.querySelector('.field-error');\n        if (existingError) {\n            existingError.remove();\n        }\n        field.style.borderColor = '';\n    }\n}\n","// helpers.ts - Utility functions and data formatting\n\nexport class HelperManager {\n    scrollTimeout: number | null;\n\n    constructor() {\n        this.scrollTimeout = null;\n    }\n\n    detectMobile(): boolean {\n        return ('ontouchstart' in window) ||\n               (navigator.maxTouchPoints > 0) ||\n               ((navigator as any).msMaxTouchPoints > 0) ||\n               (window.innerWidth < 900);\n    }\n\n    playUISound(): void {\n        // Play UI sound if audio is available\n        if (window.game && window.game.audio) {\n            window.game.audio.playSound('boink');\n        }\n    }\n\n    formatSliderValue(value: number, type: string = 'default'): string {\n        switch (type) {\n            case 'speed':\n                // Convert 1-10 range to 0.001-0.002 range\n                const speed = 0.001 + (value - 1) * (0.001 / 9);\n                return speed.toFixed(4);\n            case 'size':\n            case 'distance':\n                return parseInt(value.toString()).toString();\n            default:\n                return value.toString();\n        }\n    }\n\n    calculateDefaultDistance(planetIndex: number, baseDistance: number = 4000, increment: number = 6000): number {\n        return baseDistance + planetIndex * increment;\n    }\n\n    convertSpeedSliderValue(sliderValue: number): number {\n        // Convert 1-10 range to 0.001-0.002 range\n        return 0.001 + (sliderValue - 1) * (0.001 / 9);\n    }\n\n    cleanupScrolling(): void {\n        if (this.scrollTimeout) {\n            clearTimeout(this.scrollTimeout);\n            this.scrollTimeout = null;\n        }\n    }\n\n    safeScrollTo(element: HTMLElement | null, options: ScrollIntoViewOptions = {}): void {\n        if (!element) return;\n\n        this.cleanupScrolling();\n\n        this.scrollTimeout = setTimeout(() => {\n            try {\n                if (typeof element.scrollIntoView === 'function') {\n                    element.scrollIntoView({\n                        behavior: 'smooth',\n                        block: 'start',\n                        ...options\n                    });\n                }\n            } catch (err) {\n                console.warn('Error during scroll:', err);\n            }\n        }, 100);\n    }\n\n    generateUniqueId(prefix: string = 'custom'): string {\n        return `${prefix}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n    }\n\n    debounce<T extends (...args: any[]) => any>(\n        func: T,\n        wait: number,\n        immediate: boolean = false\n    ): (...args: Parameters<T>) => void {\n        let timeout: number | null;\n        return function executedFunction(...args: Parameters<T>): void {\n            const later = (): void => {\n                timeout = null;\n                if (!immediate) func(...args);\n            };\n            const callNow = immediate && !timeout;\n            if (timeout) clearTimeout(timeout);\n            timeout = setTimeout(later, wait);\n            if (callNow) func(...args);\n        };\n    }\n\n    throttle<T extends (...args: any[]) => any>(func: T, limit: number): (...args: Parameters<T>) => void {\n        let inThrottle: boolean;\n        return function(...args: Parameters<T>): void {\n            if (!inThrottle) {\n                func(...args);\n                inThrottle = true;\n                setTimeout(() => inThrottle = false, limit);\n            }\n        };\n    }\n\n    sanitizeInput(input: string | any, maxLength: number | null = null): string {\n        if (typeof input !== 'string') return '';\n\n        let sanitized = input.trim();\n\n        if (maxLength && sanitized.length > maxLength) {\n            sanitized = sanitized.substring(0, maxLength);\n        }\n\n        return sanitized;\n    }\n\n    validateURL(url: string): boolean {\n        try {\n            new URL(url);\n            return true;\n        } catch {\n            return false;\n        }\n    }\n\n    formatFileSize(bytes: number): string {\n        if (bytes === 0) return '0 Bytes';\n\n        const k = 1024;\n        const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    }\n\n    deepClone<T>(obj: T): T {\n        if (obj === null || typeof obj !== 'object') return obj;\n        if (obj instanceof Date) return new Date(obj.getTime()) as T;\n        if (obj instanceof Array) return obj.map(item => this.deepClone(item)) as T;\n        if (typeof obj === 'object') {\n            const clonedObj: any = {};\n            Object.keys(obj).forEach(key => {\n                clonedObj[key] = this.deepClone((obj as any)[key]);\n            });\n            return clonedObj as T;\n        }\n        return obj;\n    }\n\n    createElement(\n        tag: string,\n        className: string = '',\n        content: string = '',\n        attributes: Record<string, string> = {}\n    ): HTMLElement {\n        const element = document.createElement(tag);\n\n        if (className) {\n            element.className = className;\n        }\n\n        if (content) {\n            element.textContent = content;\n        }\n\n        Object.entries(attributes).forEach(([key, value]) => {\n            element.setAttribute(key, value);\n        });\n\n        return element;\n    }\n\n    removeElement(element: HTMLElement | null): void {\n        if (element && element.parentNode) {\n            element.parentNode.removeChild(element);\n        }\n    }\n\n    findElementById(id: string, container: Document | HTMLElement = document): HTMLElement | null {\n        if ('getElementById' in container && container.getElementById) {\n            return container.getElementById(id);\n        }\n        return container.querySelector(`#${id}`);\n    }\n\n    findElementsByClass(className: string, container: Document | HTMLElement = document): HTMLElement[] {\n        if ('getElementsByClassName' in container && container.getElementsByClassName) {\n            return Array.from(container.getElementsByClassName(className)) as HTMLElement[];\n        }\n        return Array.from(container.querySelectorAll(`.${className}`));\n    }\n\n    addEventListenerSafe(\n        element: HTMLElement | null,\n        event: string,\n        handler: EventListener,\n        options: AddEventListenerOptions = {}\n    ): boolean {\n        if (element && typeof element.addEventListener === 'function') {\n            element.addEventListener(event, handler, options);\n            return true;\n        }\n        return false;\n    }\n\n    removeEventListenerSafe(\n        element: HTMLElement | null,\n        event: string,\n        handler: EventListener,\n        options: EventListenerOptions = {}\n    ): boolean {\n        if (element && typeof element.removeEventListener === 'function') {\n            element.removeEventListener(event, handler, options);\n            return true;\n        }\n        return false;\n    }\n\n    getElementDimensions(element: HTMLElement | null): {\n        width: number;\n        height: number;\n        top: number;\n        left: number;\n        bottom: number;\n        right: number;\n    } {\n        if (!element) return { width: 0, height: 0, top: 0, left: 0, bottom: 0, right: 0 };\n\n        const rect = element.getBoundingClientRect();\n        return {\n            width: rect.width,\n            height: rect.height,\n            top: rect.top,\n            left: rect.left,\n            bottom: rect.bottom,\n            right: rect.right\n        };\n    }\n\n    isElementVisible(element: HTMLElement | null): boolean {\n        if (!element) return false;\n\n        const style = window.getComputedStyle(element);\n        return style.display !== 'none' &&\n               style.visibility !== 'hidden' &&\n               style.opacity !== '0';\n    }\n\n    scrollToTop(container: HTMLElement | null, smooth: boolean = true): void {\n        if (!container) return;\n\n        if (smooth && container.scrollTo) {\n            container.scrollTo({\n                top: 0,\n                behavior: 'smooth'\n            });\n        } else {\n            container.scrollTop = 0;\n        }\n    }\n\n    addClassSafe(element: HTMLElement | null, className: string): void {\n        if (element && element.classList) {\n            element.classList.add(className);\n        }\n    }\n\n    removeClassSafe(element: HTMLElement | null, className: string): void {\n        if (element && element.classList) {\n            element.classList.remove(className);\n        }\n    }\n\n    toggleClassSafe(element: HTMLElement | null, className: string): void {\n        if (element && element.classList) {\n            element.classList.toggle(className);\n        }\n    }\n\n    hasClassSafe(element: HTMLElement | null, className: string): boolean {\n        return element !== null && element.classList !== undefined && element.classList.contains(className);\n    }\n\n    setStyleSafe(element: HTMLElement | null, property: string, value: string): void {\n        if (element && element.style) {\n            (element.style as any)[property] = value;\n        }\n    }\n\n    getStyleSafe(element: HTMLElement | null, property: string): string | null {\n        if (element && element.style) {\n            return (element.style as any)[property];\n        }\n        return null;\n    }\n\n    forceReflow(element: HTMLElement | null): void {\n        if (element) {\n            void element.offsetHeight; // Force reflow\n        }\n    }\n\n    waitForElement(selector: string, timeout: number = 5000): Promise<Element> {\n        return new Promise((resolve, reject) => {\n            const element = document.querySelector(selector);\n            if (element) {\n                resolve(element);\n                return;\n            }\n\n            const observer = new MutationObserver((_mutations, obs) => {\n                const element = document.querySelector(selector);\n                if (element) {\n                    obs.disconnect();\n                    resolve(element);\n                }\n            });\n\n            observer.observe(document.body, {\n                childList: true,\n                subtree: true\n            });\n\n            setTimeout(() => {\n                observer.disconnect();\n                reject(new Error(`Element ${selector} not found within ${timeout}ms`));\n            }, timeout);\n        });\n    }\n\n    async waitFor(condition: () => boolean, timeout: number = 5000, interval: number = 100): Promise<boolean> {\n        const startTime = Date.now();\n\n        while (Date.now() - startTime < timeout) {\n            if (condition()) {\n                return true;\n            }\n            await new Promise(resolve => setTimeout(resolve, interval));\n        }\n\n        throw new Error('Condition not met within timeout');\n    }\n\n    cleanup(): void {\n        this.cleanupScrolling();\n    }\n}\n","// customSystemCreator.js - Refactored UI for creating custom star systems with AI-generated assets\n\nimport { ApiClient } from '../utils/apiClient.ts';\nimport { StyleManager } from './components/customSystem/styles.ts';\nimport { ValidationManager } from './components/customSystem/validation.ts';\nimport { SystemDataManager } from './components/customSystem/systemData.ts';\nimport { FormViewManager } from './components/customSystem/formView.ts';\nimport { PreviewManager } from './components/customSystem/preview.ts';\nimport { EventHandlerManager } from './components/customSystem/eventHandlers.ts';\nimport { HelperManager } from './components/customSystem/helpers.ts';\n\ntype ApiImageResponse = {\n    success: boolean;\n    image_paths?: string[];\n    message?: string;\n};\n\ntype GeneratedPlanetPreview = {\n    name: string;\n    url: string | null;\n};\n\ntype CustomSystemData = {\n    id: string;\n    [key: string]: unknown;\n};\n\ntype StarSystemGenerator = any;\n\ntype EnvironmentForCustomSystem = {\n    travelToSystem?: (systemId: string) => void;\n};\n\nexport class CustomSystemCreator {\n    starSystemGenerator: StarSystemGenerator | null;\n    environment: EnvironmentForCustomSystem | null;\n    apiClient: ApiClient;\n    isVisible: boolean;\n    isGenerating: boolean;\n    generatedSkyboxUrl: string | null;\n    generatedPlanetUrls: GeneratedPlanetPreview[];\n    systemData: CustomSystemData | null;\n    helpers: HelperManager;\n    isMobile: boolean;\n    styleManager: StyleManager;\n    validationManager: ValidationManager;\n    systemDataManager: SystemDataManager;\n    formViewManager: FormViewManager;\n    previewManager: PreviewManager;\n    eventHandlerManager: EventHandlerManager;\n    container: HTMLDivElement | null;\n    systemNameInput: HTMLInputElement | null;\n    skyboxDescription: HTMLTextAreaElement | null;\n    planetDescriptions: HTMLDivElement | null;\n    addPlanetBtn: HTMLButtonElement | null;\n    generateSystemBtn: HTMLButtonElement | null;\n    generationProgress: HTMLDivElement | null;\n    generationStatus: HTMLParagraphElement | null;\n    systemForm: HTMLDivElement | null;\n    systemPreview: HTMLDivElement | null;\n    skyboxPreviewImg: HTMLImageElement | null;\n    planetsPreview: HTMLDivElement | null;\n    travelToSystemBtn: HTMLButtonElement | null;\n    regenerateSystemBtn: HTMLButtonElement | null;\n    closeBtn: HTMLButtonElement | null;\n\n    constructor(starSystemGenerator: StarSystemGenerator | null, environment: EnvironmentForCustomSystem | null) {\n        this.starSystemGenerator = starSystemGenerator;\n        this.environment = environment;\n        this.apiClient = new ApiClient();\n        this.isVisible = false;\n        this.isGenerating = false;\n        this.generatedSkyboxUrl = null;\n        this.generatedPlanetUrls = [];\n        this.systemData = null;\n        \n        // Initialize helper utilities\n        this.helpers = new HelperManager();\n        this.isMobile = this.helpers.detectMobile();\n        \n        // Initialize managers\n        this.styleManager = new StyleManager(this.isMobile);\n        this.validationManager = new ValidationManager(this.isMobile);\n        this.systemDataManager = new SystemDataManager();\n        this.formViewManager = new FormViewManager(this.isMobile, this.styleManager as unknown as null);\n        this.previewManager = new PreviewManager(this.isMobile);\n        this.eventHandlerManager = new EventHandlerManager(this, this.isMobile);\n        \n        // Initialize UI\n        this.container = null;\n        this.systemNameInput = null;\n        this.skyboxDescription = null;\n        this.planetDescriptions = null;\n        this.addPlanetBtn = null;\n        this.generateSystemBtn = null;\n        this.generationProgress = null;\n        this.generationStatus = null;\n        this.systemForm = null;\n        this.systemPreview = null;\n        this.skyboxPreviewImg = null;\n        this.planetsPreview = null;\n        this.travelToSystemBtn = null;\n        this.regenerateSystemBtn = null;\n        this.closeBtn = null;\n\n        this.createUI();\n        this.setupEventHandlers();\n        this.setupSliderListeners(1);\n    }\n    \n    createUI(): void {\n        // Inject styles\n        this.styleManager.injectStyles();\n        \n        // Create main container\n        const container = this.formViewManager.createMainContainer();\n        container.innerHTML = this.formViewManager.createModalContent();\n        this.container = container;\n        \n        // Add to document\n        document.body.appendChild(container);\n        \n        // Capture references to elements\n        this.captureElementReferences();\n        \n        // Add mobile enhancements\n        if (this.isMobile) {\n            this.setupMobileEnhancements();\n        }\n    }\n    \n    captureElementReferences(): void {\n        this.systemNameInput = document.getElementById('system-name') as HTMLInputElement | null;\n        this.skyboxDescription = document.getElementById('skybox-description') as HTMLTextAreaElement | null;\n        this.planetDescriptions = document.getElementById('planet-descriptions') as HTMLDivElement | null;\n        this.addPlanetBtn = document.getElementById('add-planet-btn') as HTMLButtonElement | null;\n        this.generateSystemBtn = document.getElementById('generate-system-btn') as HTMLButtonElement | null;\n        this.generationProgress = document.getElementById('generation-progress') as HTMLDivElement | null;\n        this.generationStatus = document.getElementById('generation-status') as HTMLParagraphElement | null;\n        this.systemForm = document.getElementById('system-creator-form') as HTMLDivElement | null;\n        this.systemPreview = document.getElementById('system-preview') as HTMLDivElement | null;\n        this.skyboxPreviewImg = document.getElementById('skybox-preview-img') as HTMLImageElement | null;\n        this.planetsPreview = document.getElementById('planets-preview') as HTMLDivElement | null;\n        this.travelToSystemBtn = document.getElementById('travel-to-system-btn') as HTMLButtonElement | null;\n        this.regenerateSystemBtn = document.getElementById('regenerate-system-btn') as HTMLButtonElement | null;\n        this.closeBtn = document.getElementById('close-system-creator') as HTMLButtonElement | null;\n    }\n    \n    setupMobileEnhancements(): void {\n        if (this.container) {\n            this.formViewManager.addRippleEffect(this.container);\n        }\n        if (this.skyboxDescription && this.planetDescriptions) {\n            this.validationManager.setupCharacterCounters(this.skyboxDescription, this.planetDescriptions);\n        }\n    }\n    \n    setupEventHandlers(): void {\n        if (!this.container || !this.closeBtn || !this.addPlanetBtn || !this.generateSystemBtn || \n            !this.travelToSystemBtn || !this.regenerateSystemBtn || !this.systemForm || \n            !this.systemPreview || !this.systemNameInput || !this.skyboxDescription) {\n            return;\n        }\n        \n        const elements = {\n            closeBtn: this.closeBtn,\n            addPlanetBtn: this.addPlanetBtn,\n            generateSystemBtn: this.generateSystemBtn,\n            travelToSystemBtn: this.travelToSystemBtn,\n            regenerateSystemBtn: this.regenerateSystemBtn,\n            systemForm: this.systemForm,\n            systemPreview: this.systemPreview,\n            systemNameInput: this.systemNameInput,\n            skyboxDescription: this.skyboxDescription\n        };\n        \n        this.eventHandlerManager.setupAllEventHandlers(this.container, elements);\n        this.eventHandlerManager.setupValidationHandlers(elements, this.validationManager);\n    }\n    \n    addPlanetInput(): void {\n        if (!this.planetDescriptions) return;\n        \n        const planetDiv = this.formViewManager.addPlanetInput(\n            this.planetDescriptions,\n            this.setupSliderListeners.bind(this),\n            this.updatePlanetNumbers.bind(this),\n            this.playUISound.bind(this)\n        );\n        \n        // Add character counter for new planet description if mobile\n        if (this.isMobile) {\n            const planetDesc = planetDiv.querySelector<HTMLTextAreaElement>(`textarea[id^=\"planet-description-\"]`);\n            if (planetDesc) {\n                this.validationManager.addCharacterCounter(planetDesc, 150);\n            }\n        }\n    }\n    \n    setupSliderListeners(index: number): void {\n        this.formViewManager.setupSliderListeners(index);\n    }\n    \n    updatePlanetNumbers(): void {\n        if (!this.planetDescriptions) return;\n        this.formViewManager.updatePlanetNumbers(this.planetDescriptions);\n    }\n    \n    async generateSystem(): Promise<void> {\n        // Validate inputs\n        if (!this.systemNameInput || !this.skyboxDescription) return;\n        \n        const systemValidation = this.validationManager.validateSystemForm(\n            this.systemNameInput, \n            this.skyboxDescription\n        );\n        \n        if (!systemValidation.isValid) {\n            this.validationManager.showMobileAlert(systemValidation.message || 'Validation failed', this.playUISound.bind(this) as unknown as null);\n            return;\n        }\n        \n        if (!this.planetDescriptions) return;\n        \n        const planetInputs = this.planetDescriptions.getElementsByClassName('planet-input');\n        const planetValidation = this.validationManager.validatePlanetCount(planetInputs);\n        \n        if (!planetValidation.isValid) {\n            this.validationManager.showMobileAlert(planetValidation.message || 'Planet validation failed', this.playUISound.bind(this) as unknown as null);\n            return;\n        }\n        \n        // Collect and validate planet data\n        const { planets, errors } = this.validationManager.collectPlanetData(planetInputs);\n        \n        if (errors.length > 0) {\n            this.validationManager.showMobileAlert(errors[0], this.playUISound.bind(this) as unknown as null);\n            return;\n        }\n        \n        // Show progress UI\n        this.previewManager.showProgress('Initializing...');\n        this.isGenerating = true;\n        \n        try {\n            // Generate skybox\n            this.previewManager.updateGenerationStatus('Generating skybox...');\n            if (!this.systemNameInput || !this.skyboxDescription) {\n                throw new Error('Missing system input elements');\n            }\n            \n            const skyboxResponse: ApiImageResponse = await this.apiClient.generateSkybox(\n                this.systemNameInput.value.trim(), \n                this.skyboxDescription.value.trim()\n            );\n            \n            if (!skyboxResponse.success || !skyboxResponse.image_paths?.length) {\n                throw new Error(skyboxResponse.message || 'Failed to generate skybox');\n            }\n            \n            this.generatedSkyboxUrl = skyboxResponse.image_paths[0];\n            \n            // Generate planets\n            this.generatedPlanetUrls = [];\n            for (let i = 0; i < planets.length; i++) {\n                const planet = planets[i];\n                this.previewManager.updateGenerationStatus(\n                    `Generating planet ${i+1} of ${planets.length}: ${planet.name}...`\n                );\n                \n                const planetResponse: ApiImageResponse = await this.apiClient.generatePlanet(planet.name, planet.description);\n                \n                if (planetResponse.success && planetResponse.image_paths?.length) {\n                    this.generatedPlanetUrls.push({\n                        name: planet.name,\n                        url: planetResponse.image_paths[0]\n                    });\n                }\n            }\n            \n            // Create system data\n            const starClassSelect = document.getElementById('star-class') as HTMLSelectElement | null;\n            const starClass = starClassSelect ? starClassSelect.value : 'G';\n            this.systemData = this.systemDataManager.createSystemData(\n                this.systemNameInput.value.trim(),\n                starClass,\n                this.generatedSkyboxUrl,\n                planets.map((planet, i) => ({\n                    ...planet,\n                    textureUrl: this.generatedPlanetUrls[i]?.url || null\n                }))\n            );\n            \n            // Show preview\n            this.previewManager.showSystemPreview(\n                this.generatedSkyboxUrl, \n                this.generatedPlanetUrls, \n                this.apiClient\n            );\n            \n        } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            console.error('Error generating system:', error);\n            this.validationManager.showMobileAlert(\n                `Failed to generate system: ${errorMessage}`, \n                this.playUISound.bind(this) as unknown as null\n            );\n            this.previewManager.hideProgress();\n        }\n        \n        this.isGenerating = false;\n    }\n    \n    travelToSystem(): void {\n        if (!this.systemData) {\n            this.validationManager.showMobileAlert(\n                'No system data available. Please generate a system first.',\n                this.playUISound.bind(this) as unknown as null\n            );\n            return;\n        }\n        \n        try {\n            if (!this.starSystemGenerator) {\n                throw new Error('Star system generator not available');\n            }\n            \n            const success = this.starSystemGenerator.addCustomSystem(this.systemData);\n            \n            if (!success) {\n                throw new Error('Failed to add custom system');\n            }\n            \n            this.hide();\n            \n            if (this.environment?.travelToSystem) {\n                this.environment.travelToSystem(this.systemData.id);\n            } else {\n                console.error('Environment or travelToSystem method not available');\n            }\n            \n        } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            console.error('Error traveling to custom system:', error);\n            this.validationManager.showMobileAlert(\n                `Failed to travel to custom system: ${errorMessage}`,\n                this.playUISound.bind(this) as unknown as null\n            );\n        }\n    }\n    \n    playUISound(): void {\n        this.helpers.playUISound();\n    }\n    \n    show(): void {\n        if (!this.container) return;\n        \n        this.cleanupBeforeHiding();\n        this.container.style.display = 'flex';\n        this.isVisible = true;\n        \n        // Reset UI state\n        this.previewManager.resetToForm();\n        this.playUISound();\n        \n        // Handle mobile-specific setup\n        if (this.isMobile) {\n            this.setupMobileShow();\n        } else {\n            this.setupDesktopShow();\n        }\n    }\n    \n    setupMobileShow(): void {\n        if (!this.container) return;\n        const modalContent = this.container.querySelector<HTMLElement>('.modal-content');\n        if (modalContent) {\n            this.helpers.scrollToTop(modalContent);\n            this.helpers.setStyleSafe(modalContent, 'overflowY', 'auto');\n            this.helpers.setStyleSafe(modalContent, 'webkitOverflowScrolling', 'touch');\n            this.helpers.setStyleSafe(modalContent, 'overscrollBehavior', 'contain');\n        }\n        \n        this.helpers.addClassSafe(document.body, 'modal-open');\n        \n        // Delayed focus to avoid iOS keyboard issues\n        setTimeout(() => {\n            if (this.systemNameInput) {\n                this.systemNameInput.focus();\n            }\n        }, 300);\n    }\n    \n    setupDesktopShow(): void {\n        setTimeout(() => {\n            if (this.systemNameInput) {\n                this.systemNameInput.focus();\n            }\n        }, 300);\n    }\n    \n    hide(): void {\n        if (!this.container || this.isGenerating) return;\n        \n        this.cleanupBeforeHiding();\n        this.container.style.display = 'none';\n        this.isVisible = false;\n        this.playUISound();\n        \n        // Return to stargate UI\n        setTimeout(() => {\n            if (window.game?.ui?.stargateInterface) {\n                console.log(\"CustomSystemCreator: Returning to stargate UI\");\n                window.game.ui.stargateInterface.showStargateUI();\n            } else {\n                const stargateUI = document.getElementById('stargate-ui');\n                if (stargateUI) {\n                    stargateUI.style.display = 'block';\n                    console.log(\"CustomSystemCreator: Showed stargate UI via direct DOM access\");\n                } else {\n                    console.warn(\"CustomSystemCreator: Could not find stargate UI to return to\");\n                }\n            }\n        }, 100);\n    }\n    \n    toggle(): void {\n        if (this.isVisible) {\n            this.hide();\n        } else {\n            this.show();\n        }\n    }\n    \n    cleanupBeforeHiding(): void {\n        if (this.isGenerating) {\n            this.isGenerating = false;\n            this.previewManager.hideProgress();\n        }\n        \n        this.helpers.cleanupScrolling();\n        this.helpers.setStyleSafe(document.body, 'pointerEvents', 'auto');\n        \n        if (this.isMobile) {\n            this.helpers.setStyleSafe(document.body, 'touchAction', 'auto');\n            this.helpers.removeClassSafe(document.body, 'modal-open');\n            this.helpers.forceReflow(this.container);\n        }\n    }\n    \n    destroy(): void {\n        this.cleanupBeforeHiding();\n        this.eventHandlerManager.cleanup();\n        this.styleManager.cleanup();\n        this.helpers.cleanup();\n        this.formViewManager.cleanup();\n        \n        if (this.container?.parentNode) {\n            this.container.parentNode.removeChild(this.container);\n        }\n    }\n}\n"],"names":["ApiClient","__publicField","expiryTime","currentTime","fiveMinutesInMs","resolve","success","response","errorMessage","cb","data","expiryDate","error","errorData","systemName","description","planetName","relativeUrl","cleanPath","StyleManager","isMobile","style","type","styles","defaultRows","id","ValidationManager","systemNameInput","skyboxDescription","skyboxDesc","planetDiv","planetIndex","nameInput","descInput","planetDesc","planetInputs","planets","errors","validation","sizeInput","distanceInput","speedInput","ringsInput","orbitSpeed","textarea","maxChars","_a","counter","updateCounter","remaining","e","_planetDescriptions","firstPlanetDesc","message","playUISound","alertOverlay","alertBox","messageEl","okButton","SystemDataManager","starClass","starClassData","sc","skyboxUrl","lightIntensityMultiplier","planet","baseDistance","increment","sliderValue","systemData","index","FormViewManager","styleManager","container","_b","planetDescriptions","setupSliderListeners","updatePlanetNumbers","newIndex","removeBtn","removeHandler","slider","modalContent","newPlanet","scrollPos","err","i","planetHeader","button","sizeSlider","sizeValue","distanceSlider","distanceValue","speedSlider","speedValue","speed","s","PreviewManager","generatedSkyboxUrl","generatedPlanetUrls","apiClient","skyboxPreviewImg","planetUrls","planetsPreview","planetImageSrc","generationProgress","systemPreview","systemForm","generationStatus","imageUrl","img","errorMsg","title","EventHandlerManager","customSystemCreator","elements","closeBtn","closeHandler","addPlanetHandler","generateHandler","travelHandler","regenerateHandler","escapeHandler","clickOutsideHandler","_elements","touchCloseHandler","preventScroll","formViewManager","element","handlers","event","handler","key","handlerFunc","eventType","options","wrappedHandler","validationManager","field","errorDiv","existingError","HelperManager","value","prefix","func","wait","immediate","timeout","args","later","callNow","limit","inThrottle","input","maxLength","sanitized","url","bytes","k","sizes","obj","item","clonedObj","tag","className","content","attributes","rect","smooth","property","selector","reject","observer","_mutations","obs","condition","interval","startTime","CustomSystemCreator","starSystemGenerator","environment","systemValidation","planetValidation","skyboxResponse","planetResponse","starClassSelect","stargateUI"],"mappings":"oKAIO,MAAMA,CAAU,CAQnB,aAAc,CAPNC,EAAA,mBACAA,EAAA,cACAA,EAAA,oBACAA,EAAA,iBACAA,EAAA,qBACAA,EAAA,yBAIC,KAAA,WAAa,KAAK,cAAc,EAGrC,KAAK,MAAQ,KACb,KAAK,YAAc,KAGnB,KAAK,SAAW,cAGhB,KAAK,aAAe,GACpB,KAAK,iBAAmB,CAAC,EAEzB,QAAQ,IAAI,yCAAyC,KAAK,UAAU,EAAE,CAAA,CAIlE,eAAwB,CAE5B,OAAI,OAAO,SAAS,WAAa,aAAe,OAAO,SAAS,WAAa,YAClE,wBAIJ,4DAAA,CAIH,eAAyB,CAC7B,GAAI,CAAC,KAAK,OAAS,CAAC,KAAK,YACd,MAAA,GAGX,MAAMC,EAAa,IAAI,KAAK,KAAK,WAAW,EAAE,QAAQ,EAChDC,EAAc,IAAI,KAAK,EAAE,QAAQ,EAGjCC,EAAkB,EAAI,GAAK,IACjC,OAAQF,EAAaC,EAAeC,CAAA,CAIhC,YAAmB,CACvB,KAAK,MAAQ,KACb,KAAK,YAAc,IAAA,CAIvB,MAAc,UAA6B,CAEvC,GAAI,KAAK,aACE,OAAA,IAAI,QAASC,GAAY,CAC5B,KAAK,iBAAiB,KAAMC,GAAYD,EAAQC,CAAO,CAAC,CAAA,CAC3D,EAGL,KAAK,aAAe,GAEhB,GAAA,CACA,MAAMC,EAAW,MAAM,MAAM,GAAG,KAAK,UAAU,SAAU,CACrD,OAAQ,OACR,QAAS,CACL,eAAgB,kBACpB,EACA,KAAM,KAAK,UAAU,CAAE,UAAW,KAAK,QAAU,CAAA,CAAA,CACpD,EAEG,GAAA,CAACA,EAAS,GAAI,CAER,MAAAC,GADY,MAAMD,EAAS,KAAK,GACP,QAAU,sBACzC,cAAQ,MAAM,gBAAgBA,EAAS,MAAM,MAAMC,CAAY,EAAE,EAGjE,KAAK,iBAAiB,QAAcC,GAAAA,EAAG,EAAK,CAAC,EAC7C,KAAK,iBAAmB,CAAC,EACzB,KAAK,aAAe,GAEd,IAAI,MAAMD,CAAY,CAAA,CAM1B,MAAAE,EAAsB,MAAMH,EAAS,KAAK,EAGhD,KAAK,MAAQG,EAAK,aAGZ,MAAAC,MAAiB,KACvB,OAAAA,EAAW,SAASA,EAAW,SAAS,EAAI,CAAC,EACxC,KAAA,YAAcA,EAAW,YAAY,EAG1C,KAAK,iBAAiB,QAAcF,GAAAA,EAAG,EAAI,CAAC,EAC5C,KAAK,iBAAmB,CAAC,EACzB,KAAK,aAAe,GAEb,SACFG,EAAY,CACT,eAAA,MAAM,uBAAwBA,CAAK,EAG3C,KAAK,iBAAiB,QAAcH,GAAAA,EAAG,EAAK,CAAC,EAC7C,KAAK,iBAAmB,CAAC,EACzB,KAAK,aAAe,GAEb,EAAA,CACX,CAIJ,MAAc,kBAAkBF,EAAsC,CAC9D,GAAAA,EAAS,SAAW,IAAK,CAMzB,GAJA,KAAK,WAAW,EAIZ,CADY,MAAM,KAAK,SAAS,EAE1B,MAAA,IAAI,MAAM,uDAAuD,EAIpE,MAAA,EAAA,CAGP,GAAAA,EAAS,SAAW,IAEd,MAAA,IAAI,MAAM,8CAA8C,EAG9D,GAAA,CAACA,EAAS,GAAI,CACR,MAAAM,EAAY,MAAMN,EAAS,KAAK,EACtC,MAAM,IAAI,MAAMM,EAAU,SAAWA,EAAU,QAAU,UAAUN,EAAS,MAAM,IAAIA,EAAS,UAAU,EAAE,CAAA,CAIxG,MAAA,EAAA,CAIX,MAAM,eAAeO,EAAoBC,EAAmC,CAEpE,GAAA,CAAC,KAAK,iBAEF,CADY,MAAM,KAAK,SAAS,EAE1B,MAAA,IAAI,MAAM,qCAAqC,EAK7D,MAAMR,EAAW,MAAM,MAAM,GAAG,KAAK,UAAU,mBAAoB,CAC/D,OAAQ,OACR,QAAS,CACL,eAAgB,mBAChB,cAAiB,UAAU,KAAK,KAAK,EACzC,EACA,KAAM,KAAK,UAAU,CACjB,YAAaO,EACb,mBAAoBC,CACvB,CAAA,CAAA,CACJ,EAID,OADgB,MAAM,KAAK,kBAAkBR,CAAQ,EAM9C,MAAMA,EAAS,KAAK,EAHhB,KAAK,eAAeO,EAAYC,CAAW,CAG3B,CAI/B,MAAM,eAAeC,EAAoBD,EAAmC,CAEpE,GAAA,CAAC,KAAK,iBAEF,CADY,MAAM,KAAK,SAAS,EAE1B,MAAA,IAAI,MAAM,qCAAqC,EAK7D,MAAMR,EAAW,MAAM,MAAM,GAAG,KAAK,UAAU,mBAAoB,CAC/D,OAAQ,OACR,QAAS,CACL,eAAgB,mBAChB,cAAiB,UAAU,KAAK,KAAK,EACzC,EACA,KAAM,KAAK,UAAU,CACjB,YAAaS,EACb,mBAAoBD,CACvB,CAAA,CAAA,CACJ,EAID,OADgB,MAAM,KAAK,kBAAkBR,CAAQ,EAM9C,MAAMA,EAAS,KAAK,EAHhB,KAAK,eAAeS,EAAYD,CAAW,CAG3B,CAI/B,gBAAgBE,EAA6B,CAErC,GAAAA,EAAY,WAAW,MAAM,EACtB,OAAAA,EAIL,MAAAC,EAAYD,EAAY,WAAW,GAAG,EAAIA,EAAY,UAAU,CAAC,EAAIA,EAMpE,MAAA,GAHS,KAAK,UAGJ,IAAIC,CAAS,EAAA,CAEtC,CC3OO,MAAMC,CAAa,CAItB,YAAYC,EAAoB,GAAO,CAHvCnB,EAAA,iBACAA,EAAA,uBAGI,KAAK,SAAWmB,EAChB,KAAK,eAAiB,EAAA,CAG1B,cAAqB,CACb,KAAK,iBAET,KAAK,iBAAiB,EAElB,KAAK,UACL,KAAK,mBAAmB,EAG5B,KAAK,eAAiB,GAAA,CAG1B,kBAAyB,CACrB,GAAI,CAAC,SAAS,eAAe,8BAA8B,EAAG,CACpD,MAAAC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,GAAK,+BACXA,EAAM,YAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAuEX,SAAA,KAAK,YAAYA,CAAK,CAAA,CACnC,CAGJ,oBAA2B,CACvB,GAAI,CAAC,SAAS,eAAe,qCAAqC,EAAG,CAC3D,MAAAA,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,GAAK,sCACXA,EAAM,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAuIT,SAAA,KAAK,YAAYA,CAAK,CAAA,CACnC,CAGJ,gBAAgBC,EAAuC,CACnD,MAAMC,EAAiC,CACnC,aAAc,KAAK,SAAW,0IAA4I,GAC1K,SAAU,KAAK,SAAW,qEAAuE,GACjG,UAAW,KAAK,SAAW,yBAA2B,GACtD,MAAO,KAAK,SAAW,gDAAkD,GACzE,SAAU,KAAK,SAAW,kCAAoC,GAC9D,OAAQ,KAAK,SAAW,gDAAkD,GAC1E,OAAQ,KAAK,SAAW,gCAAkC,GAC1D,SAAU,KAAK,SAAW,4EAA8E,GACxG,YAAa,KAAK,SAAW,oBAAsB,GACnD,WAAY,KAAK,SAAW,mFAAqF,GACjH,aAAc,KAAK,SAAW,iFAAmF,GACjH,UAAW,KAAK,SAAW,4EAA8E,GACzG,iBAAkB,KAAK,SAAW,0BAA4B,GAC9D,cAAe,KAAK,SAAW,oCAAsC,GACrE,eAAgB,KAAK,SAAW,eAAiB,GACjD,YAAa,KAAK,SAAW,wBAA0B,EAC3D,EAEO,OAAAD,EAAO,CAAE,CAACA,CAAI,EAAGC,EAAOD,CAAI,GAAMC,CAAA,CAG7C,gBAAgBC,EAA6B,CACzC,OAAO,KAAK,SAAW,KAAK,IAAI,EAAGA,EAAc,CAAC,EAAIA,CAAA,CAG1D,SAAgB,CACW,CACnB,+BACA,sCACA,kBACJ,EAEe,QAAcC,GAAA,CACnB,MAAAJ,EAAQ,SAAS,eAAeI,CAAE,EACpCJ,GACAA,EAAM,OAAO,CACjB,CACH,EAED,KAAK,eAAiB,EAAA,CAE9B,CC7QO,MAAMK,CAAkB,CAG3B,YAAYN,EAAoB,GAAO,CAFvCnB,EAAA,iBAGI,KAAK,SAAWmB,CAAA,CAGpB,mBAAmBO,EAAmCC,EAA0D,CACtG,MAAAd,EAAaa,EAAgB,MAAM,KAAK,EACxCE,EAAaD,EAAkB,MAAM,KAAK,EAEhD,OAAKd,EAIAe,EAIDf,EAAW,OAAS,EACb,CAAE,QAAS,GAAO,QAAS,iDAAkD,EAGpFe,EAAW,OAAS,GACb,CAAE,QAAS,GAAO,QAAS,yDAA0D,EAGzF,CAAE,QAAS,EAAK,EAXZ,CAAE,QAAS,GAAO,QAAS,oCAAqC,EAJhE,CAAE,QAAS,GAAO,QAAS,6BAA8B,CAe7C,CAG3B,mBAAmBC,EAAwBC,EAAuC,CACxE,MAAAC,EAAYF,EAAU,cAAgC,2BAA2B,EACjFG,EAAYH,EAAU,cAAmC,qCAAqC,EAEhG,GAAA,CAACE,GAAa,CAACC,EACf,MAAO,CAAE,QAAS,GAAO,QAAS,UAAUF,CAAW,8BAA+B,EAGpF,MAAAf,EAAagB,EAAU,MAAM,KAAK,EAClCE,EAAaD,EAAU,MAAM,KAAK,EAExC,OAAKjB,EAIAkB,EAIDlB,EAAW,OAAS,EACb,CAAE,QAAS,GAAO,QAAS,UAAUe,CAAW,2CAA4C,EAGnGG,EAAW,OAAS,EACb,CAAE,QAAS,GAAO,QAAS,UAAUH,CAAW,kDAAmD,EAGvG,CAAE,QAAS,EAAK,EAXZ,CAAE,QAAS,GAAO,QAAS,yCAAyCA,CAAW,GAAI,EAJnF,CAAE,QAAS,GAAO,QAAS,kCAAkCA,CAAW,GAAI,CAehE,CAG3B,kBAAkBI,EAAqE,CACnF,MAAMC,EAOA,CAAC,EACDC,EAAmB,CAAC,EAE1B,QAAS,EAAI,EAAG,EAAIF,EAAa,OAAQ,IAAK,CACpC,MAAAL,EAAYK,EAAa,CAAC,EAC1BJ,EAAc,EAAI,EAElBO,EAAa,KAAK,mBAAmBR,EAAWC,CAAW,EAC7D,GAAA,CAACO,EAAW,QAAS,CACjBA,EAAW,SACJD,EAAA,KAAKC,EAAW,OAAO,EAElC,QAAA,CAGE,MAAAN,EAAYF,EAAU,cAAgC,2BAA2B,EACjFG,EAAYH,EAAU,cAAmC,qCAAqC,EAC9FS,EAAYT,EAAU,cAAgC,2BAA2B,EACjFU,EAAgBV,EAAU,cAAgC,+BAA+B,EACzFW,EAAaX,EAAU,cAAgC,4BAA4B,EACnFY,EAAaZ,EAAU,cAAgC,4BAA4B,EAErF,GAAA,CAACE,GAAa,CAACC,GAAa,CAACM,GAAa,CAACC,GAAiB,CAACC,GAAc,CAACC,EAAY,CACjFL,EAAA,KAAK,UAAUN,CAAW,oCAAoC,EACrE,QAAA,CAKJ,MAAMY,EAAa,MADA,WAAWF,EAAW,KAAK,EACL,IAAM,KAAQ,GAEvDL,EAAQ,KAAK,CACT,KAAMJ,EAAU,MAAM,KAAK,EAC3B,YAAaC,EAAU,MAAM,KAAK,EAClC,KAAM,SAASM,EAAU,KAAK,EAC9B,SAAU,SAASC,EAAc,KAAK,EACtC,MAAOG,EACP,MAAOD,EAAW,OAAA,CACrB,CAAA,CAGE,MAAA,CAAE,QAAAN,EAAS,OAAAC,CAAO,CAAA,CAG7B,oBAAoBO,EAA+BC,EAAwB,CF/HxE,IAAAC,EEgIC,GAAI,CAACF,GAAY,CAAC,KAAK,SAAU,OAG3B,MAAAG,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,eAGpB,MAAMC,EAAgB,IAAY,CACxB,MAAAC,EAAYJ,EAAWD,EAAS,MAAM,OACpCG,EAAA,YAAc,GAAGE,CAAS,wBAGlCF,EAAQ,UAAY,eAChBE,EAAY,IACJF,EAAA,UAAU,IAAI,SAAS,EAE/BE,EAAY,IACJF,EAAA,UAAU,IAAI,OAAO,EAI7BE,EAAY,IACZL,EAAS,MAAQA,EAAS,MAAM,UAAU,EAAGC,CAAQ,EACrDE,EAAQ,YAAc,yBAE9B,EAGSH,EAAA,iBAAiB,QAASI,CAAa,EACvCJ,EAAA,iBAAiB,UAAYM,GAAqB,CAEnDN,EAAS,MAAM,QAAUC,GACzBK,EAAE,MAAQ,aACVA,EAAE,MAAQ,UACVA,EAAE,MAAQ,aACVA,EAAE,MAAQ,cACV,CAACA,EAAE,SACH,CAACA,EAAE,SACHA,EAAE,eAAe,CACrB,CACH,EAGaF,EAAA,GAGdF,EAAAF,EAAS,aAAT,MAAAE,EAAqB,aAAaC,EAASH,EAAS,aAGpDA,EAAS,aAAa,YAAaC,EAAS,SAAA,CAAU,CAAA,CAG1D,uBAAuBjB,EAAwCuB,EAAwC,CAC/F,GAAA,CAAC,KAAK,SAAU,OAGf,KAAA,oBAAoBvB,EAAmB,GAAG,EAGzC,MAAAwB,EAAkB,SAAS,eAAe,sBAAsB,EAClEA,GACK,KAAA,oBAAoBA,EAAiB,GAAG,CACjD,CAGJ,oBAAoBjB,EAA2D,CACvE,OAAAA,EAAa,SAAW,EACjB,CAAE,QAAS,GAAO,QAAS,gDAAiD,EAGnFA,EAAa,OAAS,EACf,CAAE,QAAS,GAAO,QAAS,0CAA2C,EAG1E,CAAE,QAAS,EAAK,CAAA,CAG3B,gBAAgBkB,EAAiBC,EAAmC,KAAY,CAC5E,GAAI,KAAK,SAAU,CAET,MAAAC,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,MAAM,SAAW,QAC9BA,EAAa,MAAM,IAAM,IACzBA,EAAa,MAAM,KAAO,IAC1BA,EAAa,MAAM,MAAQ,OAC3BA,EAAa,MAAM,OAAS,OAC5BA,EAAa,MAAM,gBAAkB,qBACrCA,EAAa,MAAM,QAAU,OAC7BA,EAAa,MAAM,eAAiB,SACpCA,EAAa,MAAM,WAAa,SAChCA,EAAa,MAAM,OAAS,QAEtB,MAAAC,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,MAAM,gBAAkB,UACjCA,EAAS,MAAM,MAAQ,UACvBA,EAAS,MAAM,QAAU,OACzBA,EAAS,MAAM,aAAe,OAC9BA,EAAS,MAAM,SAAW,MAC1BA,EAAS,MAAM,UAAY,SAC3BA,EAAS,MAAM,OAAS,oBAElB,MAAAC,EAAY,SAAS,cAAc,GAAG,EAC5CA,EAAU,YAAcJ,EACxBI,EAAU,MAAM,aAAe,OAC/BA,EAAU,MAAM,SAAW,OAErB,MAAAC,EAAW,SAAS,cAAc,QAAQ,EAChDA,EAAS,YAAc,KACvBA,EAAS,MAAM,QAAU,YACzBA,EAAS,MAAM,SAAW,OAC1BA,EAAS,MAAM,gBAAkB,UACjCA,EAAS,MAAM,MAAQ,QACvBA,EAAS,MAAM,OAAS,OACxBA,EAAS,MAAM,aAAe,MAC9BA,EAAS,MAAM,UAAY,OAC3BA,EAAS,MAAM,SAAW,QAE1BF,EAAS,YAAYC,CAAS,EAC9BD,EAAS,YAAYE,CAAQ,EAC7BH,EAAa,YAAYC,CAAQ,EACxB,SAAA,KAAK,YAAYD,CAAY,EAGlCD,GACYA,EAAA,EAIPI,EAAA,iBAAiB,QAAS,IAAM,CAC5B,SAAA,KAAK,YAAYH,CAAY,CAAA,CACzC,EAEQG,EAAA,iBAAiB,WAAaR,GAAkB,CACrDA,EAAE,eAAe,EACR,SAAA,KAAK,YAAYK,CAAY,EAClCD,GACYA,EAAA,CAChB,CACH,CAAA,MAID,MAAMD,CAAO,CACjB,CAER,CC5NO,MAAMM,CAAkB,CAI3B,aAAc,CAHd1D,EAAA,oBACAA,EAAA,uBAGS,KAAA,YAAc,KAAK,eAAe,EAClC,KAAA,eAAiB,KAAK,kBAAkB,CAAA,CAGjD,gBAA8B,CACnB,MAAA,CACH,CAAE,MAAO,IAAK,MAAO,6BAA8B,MAAO,QAAS,EACnE,CAAE,MAAO,IAAK,MAAO,iBAAkB,MAAO,QAAS,EACvD,CAAE,MAAO,IAAK,MAAO,YAAa,MAAO,QAAS,EAClD,CAAE,MAAO,IAAK,MAAO,mBAAoB,MAAO,QAAS,EACzD,CAAE,MAAO,IAAK,MAAO,wBAAyB,MAAO,SAAU,SAAU,EAAK,EAC9E,CAAE,MAAO,IAAK,MAAO,aAAc,MAAO,QAAS,EACnD,CAAE,MAAO,IAAK,MAAO,gBAAiB,MAAO,QAAS,CAC1D,CAAA,CAGJ,mBAAoC,CACzB,MAAA,CACH,KAAM,CAAE,IAAK,IAAK,IAAK,IAAM,QAAS,GAAI,EAC1C,SAAU,CAAE,IAAK,IAAM,IAAK,IAAO,QAAS,GAAK,EACjD,MAAO,CAAE,IAAK,EAAG,IAAK,GAAI,QAAS,CAAE,EACrC,MAAO,EACX,CAAA,CAGJ,qBAAqB2D,EAA2B,CAC5C,MAAMC,EAAgB,KAAK,YAAY,KAAWC,GAAAA,EAAG,QAAUF,CAAS,EACjE,OAAAC,EAAgBA,EAAc,MAAQ,QAAA,CAGjD,iBACI/C,EACA8C,EACAG,EACA3B,EACA4B,EAAmC,GACzB,CACH,MAAA,CACH,GAAI,UAAU,KAAK,IAAK,CAAA,GACxB,KAAMlD,EACN,UAAA8C,EACA,eAAgB,SAChB,YAAa,2BAA2BxB,EAAQ,MAAM,WACtD,UAAA2B,EACA,yBAAAC,EACA,WAAY5B,EAAQ,IAAK6B,IACd,CACH,KAAMA,EAAO,KACb,WAAYA,EAAO,YAAc,KACjC,KAAMA,EAAO,KACb,SAAUA,EAAO,SACjB,MAAOA,EAAO,MACd,MAAO,KAAK,qBAAqBL,CAAS,EAC1C,MAAOK,EAAO,KAClB,EACH,CACL,CAAA,CAGJ,wBAAwBlC,EAAqBmC,EAAuB,IAAMC,EAAoB,IAAc,CACxG,OAAOD,EAAenC,EAAcoC,CAAA,CAGxC,+BAA+BC,EAA6B,CAEjD,MAAA,OAASA,EAAc,IAAM,KAAQ,EAAA,CAGhD,qBAAqBrC,EAOnB,CACS,MAAA,CACH,KAAM,GACN,YAAa,GACb,KAAM,KAAK,eAAe,KAAK,QAC/B,SAAU,KAAK,wBAAwBA,CAAW,EAClD,MAAO,KAAK,+BAA+B,KAAK,eAAe,MAAM,OAAO,EAC5E,MAAO,KAAK,eAAe,KAC/B,CAAA,CAGJ,kBAAiD,CACtC,MAAA,CACH,MAAO,CACH,KAAM,aACN,UAAW,IACX,kBAAmB,4CACnB,QAAS,CACL,CACI,KAAM,UACN,YAAa,4CACb,KAAM,IACN,SAAU,IACV,MAAO,KACP,MAAO,EACX,EACA,CACI,KAAM,QACN,YAAa,+CACb,KAAM,IACN,SAAU,IACV,MAAO,MACP,MAAO,EACX,EACA,CACI,KAAM,QACN,YAAa,2CACb,KAAM,IACN,SAAU,IACV,MAAO,MACP,MAAO,EAAA,CACX,CAER,EACA,OAAQ,CACJ,KAAM,gBACN,UAAW,IACX,kBAAmB,mDACnB,QAAS,CACL,CACI,KAAM,UACN,YAAa,8DACb,KAAM,IACN,SAAU,KACV,MAAO,KACP,MAAO,EACX,EACA,CACI,KAAM,eACN,YAAa,kDACb,KAAM,IACN,SAAU,KACV,MAAO,KACP,MAAO,EAAA,CACX,CAER,EACA,OAAQ,CACJ,KAAM,gBACN,UAAW,IACX,kBAAmB,gEACnB,QAAS,CACL,CACI,KAAM,cACN,YAAa,0DACb,KAAM,IACN,SAAU,KACV,MAAO,MACP,MAAO,EAAA,CACX,CACJ,CAER,CAAA,CAGJ,mBAAmBsC,EAA0C,CH1N1D,IAAAvB,EG2NC,MAAMT,EAAmB,CAAC,EAEtB,OAAA,CAACgC,EAAW,MAAQA,EAAW,KAAK,KAAK,EAAE,OAAS,IACpDhC,EAAO,KAAK,gDAAgD,GAG5D,CAACgC,EAAW,WAAa,CAAC,KAAK,YAAY,KAAKP,GAAMA,EAAG,QAAUO,EAAW,SAAS,IACvFhC,EAAO,KAAK,6BAA6B,GAGzC,CAACgC,EAAW,YAAcA,EAAW,WAAW,SAAW,IAC3DhC,EAAO,KAAK,sCAAsC,EAGlDgC,EAAW,YAAcA,EAAW,WAAW,OAAS,GACxDhC,EAAO,KAAK,wCAAwC,GAGxDS,EAAAuB,EAAW,aAAX,MAAAvB,EAAuB,QAAQ,CAACmB,EAAQK,IAAU,EAC1C,CAACL,EAAO,MAAQA,EAAO,KAAK,KAAK,EAAE,OAAS,IAC5C5B,EAAO,KAAK,UAAUiC,EAAQ,CAAC,0CAA0C,GAGzEL,EAAO,KAAO,KAAK,eAAe,KAAK,KAAOA,EAAO,KAAO,KAAK,eAAe,KAAK,MACrF5B,EAAO,KAAK,UAAUiC,EAAQ,CAAC,yBAAyB,KAAK,eAAe,KAAK,GAAG,QAAQ,KAAK,eAAe,KAAK,GAAG,EAAE,GAG1HL,EAAO,SAAW,KAAK,eAAe,SAAS,KAAOA,EAAO,SAAW,KAAK,eAAe,SAAS,MACrG5B,EAAO,KAAK,UAAUiC,EAAQ,CAAC,6BAA6B,KAAK,eAAe,SAAS,GAAG,QAAQ,KAAK,eAAe,SAAS,GAAG,EAAE,CAC1I,GAGG,CACH,QAASjC,EAAO,SAAW,EAC3B,OAAAA,CACJ,CAAA,CAER,CC/PO,MAAMkC,CAAgB,CAMzB,YAAYnD,EAAoB,GAAOoD,EAAoC,KAAM,CALjFvE,EAAA,iBACAA,EAAA,qBACAA,EAAA,sBACAA,EAAA,0BAGI,KAAK,SAAWmB,EAChB,KAAK,aAAeoD,EACpB,KAAK,cAAgB,KACrB,KAAK,kBAAoB,IAAA,CAG7B,qBAAsC,CAC5B,MAAAC,EAAY,SAAS,cAAc,KAAK,EAC9C,OAAAA,EAAU,GAAK,wBACfA,EAAU,UAAY,kBACtBA,EAAU,MAAM,QAAU,OACnBA,CAAA,CAGX,oBAA6B,CJtB1B,IAAA3B,EIuBC,MAAMvB,IAASuB,EAAA,KAAK,eAAL,YAAAA,EAAmB,oBAAqB,CAAC,EAEjD,MAAA;AAAA,gDACiCvB,EAAO,cAAgB,EAAE;AAAA;AAAA;AAAA,iFAGQA,EAAO,UAAY,EAAE;AAAA;AAAA,iDAErDA,EAAO,WAAa,EAAE;AAAA;AAAA,0BAE7C,KAAK,iBAAkB,CAAA;AAAA,0BACvB,KAAK,oBAAqB,CAAA;AAAA,0BAC1B,KAAK,kBAAmB,CAAA;AAAA;AAAA,sBAE5B,KAAK,sBAAuB,CAAA;AAAA,sBAC5B,KAAK,qBAAsB,CAAA;AAAA;AAAA;AAAA,SAAA,CAM7C,kBAA2B,CJ5CxB,IAAAuB,EAAA4B,EI6CC,MAAMnD,IAASuB,EAAA,KAAK,eAAL,YAAAA,EAAmB,oBAAqB,CAAC,EAEjD,MAAA;AAAA;AAAA;AAAA,6GAG8FvB,EAAO,OAAS,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,4DAKrEmD,EAAA,KAAK,eAAL,YAAAA,EAAmB,gBAAgB,KAAM,CAAC,iJAAiJnD,EAAO,UAAY,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,sEAKpMA,EAAO,QAAU,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAA,CAcrF,qBAA8B,CJ1E3B,IAAAuB,EI2EC,MAAMvB,IAASuB,EAAA,KAAK,eAAL,YAAAA,EAAmB,oBAAqB,CAAC,EAEjD,MAAA;AAAA;AAAA;AAAA,sBAGO,KAAK,iBAAiB,EAAGvB,CAAM,CAAC;AAAA;AAAA;AAAA;AAAA,uEAIiBA,EAAO,cAAgB,EAAE;AAAA,SAAA,CAI5F,iBAAiB+C,EAAe/C,EAAiC,GAAY,CJxF1E,IAAAuB,EIyFQ,MAAA;AAAA,yBACUwB,CAAK;AAAA,sCACQA,CAAK;AAAA,iDACMA,CAAK,uDAAuD/C,EAAO,OAAS,EAAE;AAAA;AAAA,6CAElF+C,CAAK;AAAA,+CACHA,CAAK,aAAWxB,EAAA,KAAK,eAAL,YAAAA,EAAmB,gBAAgB,KAAM,CAAC,sGAAsGvB,EAAO,UAAY,EAAE;AAAA;AAAA;AAAA,kBAGlN,KAAK,oBAAoB+C,EAAO/C,CAAM,CAAC;AAAA,kBACvC,KAAK,kBAAkB+C,EAAO/C,CAAM,CAAC;AAAA;AAAA;AAAA,cAGzC+C,EAAQ,EAAI,KAAK,mBAAmB/C,CAAM,EAAI,EAAE;AAAA,SAAA,CAI1D,oBAAoB+C,EAAe/C,EAAiC,GAAY,CACrE,MAAA;AAAA;AAAA,0CAE2B+C,CAAK;AAAA,sDACOA,CAAK,4DAA4D/C,EAAO,QAAU,EAAE;AAAA,mEACvE+C,CAAK;AAAA;AAAA;AAAA;AAAA,8CAI1BA,CAAK;AAAA,0DACOA,CAAK,mCAAmC,IAAOA,EAAQ,GAAI,2BAA2B/C,EAAO,QAAU,EAAE;AAAA,uEAC5F+C,CAAK,KAAK,IAAOA,EAAQ,GAAI;AAAA;AAAA;AAAA;AAAA,2CAIzDA,CAAK;AAAA,uDACOA,CAAK,sDAAsD/C,EAAO,QAAU,EAAE;AAAA,oEACjE+C,CAAK;AAAA;AAAA,SAAA,CAKrE,kBAAkBA,EAAe/C,EAAiC,GAAY,CACnE,MAAA;AAAA,+CACgCA,EAAO,aAAe,EAAE;AAAA,2CAC5B+C,CAAK;AAAA,0DACUA,CAAK,YAAY/C,EAAO,UAAY,EAAE;AAAA;AAAA,SAAA,CAK5F,mBAAmBA,EAAiC,GAAY,CAE5D,MAAO,+CADa,KAAK,SAAW,SAAW,EACkB,YAAYA,EAAO,WAAa,EAAE,mBAAA,CAGvG,mBAA4B,CJ9IzB,IAAAuB,EIiJQ,MAAA;AAAA;AAAA,iFAFQA,EAAA,KAAK,eAAL,YAAAA,EAAmB,oBAAqB,CAAC,GAIqB,YAAc,EAAE;AAAA;AAAA,SAAA,CAKjG,uBAAgC,CACrB,MAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAA,CAWX,sBAA+B,CJpK5B,IAAAA,EIqKC,MAAMvB,IAASuB,EAAA,KAAK,eAAL,YAAAA,EAAmB,oBAAqB,CAAC,EAEjD,MAAA;AAAA;AAAA;AAAA,wDAGyCvB,EAAO,kBAAoB,EAAE;AAAA,yDAC5BA,EAAO,eAAiB,EAAE;AAAA;AAAA;AAAA;AAAA,+EAIJA,EAAO,gBAAkB,EAAE;AAAA;AAAA;AAAA;AAAA,mDAIvDA,EAAO,aAAe,EAAE;AAAA,mFACQA,EAAO,YAAc,EAAE;AAAA,sFACpBA,EAAO,cAAgB,EAAE;AAAA;AAAA;AAAA,SAAA,CAM3G,eACIoD,EACAC,EACAC,EACAvB,EACc,CJhMf,IAAAR,EIkMO,MAAAgC,EADeH,EAAmB,uBAAuB,cAAc,EAC/C,OAAS,EACjCpD,IAASuB,EAAA,KAAK,eAAL,YAAAA,EAAmB,oBAAqB,CAAC,EAElDhB,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,0BACtBA,EAAU,UAAY,KAAK,iBAAiBgD,EAAUvD,CAAM,EAE5DoD,EAAmB,YAAY7C,CAAS,EAGxC8C,EAAqBE,CAAQ,EAGvB,MAAAC,EAAYjD,EAAU,cAAiC,oBAAoB,EACjF,OAAIiD,GACA,KAAK,kBAAkBA,EAAWjD,EAAW+C,EAAqBvB,CAAW,EAI7E,KAAK,UACL,KAAK,yBAAyBxB,CAAS,EAI3C,KAAK,kBAAkB6C,CAAkB,EAElC7C,CAAA,CAGX,kBACIiD,EACAjD,EACA+C,EACAvB,EACI,CACE,MAAA0B,EAAiB9B,GAAoB,CACnCA,KAAK,eAAe,EACxBpB,EAAU,OAAO,EACG+C,EAAA,EAChBvB,GAAyBA,EAAA,CACjC,EAEUyB,EAAA,iBAAiB,QAASC,CAAa,EAE7C,KAAK,UACKD,EAAA,iBAAiB,WAAYC,CAA8B,CACzE,CAGJ,yBAAyBlD,EAA8B,CAEnCA,EAAU,iBAAmC,qBAAqB,EAC1E,QAAkBmD,GAAA,CACfA,EAAA,iBAAiB,aAAc,IAAM,CACjCA,EAAA,UAAU,IAAI,eAAe,CAAA,CACvC,EAEMA,EAAA,iBAAiB,WAAY,IAAM,CAC/BA,EAAA,UAAU,OAAO,eAAe,CAAA,CAC1C,CAAA,CACJ,EAGK,MAAA/C,EAAaJ,EAAU,cAAmC,qCAAqC,EACjGI,GAAc,KAAK,mBACd,KAAA,kBAAkB,oBAAoBA,EAAY,GAAG,CAC9D,CAGJ,kBAAkByC,EAAuC,CAChD,KAAK,WAGN,KAAK,eACL,aAAa,KAAK,aAAa,EAI9B,KAAA,cAAgB,WAAW,IAAM,CAC9B,GAAA,CACM,MAAAO,EAAe,SAAS,cAA2B,uCAAuC,EAC1FC,EAAYR,EAAmB,iBAErC,GAAIO,GAAgBC,EAAW,CAErB,MAAAC,EADYD,EAAU,UACGD,EAAa,aAAe,EAE3DA,EAAa,SAAS,CAClB,IAAKE,EACL,SAAU,QAAA,CACb,CAAA,QAEAC,EAAK,CACF,QAAA,KAAK,uBAAwBA,CAAG,CAAA,GAE7C,GAAG,EAAA,CAGV,oBAAoBV,EAAuC,CACjD,MAAAxC,EAAewC,EAAmB,uBAAuB,cAAc,EAC7E,QAASW,EAAI,EAAGA,EAAInD,EAAa,OAAQmD,IAAK,CAEpC,MAAAC,EADYpD,EAAamD,CAAC,EACD,cAAc,IAAI,EAC7CC,IACaA,EAAA,YAAc,UAAUD,EAAI,CAAC,GAC9C,CACJ,CAGJ,gBAAgBb,EAA8B,CACtC,GAAA,CAAC,KAAK,SAAU,OAEJA,EAAU,iBAAiB,QAAQ,EAC3C,QAAkBe,GAAA,CACjBA,EAAO,UAAU,SAAS,QAAQ,GAC5BA,EAAA,UAAU,IAAI,QAAQ,CACjC,CACH,CAAA,CAGL,qBAAqBlB,EAAqB,CAEtC,MAAMmB,EAAa,SAAS,eAAe,eAAenB,CAAK,EAAE,EAC3DoB,EAAY,SAAS,eAAe,qBAAqBpB,CAAK,EAAE,EAElEmB,GAAcC,GACHD,EAAA,iBAAiB,QAAS,IAAM,CACvCC,EAAU,YAAcD,EAAW,KAAA,CACtC,EAIL,MAAME,EAAiB,SAAS,eAAe,mBAAmBrB,CAAK,EAAE,EACnEsB,EAAgB,SAAS,eAAe,yBAAyBtB,CAAK,EAAE,EAE1EqB,GAAkBC,GACHD,EAAA,iBAAiB,QAAS,IAAM,CAC3CC,EAAc,YAAcD,EAAe,KAAA,CAC9C,EAIL,MAAME,EAAc,SAAS,eAAe,gBAAgBvB,CAAK,EAAE,EAC7DwB,EAAa,SAAS,eAAe,sBAAsBxB,CAAK,EAAE,EAEpEuB,GAAeC,GACHD,EAAA,iBAAiB,QAAS,IAAM,CAExC,MAAME,EAAQ,MAAS,WAAWF,EAAY,KAAK,EAAI,GAAM,sBAClDC,EAAA,YAAcC,EAAM,QAAQ,CAAC,CAAA,CAC3C,EAID,KAAK,UACW,CAACN,EAAYE,EAAgBE,CAAW,EAAE,OAAQG,GAA6BA,IAAM,IAAI,EACjG,QAAkBf,GAAA,CACfA,EAAA,iBAAiB,aAAc,IAAM,CACjCA,EAAA,UAAU,IAAI,eAAe,CAAA,CACvC,EAEMA,EAAA,iBAAiB,WAAY,IAAM,CAC/BA,EAAA,UAAU,OAAO,eAAe,CAAA,CAC1C,CAAA,CACJ,CACL,CAGJ,SAAgB,CACR,KAAK,gBACL,aAAa,KAAK,aAAa,EAC/B,KAAK,cAAgB,KACzB,CAER,CC3WO,MAAMgB,CAAe,CAGxB,YAAY7E,EAAoB,GAAO,CAFvCnB,EAAA,iBAGI,KAAK,SAAWmB,CAAA,CAGpB,kBACI8E,EACAC,EACAC,EACI,CACC,KAAA,oBAAoBF,EAAoBE,CAAS,EACjD,KAAA,qBAAqBD,EAAqBC,CAAS,EACxD,KAAK,cAAc,CAAA,CAGvB,oBAAoBrC,EAA0BqC,EAAmC,CACvE,MAAAC,EAAmB,SAAS,eAAe,oBAAoB,EACjEA,GAAoBtC,GAAaqC,IAChBC,EAAA,IAAMD,EAAU,gBAAgBrC,CAAS,EAC9D,CAGJ,qBAAqBuC,EAAsCF,EAAmC,CACpF,MAAAG,EAAiB,SAAS,eAAe,iBAAiB,EAC3DA,IAELA,EAAe,UAAY,GAEvB,GAACD,GAAc,CAAC,MAAM,QAAQA,CAAU,IAE5CA,EAAW,QAAkBrC,GAAA,CACnB,MAAAnC,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,iBAEhB,MAAA0E,EAAiBJ,GAAanC,EAAO,IACvCmC,EAAU,gBAAgBnC,EAAO,GAAG,EACpCA,EAAO,KAAO,GAElBnC,EAAU,UAAY;AAAA,sBACZmC,EAAO,MAAQ,gBAAgB;AAAA,4BACzBuC,CAAc,UAAUvC,EAAO,MAAQ,QAAQ;AAAA,cAG/DsC,EAAe,YAAYzE,CAAS,CAAA,CACvC,EAAA,CAGL,eAAsB,CACZ,MAAA2E,EAAqB,SAAS,eAAe,qBAAqB,EAClEC,EAAgB,SAAS,eAAe,gBAAgB,EAE1DD,IACAA,EAAmB,MAAM,QAAU,QAGnCC,IACAA,EAAc,MAAM,QAAU,SAI9B,KAAK,UACL,WAAW,IAAM,CACTA,GACAA,EAAc,eAAe,CAAE,SAAU,SAAU,MAAO,QAAS,GAExE,EAAE,CACT,CAGJ,aAAoB,CACV,MAAAA,EAAgB,SAAS,eAAe,gBAAgB,EACxDC,EAAa,SAAS,eAAe,qBAAqB,EAE5DD,IACAA,EAAc,MAAM,QAAU,QAG9BC,IACAA,EAAW,MAAM,QAAU,QAC/B,CAGJ,aAAatD,EAAkB,kBAAyB,CAC9C,MAAAsD,EAAa,SAAS,eAAe,qBAAqB,EAC1DF,EAAqB,SAAS,eAAe,qBAAqB,EAClEG,EAAmB,SAAS,eAAe,mBAAmB,EAEhED,IACAA,EAAW,MAAM,QAAU,QAG3BF,IACAA,EAAmB,MAAM,QAAU,SAGnCG,IACAA,EAAiB,YAAcvD,EACnC,CAGJ,cAAqB,CACX,MAAAoD,EAAqB,SAAS,eAAe,qBAAqB,EAClEE,EAAa,SAAS,eAAe,qBAAqB,EAE5DF,IACAA,EAAmB,MAAM,QAAU,QAGnCE,IACAA,EAAW,MAAM,QAAU,QAC/B,CAGJ,uBAAuBtD,EAAuB,CACpC,MAAAuD,EAAmB,SAAS,eAAe,mBAAmB,EAChEA,IACAA,EAAiB,YAAcvD,EACvB,QAAA,IAAI,qBAAsBA,CAAO,EAC7C,CAGJ,2BAA2BY,EAAgCmC,EAA6C,CAC9F,MAAAtE,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,iBAEhB,MAAA+E,EAAWT,GAAanC,EAAO,IACjCmC,EAAU,gBAAgBnC,EAAO,GAAG,EACpCA,EAAO,KAAO,GAGZ6C,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,IAAMD,EACNC,EAAA,IAAM7C,EAAO,MAAQ,SACzB6C,EAAI,QAAU,OAEdA,EAAI,QAAU,IAAY,CACtBA,EAAI,MAAM,QAAU,OACd,MAAAC,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,UAAY,cACrBA,EAAS,YAAc,uBACvBA,EAAS,MAAM,QAAU,OACzBA,EAAS,MAAM,UAAY,SAC3BA,EAAS,MAAM,MAAQ,OACvBjF,EAAU,YAAYiF,CAAQ,CAClC,EAEM,MAAAC,EAAQ,SAAS,cAAc,IAAI,EACnC,OAAAA,EAAA,YAAc/C,EAAO,MAAQ,iBAEnCnC,EAAU,YAAYkF,CAAK,EAC3BlF,EAAU,YAAYgF,CAAG,EAElBhF,CAAA,CAGX,eAAsB,CACZ,MAAAuE,EAAmB,SAAS,eAAe,oBAAoB,EAC/DE,EAAiB,SAAS,eAAe,iBAAiB,EAE5DF,IACAA,EAAiB,IAAM,IAGvBE,IACAA,EAAe,UAAY,GAC/B,CAGJ,kBAA4B,CAClB,MAAAG,EAAgB,SAAS,eAAe,gBAAgB,EAC9D,OAAOA,IAAkB,MAAQA,EAAc,MAAM,UAAY,MAAA,CAGrE,mBAA6B,CACnB,MAAAD,EAAqB,SAAS,eAAe,qBAAqB,EACxE,OAAOA,IAAuB,MAAQA,EAAmB,MAAM,UAAY,MAAA,CAG/E,aAAoB,CAChB,KAAK,YAAY,EACjB,KAAK,aAAa,EAClB,KAAK,cAAc,CAAA,CAE3B,CC9KO,MAAMQ,CAAoB,CAK7B,YAAYC,EAA0C9F,EAAoB,GAAO,CAJjFnB,EAAA,4BACAA,EAAA,iBACAA,EAAA,iBAGI,KAAK,oBAAsBiH,EAC3B,KAAK,SAAW9F,EACX,KAAA,aAAe,GAAI,CAG5B,sBAAsBqD,EAAwB0C,EAA6B,CAClE,KAAA,mBAAmBA,EAAS,QAAQ,EACzC,KAAK,kBAAkBA,CAAQ,EAC/B,KAAK,sBAAsB,EAC3B,KAAK,uBAAuB1C,CAAS,EAEjC,KAAK,UACA,KAAA,oBAAoBA,EAAW0C,CAAQ,CAChD,CAGJ,mBAAmBC,EAAmC,CAC5C,MAAAC,EAA8BnE,GAAc,CAC1CA,KAAK,eAAe,EACxB,KAAK,oBAAoB,KAAK,EAC9B,KAAK,oBAAoB,YAAY,CACzC,EAESkE,EAAA,iBAAiB,QAASC,CAAY,EAE3C,KAAK,UACID,EAAA,iBAAiB,WAAYC,CAA6B,CACvE,CAGJ,kBAAkBF,EAA6B,CAErC,MAAAG,EAAkCpE,GAAc,CAC9CA,KAAK,eAAe,EACxB,KAAK,oBAAoB,eAAe,EACxC,KAAK,oBAAoB,YAAY,CACzC,EAESiE,EAAA,aAAa,iBAAiB,QAASG,CAAgB,EAE5D,KAAK,UACIH,EAAA,aAAa,iBAAiB,WAAYG,CAAiC,EAIlF,MAAAC,EAAiCrE,GAAc,CAC7CA,KAAK,eAAe,EACxB,KAAK,oBAAoB,eAAe,EACxC,KAAK,oBAAoB,YAAY,CACzC,EAESiE,EAAA,kBAAkB,iBAAiB,QAASI,CAAe,EAEhE,KAAK,UACIJ,EAAA,kBAAkB,iBAAiB,WAAYI,CAAgC,EAItF,MAAAC,EAA+BtE,GAAc,CAC3CA,KAAK,eAAe,EACxB,KAAK,oBAAoB,eAAe,EACxC,KAAK,oBAAoB,YAAY,CACzC,EAESiE,EAAA,kBAAkB,iBAAiB,QAASK,CAAa,EAE9D,KAAK,UACIL,EAAA,kBAAkB,iBAAiB,WAAYK,CAA8B,EAIpF,MAAAC,EAAmCvE,GAAc,CAC/CA,KAAK,eAAe,EACfiE,EAAA,cAAc,MAAM,QAAU,OAC9BA,EAAA,WAAW,MAAM,QAAU,QACpC,KAAK,oBAAoB,YAAY,CACzC,EAESA,EAAA,oBAAoB,iBAAiB,QAASM,CAAiB,EAEpE,KAAK,UACIN,EAAA,oBAAoB,iBAAiB,WAAYM,CAAkC,CAChG,CAGJ,uBAA8B,CACpB,MAAAC,EAAiBxE,GAA2B,CAC1CA,EAAE,MAAQ,UAAY,KAAK,oBAAoB,WAC/C,KAAK,oBAAoB,KAAK,CAEtC,EAES,SAAA,iBAAiB,UAAWwE,CAAa,EAC7C,KAAA,SAAS,IAAI,SAAUA,CAA6B,CAAA,CAG7D,uBAAuBjD,EAA8B,CAE3C,MAAAkD,EAAuBzE,GAAwB,CAC7CA,EAAE,SAAWuB,GACb,KAAK,oBAAoB,KAAK,CAEtC,EAEUA,EAAA,iBAAiB,QAASkD,CAAmB,EAClD,KAAA,SAAS,IAAI,eAAgBA,CAAmC,CAAA,CAGzE,oBAAoBlD,EAAwBmD,EAA8B,CAEhE,MAAAC,EAAqB3E,GAAwB,CAC3CA,EAAE,SAAWuB,IACbvB,EAAE,eAAe,EACjB,KAAK,oBAAoB,KAAK,EAEtC,EAEAuB,EAAU,iBAAiB,aAAcoD,EAAmB,CAAE,QAAS,GAAO,EACzE,KAAA,SAAS,IAAI,aAAcA,CAAiC,EAGvDpD,EAAA,iBAAiB,YAAcvB,GAAkB,CACvDA,EAAE,gBAAgB,CAAA,EACnB,CAAE,QAAS,GAAM,EAGd,MAAAgC,EAAeT,EAAU,cAAc,gBAAgB,EACzDS,IACaA,EAAA,iBAAiB,aAAc,IAAM,CAAA,EAAI,CAAE,QAAS,GAAM,EAC1DA,EAAA,iBAAiB,YAAa,IAAM,CAAA,EAAI,CAAE,QAAS,GAAM,GAI1E,KAAK,0BAA0B,CAAA,CAGnC,2BAAkC,CACxB,MAAA4C,EAAiB5E,GAAwB,CACvC,KAAK,oBAAoB,WACzBA,EAAE,eAAe,CAEzB,EAEA,SAAS,KAAK,iBAAiB,YAAa4E,EAAe,CAAE,QAAS,GAAO,EACxE,KAAA,SAAS,IAAI,gBAAiBA,CAA6B,CAAA,CAGpE,oBAAoBxD,EAAeyD,EAA+C,CAC1EA,GAAmB,OAAOA,EAAgB,sBAAyB,YACnEA,EAAgB,qBAAqBzD,CAAK,CAC9C,CAGJ,yBACIS,EACAjD,EACA+C,EACI,CACE,MAAAG,EAA+B9B,GAAc,CAC3CA,KAAK,eAAe,EACxBpB,EAAU,OAAO,EACG+C,EAAA,EACpB,KAAK,oBAAoB,YAAY,CACzC,EAEUE,EAAA,iBAAiB,QAASC,CAAa,EAE7C,KAAK,WACKD,EAAA,iBAAiB,WAAYC,CAA8B,EAGrDlD,EAAU,iBAAmC,qBAAqB,EAC1E,QAAkBmD,GAAA,CACfA,EAAA,iBAAiB,aAAc,IAAM,CACjCA,EAAA,UAAU,IAAI,eAAe,CAAA,CACvC,EAEMA,EAAA,iBAAiB,WAAY,IAAM,CAC/BA,EAAA,UAAU,OAAO,eAAe,CAAA,CAC1C,CAAA,CACJ,EACL,CAGJ,wBAAwB+C,EAAkBC,EAA0C,GAAU,CACnF,OAAA,QAAQA,CAAQ,EAAE,QAAQ,CAAC,CAACC,EAAOC,CAAO,IAAM,CAC/C,OAAOA,GAAY,aACXH,EAAA,iBAAiBE,EAAOC,CAAO,EAGlC,KAAK,SAAS,IAAIH,CAAO,GAC1B,KAAK,SAAS,IAAIA,EAAS,IAAI,GAAK,EAEhB,KAAK,SAAS,IAAIA,CAAO,EACjC,IAAIE,EAAOC,CAAuB,EACtD,CACH,CAAA,CAGL,2BAA2BH,EAAwB,CAC3C,KAAK,SAAS,IAAIA,CAAO,IACD,KAAK,SAAS,IAAIA,CAAO,EACjC,QAAQ,CAACG,EAASD,IAAU,CAChCF,EAAA,oBAAoBE,EAAOC,CAAwB,CAAA,CAC9D,EACI,KAAA,SAAS,OAAOH,CAAO,EAChC,CAGJ,SAAgB,CAEZ,KAAK,SAAS,QAAQ,CAACG,EAASC,IAAQ,CAChC,GAAA,OAAOA,GAAQ,SAEf,OAAQA,EAAK,CACT,IAAK,SACQ,SAAA,oBAAoB,UAAWD,CAAwB,EAChE,MACJ,IAAK,gBACQ,SAAA,KAAK,oBAAoB,YAAaA,CAAwB,EACvE,KAAA,MAEDC,aAAe,UAElBD,aAAmB,IACXA,EAAA,QAAQ,CAACE,EAAaH,IAAU,CAChCE,EAAA,oBAAoBF,EAAOG,CAA4B,CAAA,CAC9D,GAGGD,EAAA,oBAAoB,QAASD,CAAwB,EACrDC,EAAA,oBAAoB,WAAYD,CAAwB,EACxDC,EAAA,oBAAoB,aAAcD,CAAwB,EAC1DC,EAAA,oBAAoB,YAAaD,CAAwB,GAErE,CACH,EAED,KAAK,SAAS,MAAM,CAAA,CAIxB,0BACIH,EACAM,EACAH,EACAI,EAAmC,CAAA,EACtB,CACP,MAAAC,EAAkBtF,GAAmB,CACnC,KAAK,UAAYA,EAAE,OAAS,YAC5BA,EAAE,eAAe,EAErBiF,EAAQjF,CAAC,CACb,EAEQ,OAAA8E,EAAA,iBAAiBM,EAAWE,EAAgBD,CAAO,EAEvD,KAAK,UAAYD,IAAc,SACvBN,EAAA,iBAAiB,WAAYQ,EAAgBD,CAAO,EAI3D,KAAK,SAAS,IAAIP,CAAO,GAC1B,KAAK,SAAS,IAAIA,EAAS,IAAI,GAAK,EAEhB,KAAK,SAAS,IAAIA,CAAO,EACjC,IAAIM,EAAWE,CAA8B,EAEtDA,CAAA,CAIX,wBAAwBrB,EAAuBsB,EAAmD,CACzFA,IAGItB,EAAA,gBAAgB,iBAAiB,OAAQ,IAAM,CACpD,MAAM7E,EAAamG,EAAkB,mBACjCtB,EAAS,gBACTA,EAAS,iBACb,EAEI,CAAC7E,EAAW,SAAW6E,EAAS,gBAAgB,MAAM,OACtD,KAAK,eAAeA,EAAS,gBAAiB7E,EAAW,SAAW,EAAE,EAEjE,KAAA,gBAAgB6E,EAAS,eAAe,CACjD,CACH,EAGQA,EAAA,kBAAkB,iBAAiB,OAAQ,IAAM,CACtD,MAAM7E,EAAamG,EAAkB,mBACjCtB,EAAS,gBACTA,EAAS,iBACb,EAEI,CAAC7E,EAAW,SAAW6E,EAAS,kBAAkB,MAAM,OACxD,KAAK,eAAeA,EAAS,kBAAmB7E,EAAW,SAAW,EAAE,EAEnE,KAAA,gBAAgB6E,EAAS,iBAAiB,CACnD,CACH,EAAA,CAGL,eAAeuB,EAA+CrF,EAAuB,CNtUlF,IAAAP,EMuUC,KAAK,gBAAgB4F,CAAK,EAEpB,MAAAC,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,UAAY,cACrBA,EAAS,YAActF,EACvBsF,EAAS,MAAM,MAAQ,UACvBA,EAAS,MAAM,SAAW,OAC1BA,EAAS,MAAM,UAAY,OAE3B7F,EAAA4F,EAAM,aAAN,MAAA5F,EAAkB,aAAa6F,EAAUD,EAAM,aAC/CA,EAAM,MAAM,YAAc,SAAA,CAG9B,gBAAgBA,EAAqD,CNpVlE,IAAA5F,EMqVC,MAAM8F,GAAgB9F,EAAA4F,EAAM,aAAN,YAAA5F,EAAkB,cAAc,gBAClD8F,GACAA,EAAc,OAAO,EAEzBF,EAAM,MAAM,YAAc,EAAA,CAElC,CC7VO,MAAMG,CAAc,CAGvB,aAAc,CAFd5I,EAAA,sBAGI,KAAK,cAAgB,IAAA,CAGzB,cAAwB,CACZ,MAAA,iBAAkB,QAClB,UAAU,eAAiB,GAC1B,UAAkB,iBAAmB,GACtC,OAAO,WAAa,GAAA,CAGhC,aAAoB,CAEZ,OAAO,MAAQ,OAAO,KAAK,OACpB,OAAA,KAAK,MAAM,UAAU,OAAO,CACvC,CAGJ,kBAAkB6I,EAAexH,EAAe,UAAmB,CAC/D,OAAQA,EAAM,CACV,IAAK,QAGM,OADO,MAASwH,EAAQ,GAAM,uBACxB,QAAQ,CAAC,EAC1B,IAAK,OACL,IAAK,WACD,OAAO,SAASA,EAAM,SAAU,CAAA,EAAE,SAAS,EAC/C,QACI,OAAOA,EAAM,SAAS,CAAA,CAC9B,CAGJ,yBAAyB/G,EAAqBmC,EAAuB,IAAMC,EAAoB,IAAc,CACzG,OAAOD,EAAenC,EAAcoC,CAAA,CAGxC,wBAAwBC,EAA6B,CAE1C,MAAA,OAASA,EAAc,IAAM,KAAQ,EAAA,CAGhD,kBAAyB,CACjB,KAAK,gBACL,aAAa,KAAK,aAAa,EAC/B,KAAK,cAAgB,KACzB,CAGJ,aAAa4D,EAA6BO,EAAiC,GAAU,CAC5EP,IAEL,KAAK,iBAAiB,EAEjB,KAAA,cAAgB,WAAW,IAAM,CAC9B,GAAA,CACI,OAAOA,EAAQ,gBAAmB,YAClCA,EAAQ,eAAe,CACnB,SAAU,SACV,MAAO,QACP,GAAGO,CAAA,CACN,QAEAlD,EAAK,CACF,QAAA,KAAK,uBAAwBA,CAAG,CAAA,GAE7C,GAAG,EAAA,CAGV,iBAAiB0D,EAAiB,SAAkB,CAChD,MAAO,GAAGA,CAAM,IAAI,KAAK,IAAK,CAAA,IAAI,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,OAAO,EAAG,CAAC,CAAC,EAAA,CAG7E,SACIC,EACAC,EACAC,EAAqB,GACW,CAC5B,IAAAC,EACG,OAAA,YAA6BC,EAA2B,CAC3D,MAAMC,EAAQ,IAAY,CACZF,EAAA,KACLD,GAAgBF,EAAA,GAAGI,CAAI,CAChC,EACME,EAAUJ,GAAa,CAACC,EAC1BA,gBAAsBA,CAAO,EACvBA,EAAA,WAAWE,EAAOJ,CAAI,EAC5BK,GAAcN,EAAA,GAAGI,CAAI,CAC7B,CAAA,CAGJ,SAA4CJ,EAASO,EAAiD,CAC9F,IAAAC,EACJ,OAAO,YAAYJ,EAA2B,CACrCI,IACDR,EAAK,GAAGI,CAAI,EACCI,EAAA,GACF,WAAA,IAAMA,EAAa,GAAOD,CAAK,EAElD,CAAA,CAGJ,cAAcE,EAAqBC,EAA2B,KAAc,CACpE,GAAA,OAAOD,GAAU,SAAiB,MAAA,GAElC,IAAAE,EAAYF,EAAM,KAAK,EAEvB,OAAAC,GAAaC,EAAU,OAASD,IACpBC,EAAAA,EAAU,UAAU,EAAGD,CAAS,GAGzCC,CAAA,CAGX,YAAYC,EAAsB,CAC1B,GAAA,CACA,WAAI,IAAIA,CAAG,EACJ,EAAA,MACH,CACG,MAAA,EAAA,CACX,CAGJ,eAAeC,EAAuB,CAC9B,GAAAA,IAAU,EAAU,MAAA,UAExB,MAAMC,EAAI,KACJC,EAAQ,CAAC,QAAS,KAAM,KAAM,IAAI,EAClC,EAAI,KAAK,MAAM,KAAK,IAAIF,CAAK,EAAI,KAAK,IAAIC,CAAC,CAAC,EAElD,OAAO,YAAYD,EAAQ,KAAK,IAAIC,EAAG,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAI,IAAMC,EAAM,CAAC,CAAA,CAG1E,UAAaC,EAAW,CACpB,GAAIA,IAAQ,MAAQ,OAAOA,GAAQ,SAAiB,OAAAA,EACpD,GAAIA,aAAe,KAAM,OAAO,IAAI,KAAKA,EAAI,SAAS,EAClD,GAAAA,aAAe,MAAc,OAAAA,EAAI,IAAYC,GAAA,KAAK,UAAUA,CAAI,CAAC,EACjE,GAAA,OAAOD,GAAQ,SAAU,CACzB,MAAME,EAAiB,CAAC,EACxB,cAAO,KAAKF,CAAG,EAAE,QAAe5B,GAAA,CAC5B8B,EAAU9B,CAAG,EAAI,KAAK,UAAW4B,EAAY5B,CAAG,CAAC,CAAA,CACpD,EACM8B,CAAA,CAEJ,OAAAF,CAAA,CAGX,cACIG,EACAC,EAAoB,GACpBC,EAAkB,GAClBC,EAAqC,GAC1B,CACL,MAAAtC,EAAU,SAAS,cAAcmC,CAAG,EAE1C,OAAIC,IACApC,EAAQ,UAAYoC,GAGpBC,IACArC,EAAQ,YAAcqC,GAGnB,OAAA,QAAQC,CAAU,EAAE,QAAQ,CAAC,CAAClC,EAAKU,CAAK,IAAM,CACzCd,EAAA,aAAaI,EAAKU,CAAK,CAAA,CAClC,EAEMd,CAAA,CAGX,cAAcA,EAAmC,CACzCA,GAAWA,EAAQ,YACXA,EAAA,WAAW,YAAYA,CAAO,CAC1C,CAGJ,gBAAgBvG,EAAYgD,EAAoC,SAA8B,CACtF,MAAA,mBAAoBA,GAAaA,EAAU,eACpCA,EAAU,eAAehD,CAAE,EAE/BgD,EAAU,cAAc,IAAIhD,CAAE,EAAE,CAAA,CAG3C,oBAAoB2I,EAAmB3F,EAAoC,SAAyB,CAC5F,MAAA,2BAA4BA,GAAaA,EAAU,uBAC5C,MAAM,KAAKA,EAAU,uBAAuB2F,CAAS,CAAC,EAE1D,MAAM,KAAK3F,EAAU,iBAAiB,IAAI2F,CAAS,EAAE,CAAC,CAAA,CAGjE,qBACIpC,EACAE,EACAC,EACAI,EAAmC,CAAA,EAC5B,CACP,OAAIP,GAAW,OAAOA,EAAQ,kBAAqB,YACvCA,EAAA,iBAAiBE,EAAOC,EAASI,CAAO,EACzC,IAEJ,EAAA,CAGX,wBACIP,EACAE,EACAC,EACAI,EAAgC,CAAA,EACzB,CACP,OAAIP,GAAW,OAAOA,EAAQ,qBAAwB,YAC1CA,EAAA,oBAAoBE,EAAOC,EAASI,CAAO,EAC5C,IAEJ,EAAA,CAGX,qBAAqBP,EAOnB,CACE,GAAI,CAACA,EAAgB,MAAA,CAAE,MAAO,EAAG,OAAQ,EAAG,IAAK,EAAG,KAAM,EAAG,OAAQ,EAAG,MAAO,CAAE,EAE3E,MAAAuC,EAAOvC,EAAQ,sBAAsB,EACpC,MAAA,CACH,MAAOuC,EAAK,MACZ,OAAQA,EAAK,OACb,IAAKA,EAAK,IACV,KAAMA,EAAK,KACX,OAAQA,EAAK,OACb,MAAOA,EAAK,KAChB,CAAA,CAGJ,iBAAiBvC,EAAsC,CAC/C,GAAA,CAACA,EAAgB,MAAA,GAEf,MAAA3G,EAAQ,OAAO,iBAAiB2G,CAAO,EAC7C,OAAO3G,EAAM,UAAY,QAClBA,EAAM,aAAe,UACrBA,EAAM,UAAY,GAAA,CAG7B,YAAYoD,EAA+B+F,EAAkB,GAAY,CAChE/F,IAED+F,GAAU/F,EAAU,SACpBA,EAAU,SAAS,CACf,IAAK,EACL,SAAU,QAAA,CACb,EAEDA,EAAU,UAAY,EAC1B,CAGJ,aAAauD,EAA6BoC,EAAyB,CAC3DpC,GAAWA,EAAQ,WACXA,EAAA,UAAU,IAAIoC,CAAS,CACnC,CAGJ,gBAAgBpC,EAA6BoC,EAAyB,CAC9DpC,GAAWA,EAAQ,WACXA,EAAA,UAAU,OAAOoC,CAAS,CACtC,CAGJ,gBAAgBpC,EAA6BoC,EAAyB,CAC9DpC,GAAWA,EAAQ,WACXA,EAAA,UAAU,OAAOoC,CAAS,CACtC,CAGJ,aAAapC,EAA6BoC,EAA4B,CAC3D,OAAApC,IAAY,MAAQA,EAAQ,YAAc,QAAaA,EAAQ,UAAU,SAASoC,CAAS,CAAA,CAGtG,aAAapC,EAA6ByC,EAAkB3B,EAAqB,CACzEd,GAAWA,EAAQ,QAClBA,EAAQ,MAAcyC,CAAQ,EAAI3B,EACvC,CAGJ,aAAad,EAA6ByC,EAAiC,CACnE,OAAAzC,GAAWA,EAAQ,MACXA,EAAQ,MAAcyC,CAAQ,EAEnC,IAAA,CAGX,YAAYzC,EAAmC,CACvCA,GACKA,EAAQ,YACjB,CAGJ,eAAe0C,EAAkBvB,EAAkB,IAAwB,CACvE,OAAO,IAAI,QAAQ,CAAC9I,EAASsK,IAAW,CAC9B,MAAA3C,EAAU,SAAS,cAAc0C,CAAQ,EAC/C,GAAI1C,EAAS,CACT3H,EAAQ2H,CAAO,EACf,MAAA,CAGJ,MAAM4C,EAAW,IAAI,iBAAiB,CAACC,EAAYC,IAAQ,CACjD9C,MAAAA,EAAU,SAAS,cAAc0C,CAAQ,EAC3C1C,IACA8C,EAAI,WAAW,EACfzK,EAAQ2H,CAAO,EACnB,CACH,EAEQ4C,EAAA,QAAQ,SAAS,KAAM,CAC5B,UAAW,GACX,QAAS,EAAA,CACZ,EAED,WAAW,IAAM,CACbA,EAAS,WAAW,EACpBD,EAAO,IAAI,MAAM,WAAWD,CAAQ,qBAAqBvB,CAAO,IAAI,CAAC,GACtEA,CAAO,CAAA,CACb,CAAA,CAGL,MAAM,QAAQ4B,EAA0B5B,EAAkB,IAAM6B,EAAmB,IAAuB,CAChG,MAAAC,EAAY,KAAK,IAAI,EAE3B,KAAO,KAAK,MAAQA,EAAY9B,GAAS,CACrC,GAAI4B,IACO,MAAA,GAEX,MAAM,IAAI,QAAQ1K,GAAW,WAAWA,EAAS2K,CAAQ,CAAC,CAAA,CAGxD,MAAA,IAAI,MAAM,kCAAkC,CAAA,CAGtD,SAAgB,CACZ,KAAK,iBAAiB,CAAA,CAE9B,CC3TO,MAAME,CAAoB,CAiC7B,YAAYC,EAAiDC,EAAgD,CAhC7GnL,EAAA,4BACAA,EAAA,oBACAA,EAAA,kBACAA,EAAA,kBACAA,EAAA,qBACAA,EAAA,2BACAA,EAAA,4BACAA,EAAA,mBACAA,EAAA,gBACAA,EAAA,iBACAA,EAAA,qBACAA,EAAA,0BACAA,EAAA,0BACAA,EAAA,wBACAA,EAAA,uBACAA,EAAA,4BACAA,EAAA,kBACAA,EAAA,wBACAA,EAAA,0BACAA,EAAA,2BACAA,EAAA,qBACAA,EAAA,0BACAA,EAAA,2BACAA,EAAA,yBACAA,EAAA,mBACAA,EAAA,sBACAA,EAAA,yBACAA,EAAA,uBACAA,EAAA,0BACAA,EAAA,4BACAA,EAAA,iBAGI,KAAK,oBAAsBkL,EAC3B,KAAK,YAAcC,EACd,KAAA,UAAY,IAAIpL,EACrB,KAAK,UAAY,GACjB,KAAK,aAAe,GACpB,KAAK,mBAAqB,KAC1B,KAAK,oBAAsB,CAAC,EAC5B,KAAK,WAAa,KAGb,KAAA,QAAU,IAAI6I,EACd,KAAA,SAAW,KAAK,QAAQ,aAAa,EAG1C,KAAK,aAAe,IAAI1H,EAAa,KAAK,QAAQ,EAClD,KAAK,kBAAoB,IAAIO,EAAkB,KAAK,QAAQ,EACvD,KAAA,kBAAoB,IAAIiC,EAC7B,KAAK,gBAAkB,IAAIY,EAAgB,KAAK,SAAU,KAAK,YAA+B,EAC9F,KAAK,eAAiB,IAAI0B,EAAe,KAAK,QAAQ,EACtD,KAAK,oBAAsB,IAAIgB,EAAoB,KAAM,KAAK,QAAQ,EAGtE,KAAK,UAAY,KACjB,KAAK,gBAAkB,KACvB,KAAK,kBAAoB,KACzB,KAAK,mBAAqB,KAC1B,KAAK,aAAe,KACpB,KAAK,kBAAoB,KACzB,KAAK,mBAAqB,KAC1B,KAAK,iBAAmB,KACxB,KAAK,WAAa,KAClB,KAAK,cAAgB,KACrB,KAAK,iBAAmB,KACxB,KAAK,eAAiB,KACtB,KAAK,kBAAoB,KACzB,KAAK,oBAAsB,KAC3B,KAAK,SAAW,KAEhB,KAAK,SAAS,EACd,KAAK,mBAAmB,EACxB,KAAK,qBAAqB,CAAC,CAAA,CAG/B,UAAiB,CAEb,KAAK,aAAa,aAAa,EAGzB,MAAAxC,EAAY,KAAK,gBAAgB,oBAAoB,EACjDA,EAAA,UAAY,KAAK,gBAAgB,mBAAmB,EAC9D,KAAK,UAAYA,EAGR,SAAA,KAAK,YAAYA,CAAS,EAGnC,KAAK,yBAAyB,EAG1B,KAAK,UACL,KAAK,wBAAwB,CACjC,CAGJ,0BAAiC,CACxB,KAAA,gBAAkB,SAAS,eAAe,aAAa,EACvD,KAAA,kBAAoB,SAAS,eAAe,oBAAoB,EAChE,KAAA,mBAAqB,SAAS,eAAe,qBAAqB,EAClE,KAAA,aAAe,SAAS,eAAe,gBAAgB,EACvD,KAAA,kBAAoB,SAAS,eAAe,qBAAqB,EACjE,KAAA,mBAAqB,SAAS,eAAe,qBAAqB,EAClE,KAAA,iBAAmB,SAAS,eAAe,mBAAmB,EAC9D,KAAA,WAAa,SAAS,eAAe,qBAAqB,EAC1D,KAAA,cAAgB,SAAS,eAAe,gBAAgB,EACxD,KAAA,iBAAmB,SAAS,eAAe,oBAAoB,EAC/D,KAAA,eAAiB,SAAS,eAAe,iBAAiB,EAC1D,KAAA,kBAAoB,SAAS,eAAe,sBAAsB,EAClE,KAAA,oBAAsB,SAAS,eAAe,uBAAuB,EACrE,KAAA,SAAW,SAAS,eAAe,sBAAsB,CAAA,CAGlE,yBAAgC,CACxB,KAAK,WACA,KAAA,gBAAgB,gBAAgB,KAAK,SAAS,EAEnD,KAAK,mBAAqB,KAAK,oBAC/B,KAAK,kBAAkB,uBAAuB,KAAK,kBAAmB,KAAK,kBAAkB,CACjG,CAGJ,oBAA2B,CACvB,GAAI,CAAC,KAAK,WAAa,CAAC,KAAK,UAAY,CAAC,KAAK,cAAgB,CAAC,KAAK,mBACjE,CAAC,KAAK,mBAAqB,CAAC,KAAK,qBAAuB,CAAC,KAAK,YAC9D,CAAC,KAAK,eAAiB,CAAC,KAAK,iBAAmB,CAAC,KAAK,kBACtD,OAGJ,MAAM0C,EAAW,CACb,SAAU,KAAK,SACf,aAAc,KAAK,aACnB,kBAAmB,KAAK,kBACxB,kBAAmB,KAAK,kBACxB,oBAAqB,KAAK,oBAC1B,WAAY,KAAK,WACjB,cAAe,KAAK,cACpB,gBAAiB,KAAK,gBACtB,kBAAmB,KAAK,iBAC5B,EAEA,KAAK,oBAAoB,sBAAsB,KAAK,UAAWA,CAAQ,EACvE,KAAK,oBAAoB,wBAAwBA,EAAU,KAAK,iBAAiB,CAAA,CAGrF,gBAAuB,CACf,GAAA,CAAC,KAAK,mBAAoB,OAExB,MAAArF,EAAY,KAAK,gBAAgB,eACnC,KAAK,mBACL,KAAK,qBAAqB,KAAK,IAAI,EACnC,KAAK,oBAAoB,KAAK,IAAI,EAClC,KAAK,YAAY,KAAK,IAAI,CAC9B,EAGA,GAAI,KAAK,SAAU,CACT,MAAAI,EAAaJ,EAAU,cAAmC,qCAAqC,EACjGI,GACK,KAAA,kBAAkB,oBAAoBA,EAAY,GAAG,CAC9D,CACJ,CAGJ,qBAAqBoC,EAAqB,CACjC,KAAA,gBAAgB,qBAAqBA,CAAK,CAAA,CAGnD,qBAA4B,CACnB,KAAK,oBACL,KAAA,gBAAgB,oBAAoB,KAAK,kBAAkB,CAAA,CAGpE,MAAM,gBAAgC,CR5MnC,IAAAxB,EAAA4B,EQ8MC,GAAI,CAAC,KAAK,iBAAmB,CAAC,KAAK,kBAAmB,OAEhD,MAAA2G,EAAmB,KAAK,kBAAkB,mBAC5C,KAAK,gBACL,KAAK,iBACT,EAEI,GAAA,CAACA,EAAiB,QAAS,CACtB,KAAA,kBAAkB,gBAAgBA,EAAiB,SAAW,oBAAqB,KAAK,YAAY,KAAK,IAAI,CAAoB,EACtI,MAAA,CAGA,GAAA,CAAC,KAAK,mBAAoB,OAE9B,MAAMlJ,EAAe,KAAK,mBAAmB,uBAAuB,cAAc,EAC5EmJ,EAAmB,KAAK,kBAAkB,oBAAoBnJ,CAAY,EAE5E,GAAA,CAACmJ,EAAiB,QAAS,CACtB,KAAA,kBAAkB,gBAAgBA,EAAiB,SAAW,2BAA4B,KAAK,YAAY,KAAK,IAAI,CAAoB,EAC7I,MAAA,CAIJ,KAAM,CAAE,QAAAlJ,EAAS,OAAAC,GAAW,KAAK,kBAAkB,kBAAkBF,CAAY,EAE7E,GAAAE,EAAO,OAAS,EAAG,CACd,KAAA,kBAAkB,gBAAgBA,EAAO,CAAC,EAAG,KAAK,YAAY,KAAK,IAAI,CAAoB,EAChG,MAAA,CAIC,KAAA,eAAe,aAAa,iBAAiB,EAClD,KAAK,aAAe,GAEhB,GAAA,CAGA,GADK,KAAA,eAAe,uBAAuB,sBAAsB,EAC7D,CAAC,KAAK,iBAAmB,CAAC,KAAK,kBACzB,MAAA,IAAI,MAAM,+BAA+B,EAG7C,MAAAkJ,EAAmC,MAAM,KAAK,UAAU,eAC1D,KAAK,gBAAgB,MAAM,KAAK,EAChC,KAAK,kBAAkB,MAAM,KAAK,CACtC,EAEA,GAAI,CAACA,EAAe,SAAW,GAACzI,EAAAyI,EAAe,cAAf,MAAAzI,EAA4B,QACxD,MAAM,IAAI,MAAMyI,EAAe,SAAW,2BAA2B,EAGpE,KAAA,mBAAqBA,EAAe,YAAY,CAAC,EAGtD,KAAK,oBAAsB,CAAC,EAC5B,QAASjG,EAAI,EAAGA,EAAIlD,EAAQ,OAAQkD,IAAK,CAC/B,MAAArB,EAAS7B,EAAQkD,CAAC,EACxB,KAAK,eAAe,uBAChB,qBAAqBA,EAAE,CAAC,OAAOlD,EAAQ,MAAM,KAAK6B,EAAO,IAAI,KACjE,EAEM,MAAAuH,EAAmC,MAAM,KAAK,UAAU,eAAevH,EAAO,KAAMA,EAAO,WAAW,EAExGuH,EAAe,WAAW9G,EAAA8G,EAAe,cAAf,MAAA9G,EAA4B,SACtD,KAAK,oBAAoB,KAAK,CAC1B,KAAMT,EAAO,KACb,IAAKuH,EAAe,YAAY,CAAC,CAAA,CACpC,CACL,CAIE,MAAAC,EAAkB,SAAS,eAAe,YAAY,EACtD7H,EAAY6H,EAAkBA,EAAgB,MAAQ,IACvD,KAAA,WAAa,KAAK,kBAAkB,iBACrC,KAAK,gBAAgB,MAAM,KAAK,EAChC7H,EACA,KAAK,mBACLxB,EAAQ,IAAI,CAAC6B,EAAQqB,IAAO,CR3RrC,IAAAxC,EQ2RqC,OACxB,GAAGmB,EACH,aAAYnB,EAAA,KAAK,oBAAoBwC,CAAC,IAA1B,YAAAxC,EAA6B,MAAO,IAAA,EAClD,CACN,EAGA,KAAK,eAAe,kBAChB,KAAK,mBACL,KAAK,oBACL,KAAK,SACT,QAEKlC,EAAO,CACZ,MAAMJ,EAAeI,aAAiB,MAAQA,EAAM,QAAU,OAAOA,CAAK,EAClE,QAAA,MAAM,2BAA4BA,CAAK,EAC/C,KAAK,kBAAkB,gBACnB,8BAA8BJ,CAAY,GAC1C,KAAK,YAAY,KAAK,IAAI,CAC9B,EACA,KAAK,eAAe,aAAa,CAAA,CAGrC,KAAK,aAAe,EAAA,CAGxB,gBAAuB,CRrTpB,IAAAsC,EQsTK,GAAA,CAAC,KAAK,WAAY,CAClB,KAAK,kBAAkB,gBACnB,4DACA,KAAK,YAAY,KAAK,IAAI,CAC9B,EACA,MAAA,CAGA,GAAA,CACI,GAAA,CAAC,KAAK,oBACA,MAAA,IAAI,MAAM,qCAAqC,EAKzD,GAAI,CAFY,KAAK,oBAAoB,gBAAgB,KAAK,UAAU,EAG9D,MAAA,IAAI,MAAM,6BAA6B,EAGjD,KAAK,KAAK,GAENA,EAAA,KAAK,cAAL,MAAAA,EAAkB,eAClB,KAAK,YAAY,eAAe,KAAK,WAAW,EAAE,EAElD,QAAQ,MAAM,oDAAoD,QAGjElC,EAAO,CACZ,MAAMJ,EAAeI,aAAiB,MAAQA,EAAM,QAAU,OAAOA,CAAK,EAClE,QAAA,MAAM,oCAAqCA,CAAK,EACxD,KAAK,kBAAkB,gBACnB,sCAAsCJ,CAAY,GAClD,KAAK,YAAY,KAAK,IAAI,CAC9B,CAAA,CACJ,CAGJ,aAAoB,CAChB,KAAK,QAAQ,YAAY,CAAA,CAG7B,MAAa,CACJ,KAAK,YAEV,KAAK,oBAAoB,EACpB,KAAA,UAAU,MAAM,QAAU,OAC/B,KAAK,UAAY,GAGjB,KAAK,eAAe,YAAY,EAChC,KAAK,YAAY,EAGb,KAAK,SACL,KAAK,gBAAgB,EAErB,KAAK,iBAAiB,EAC1B,CAGJ,iBAAwB,CAChB,GAAA,CAAC,KAAK,UAAW,OACrB,MAAM0E,EAAe,KAAK,UAAU,cAA2B,gBAAgB,EAC3EA,IACK,KAAA,QAAQ,YAAYA,CAAY,EACrC,KAAK,QAAQ,aAAaA,EAAc,YAAa,MAAM,EAC3D,KAAK,QAAQ,aAAaA,EAAc,0BAA2B,OAAO,EAC1E,KAAK,QAAQ,aAAaA,EAAc,qBAAsB,SAAS,GAG3E,KAAK,QAAQ,aAAa,SAAS,KAAM,YAAY,EAGrD,WAAW,IAAM,CACT,KAAK,iBACL,KAAK,gBAAgB,MAAM,GAEhC,GAAG,CAAA,CAGV,kBAAyB,CACrB,WAAW,IAAM,CACT,KAAK,iBACL,KAAK,gBAAgB,MAAM,GAEhC,GAAG,CAAA,CAGV,MAAa,CACL,CAAC,KAAK,WAAa,KAAK,eAE5B,KAAK,oBAAoB,EACpB,KAAA,UAAU,MAAM,QAAU,OAC/B,KAAK,UAAY,GACjB,KAAK,YAAY,EAGjB,WAAW,IAAM,CRvZlB,IAAApC,EAAA4B,EQwZS,IAAAA,GAAA5B,EAAA,OAAO,OAAP,YAAAA,EAAa,KAAb,MAAA4B,EAAiB,kBACjB,QAAQ,IAAI,+CAA+C,EACpD,OAAA,KAAK,GAAG,kBAAkB,eAAe,MAC7C,CACG,MAAAgH,EAAa,SAAS,eAAe,aAAa,EACpDA,GACAA,EAAW,MAAM,QAAU,QAC3B,QAAQ,IAAI,+DAA+D,GAE3E,QAAQ,KAAK,8DAA8D,CAC/E,GAEL,GAAG,EAAA,CAGV,QAAe,CACP,KAAK,UACL,KAAK,KAAK,EAEV,KAAK,KAAK,CACd,CAGJ,qBAA4B,CACpB,KAAK,eACL,KAAK,aAAe,GACpB,KAAK,eAAe,aAAa,GAGrC,KAAK,QAAQ,iBAAiB,EAC9B,KAAK,QAAQ,aAAa,SAAS,KAAM,gBAAiB,MAAM,EAE5D,KAAK,WACL,KAAK,QAAQ,aAAa,SAAS,KAAM,cAAe,MAAM,EAC9D,KAAK,QAAQ,gBAAgB,SAAS,KAAM,YAAY,EACnD,KAAA,QAAQ,YAAY,KAAK,SAAS,EAC3C,CAGJ,SAAgB,CR/bb,IAAA5I,EQgcC,KAAK,oBAAoB,EACzB,KAAK,oBAAoB,QAAQ,EACjC,KAAK,aAAa,QAAQ,EAC1B,KAAK,QAAQ,QAAQ,EACrB,KAAK,gBAAgB,QAAQ,GAEzBA,EAAA,KAAK,YAAL,MAAAA,EAAgB,YAChB,KAAK,UAAU,WAAW,YAAY,KAAK,SAAS,CACxD,CAER"}