var b=Object.defineProperty;var v=(d,t,e)=>t in d?b(d,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[t]=e;var u=(d,t,e)=>v(d,typeof t!="symbol"?t+"":t,e);import{g as x}from"./pathUtils-CUZPms8F.js";class E{constructor(){u(this,"isVisible");u(this,"audio");this.isVisible=!1,this.setupGameOverScreen()}getPath(t){return x(t)}setupGameOverScreen(){const t=document.createElement("div");t.id="game-over-container",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.backgroundColor="rgba(0, 0, 0, 0.8)",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="center",t.style.justifyContent="center",t.style.color="#fff",t.style.fontFamily="Courier New, monospace",t.style.zIndex="1000",t.style.display="none",document.body.appendChild(t);const e=document.createElement("h1");e.textContent="GAME OVER",e.style.fontSize="50px",e.style.color="#ff0000",e.style.textShadow="0 0 10px #ff0000",e.style.marginBottom="20px",t.appendChild(e);const a=document.createElement("p");a.id="game-over-message",a.textContent="Your ship was destroyed by asteroid collision",a.style.fontSize="18px",a.style.marginBottom="40px",t.appendChild(a),this.setupRestartButton(t);const n=document.createElement("div");n.id="resources-summary",n.style.marginTop="30px",n.style.fontSize="16px",n.style.textAlign="center",t.appendChild(n)}setupRestartButton(t){const e=document.createElement("button");e.id="restart-game-button",e.textContent="RESTART MISSION",e.style.backgroundColor="rgba(120, 220, 232, 0.2)",e.style.color="#fff",e.style.border="1px solid rgba(120, 220, 232, 0.5)",e.style.borderRadius="5px",e.style.padding="15px 30px",e.style.fontSize="20px",e.style.fontFamily='"Rajdhani", sans-serif',e.style.cursor="pointer",e.style.marginTop="30px",e.style.transition="all 0.2s ease",e.addEventListener("mouseover",()=>{e.style.backgroundColor="rgba(120, 220, 232, 0.4)",e.style.boxShadow="0 0 15px rgba(120, 220, 232, 0.5)"}),e.addEventListener("mouseout",()=>{e.style.backgroundColor="rgba(120, 220, 232, 0.2)",e.style.boxShadow="none"}),e.addEventListener("click",()=>{var n,s;(s=(n=this.audio)==null?void 0:n.playSound)==null||s.call(n,"uiClick");const a=document.createElement("div");a.textContent="Restarting mission...",a.style.color="rgba(120, 220, 232, 0.9)",a.style.marginTop="10px",t.appendChild(a),e.disabled=!0,e.style.opacity="0.5",e.style.cursor="default",window.game&&(window.game.difficultyManager&&(window.game.difficultyManager.gameTime=0,window.game.difficultyManager.currentLevel=1,console.log("Reset difficulty level to 1")),window.game.gameTime=0),setTimeout(()=>{location.reload()},500)}),t.appendChild(e)}show(t,e){console.log("GameOverScreen: Showing game over screen");const a=document.getElementById("game-over-container");a&&(a.style.display="flex");const n=document.getElementById("game-over-message"),s=e;if(n){let o="Your journey has ended.";if(typeof s=="object"&&(s!=null&&s.data)&&s.data.type)switch(s.data.type){case"FUEL_DEPLETED":o="Your ship drifted into the void after running out of fuel.";break;case"COLLISION_ASTEROID":o="Your ship was destroyed by an asteroid collision.";break;case"COLLISION_PLANET":o="Your ship crashed into a planet!";break;case"COMBAT_DEATH":o="Your ship was destroyed in combat.";break;case"SUN_DEATH":o="Your ship was incinerated by the sun's heat!";break;default:s.data.reason&&(o=s.data.reason)}else typeof s=="string"&&s.length>0&&(s.includes("fuel")?o="Your ship drifted into the void after running out of fuel.":s.includes("asteroid")?o="Your ship was destroyed by an asteroid collision.":s.includes("combat")?o="Your ship was destroyed in combat.":s.includes("sun")?o="Your ship was incinerated by the sun's heat!":s.includes("planet")?o="Your ship crashed into a planet!":o=s);n.textContent=o}let p=!1,m="00:00",y=0;const i=t;i&&i.hordeMode&&(p=i.hordeMode.active,m=i.hordeMode.survivalTime||"00:00",y=i.hordeMode.rawSurvivalTime||0);let r=i;i&&i.resources&&(console.log("GameOverScreen: Using nested resources data structure"),r=i.resources);const g=r&&r.iron?r.iron:0,f=r&&r.gold?r.gold:0,h=r&&r.platinum?r.platinum:0,c=document.getElementById("resources-summary");if(c)if(p){const o=Math.floor(y/1e3/60);let l="You fought valiantly against overwhelming odds.";o>=10?l="LEGENDARY! Few have survived the horde this long!":o>=5?l="IMPRESSIVE! You showed exceptional combat skills!":o>=3&&(l="Well done! You held back the horde longer than most!"),c.innerHTML=`
                    <div style="margin-bottom:20px; padding:15px; background-color:rgba(255,48,48,0.2); border:1px solid #ff3030; border-radius:5px;">
                        <h3 style="color:#ff3030; margin-top:0; text-shadow:0 0 5px rgba(255,48,48,0.5);">HORDE MODE</h3>
                        <p style="font-size:18px; font-weight:bold;">SURVIVED: <span style="color:#ff9999; text-shadow:0 0 5px rgba(255,48,48,0.3);">${m}</span></p>
                        <p>${l}</p>
                    </div>
                    <p>Resources collected:</p>
                    <p>IRON: ${g} | GOLD: ${f} | PLATINUM: ${h}</p>
                `}else c.innerHTML=`
                    <p>Resources collected:</p>
                    <p>IRON: ${g} | GOLD: ${f} | PLATINUM: ${h}</p>
                `;try{console.log("GameOverScreen: Attempting simple audio playback");const o=new Audio(this.getPath("sounds/effects/boink.wav"));o.volume=.8,setTimeout(()=>{o.play().catch(l=>{console.warn("GameOverScreen: Simple sound failed:",l)})},100)}catch(o){console.error("GameOverScreen: Error with simple sound approach:",o)}document.exitPointerLock&&document.exitPointerLock()}}export{E as GameOverScreen};
//# sourceMappingURL=gameOverScreen-BN38I_7h.js.map
