{"version":3,"file":"startScreen-CgaiDBdS.js","sources":["../../js/modules/ui/startScreen.ts"],"sourcesContent":["// startScreen.js - Manages the game's start screen UI\n\ntype StartScreenGame = {\n    startDocked?: () => void;\n    startIntroSequence?: () => void;\n    [key: string]: unknown;\n};\n\ntype StartScreenUI = unknown;\n\nexport class StartScreen {\n    game: StartScreenGame;\n    ui: StartScreenUI;\n    isVisible: boolean;\n\n    constructor(game: StartScreenGame, ui: StartScreenUI) {\n        this.game = game;\n        this.ui = ui;\n        this.isVisible = false;\n        this.setupStartScreen();\n    }\n\n    setupStartScreen(): void {\n        // Create start screen container\n        const startScreen = document.createElement('div');\n        startScreen.id = 'start-screen';\n        startScreen.className = 'start-screen';\n        startScreen.style.display = 'none';\n\n        // Add content to start screen\n        startScreen.innerHTML = `\n            <div class=\"start-screen-inner\">\n                <h1 class=\"game-title\">Solar System Asteroid Miner</h1>\n                <div class=\"button-container\">\n                    <button id=\"play-button\" class=\"start-button\">Play</button>\n                    <button id=\"how-to-play-button\" class=\"start-button\">How to Play</button>\n                </div>\n                <div class=\"version\">v0.5.8</div>\n            </div>\n            \n            <div id=\"how-to-play-modal\" class=\"modal\">\n                <div class=\"modal-content\">\n                    <h2>How to Play</h2>\n                    \n                    <div class=\"gameplay-section\">\n                        <h3>Game Overview</h3>\n                        <p>Welcome to Solar System Asteroid Miner! Your mission is to mine asteroids, collect resources, and upgrade your ship.</p>\n                        \n                        <h4>Core Objectives:</h4>\n                        <ul>\n                            <li><strong>Mining:</strong> Target asteroids (E key), then use your mining laser (R key) to extract resources.</li>\n                            <li><strong>Trading:</strong> Dock at stargates (Q key) to sell resources and purchase ship upgrades.</li>\n                            <li><strong>Combat:</strong> Defend yourself against enemy ships using your weapons.</li>\n                            <li><strong>Exploration:</strong> Travel between star systems through stargates to discover new resources.</li>\n                            <li><strong>Anomalies:</strong> Find and collect energy orbs from space anomalies for credits.</li>\n                            <li><strong>Defense:</strong> Deploy autonomous laser turrets (T key) to protect mining operations.</li>\n                        </ul>\n                        \n                        <h4>Horde Mode:</h4>\n                        <p>Work toward activating the ultimate challenge - Horde Mode:</p>\n                        <ul>\n                            <li><strong>Endless Survival:</strong> Face waves of increasingly difficult enemies that never stop coming.</li>\n                            <li><strong>Escalating Difficulty:</strong> Enemy health, damage, speed, and spawn rates increase over time.</li>\n                            <li><strong>Preparation:</strong> Upgrade your ship's weapons, shields, and hull before activating.</li>\n                            <li><strong>Strategy:</strong> Deploy multiple laser turrets (T key) around your position to create defensive perimeters.</li>\n                            <li><strong>High Score:</strong> How long can you survive as difficulty scales to infinity?</li>\n                        </ul>\n                    </div>\n                    \n                    <div class=\"control-section\">\n                        <h3>Movement</h3>\n                        <div class=\"control-row\"><span class=\"key\">W</span> <span>Forward</span></div>\n                        <div class=\"control-row\"><span class=\"key\">S</span> <span>Backward</span></div>\n                        <div class=\"control-row\"><span class=\"key\">A</span> <span>Left</span></div>\n                        <div class=\"control-row\"><span class=\"key\">D</span> <span>Right</span></div>\n                        <div class=\"control-row\"><span class=\"key\">SHIFT</span> <span>Boost</span></div>\n                        <div class=\"control-row\"><span class=\"key\">Mouse</span> <span>Ship Rotation</span></div>\n                    </div>\n                    \n                    <div class=\"control-section\">\n                        <h3>Combat & Mining</h3>\n                        <div class=\"control-row\"><span class=\"key\">LMB</span> <span>Fire Weapons</span></div>\n                        <div class=\"control-row\"><span class=\"key\">E</span> <span>Toggle Target Lock-On</span></div>\n                        <div class=\"control-row\"><span class=\"key\">R</span> <span>Toggle Mining Laser</span></div>\n                        <div class=\"control-row\"><span class=\"key\">TAB</span> <span>Cycle Targets</span></div>\n                    </div>\n                    \n                    <div class=\"control-section\">\n                        <h3>Special</h3>\n                        <div class=\"control-row\"><span class=\"key\">T</span> <span>Deploy Laser Turret</span></div>\n                        <div class=\"control-row\"><span class=\"key\">Q</span> <span>Dock/Undock at Stargate</span></div>\n                        <div class=\"control-row\"><span class=\"key\">ESC</span> <span>Pause Game</span></div>\n                    </div>\n                    \n                    <button id=\"close-how-to-play\" class=\"modal-close-button\">Close</button>\n                </div>\n            </div>\n        `;\n\n        // Add to document body\n        document.body.appendChild(startScreen);\n\n        // Set up event listeners\n        this.setupEventListeners();\n    }\n\n    setupEventListeners(): void {\n        // Play button\n        const playButton = document.getElementById('play-button') as HTMLButtonElement | null;\n        if (playButton) {\n            playButton.addEventListener('click', () => {\n                console.log(\"Play button clicked\");\n                console.log(\"Game object:\", this.game);\n                console.log(\"Game methods available:\", Object.getOwnPropertyNames(Object.getPrototypeOf(this.game)));\n                \n                this.hide();\n                // Check if intro has been played before\n                const introPlayed = localStorage.getItem('introPlayed') === 'true';\n                console.log(\"Intro played before:\", introPlayed);\n                \n                if (introPlayed) {\n                    // Returning player - go directly to docked state\n                    console.log(\"Starting game in docked state for returning player\");\n                    if (this.game && this.game.startDocked) {\n                        this.game.startDocked();\n                    } else {\n                        console.error(\"Game.startDocked not found\", this.game);\n                    }\n                } else {\n                    // New player - start intro sequence\n                    console.log(\"Starting intro sequence for new player\");\n                    if (this.game && this.game.startIntroSequence) {\n                        this.game.startIntroSequence();\n                    } else {\n                        console.error(\"Game.startIntroSequence not found\", this.game);\n                    }\n                }\n            });\n        }\n\n        // How to Play button\n        const howToPlayButton = document.getElementById('how-to-play-button') as HTMLButtonElement | null;\n        const howToPlayModal = document.getElementById('how-to-play-modal') as HTMLDivElement | null;\n        const closeHowToPlayButton = document.getElementById('close-how-to-play') as HTMLButtonElement | null;\n\n        if (howToPlayButton && howToPlayModal) {\n            howToPlayButton.addEventListener('click', () => {\n                howToPlayModal.style.display = 'flex';\n            });\n        }\n\n        if (closeHowToPlayButton && howToPlayModal) {\n            closeHowToPlayButton.addEventListener('click', () => {\n                howToPlayModal.style.display = 'none';\n            });\n\n            // Also close when clicking outside the modal content\n            howToPlayModal.addEventListener('click', (e: MouseEvent) => {\n                if (e.target === howToPlayModal) {\n                    howToPlayModal.style.display = 'none';\n                }\n            });\n        }\n    }\n\n    show(): void {\n        const startScreen = document.getElementById('start-screen') as HTMLDivElement | null;\n        if (startScreen) {\n            startScreen.style.display = 'flex';\n            this.isVisible = true;\n            \n            // End timing for initialization when start screen becomes visible\n            const initialTimestamp = (window as Window & { initialTimestamp?: number }).initialTimestamp;\n            if (initialTimestamp) {\n                const timeToStartScreen = performance.now() - initialTimestamp;\n                console.log(`Time to start screen visible: ${timeToStartScreen.toFixed(2)}ms`);\n                // Remove console.timeEnd since console.time was never called\n            }\n        }\n    }\n\n    hide(): void {\n        const startScreen = document.getElementById('start-screen') as HTMLDivElement | null;\n        if (startScreen) {\n            startScreen.style.display = 'none';\n            this.isVisible = false;\n        }\n\n        // Also hide How to Play modal if it's open\n        const howToPlayModal = document.getElementById('how-to-play-modal') as HTMLDivElement | null;\n        if (howToPlayModal) {\n            howToPlayModal.style.display = 'none';\n        }\n    }\n} \n"],"names":["StartScreen","game","ui","__publicField","startScreen","playButton","introPlayed","howToPlayButton","howToPlayModal","closeHowToPlayButton","e","initialTimestamp","timeToStartScreen"],"mappings":"oKAUO,MAAMA,CAAY,CAKrB,YAAYC,EAAuBC,EAAmB,CAJtDC,EAAA,aACAA,EAAA,WACAA,EAAA,kBAGI,KAAK,KAAOF,EACZ,KAAK,GAAKC,EACV,KAAK,UAAY,GACjB,KAAK,iBAAiB,CAAA,CAG1B,kBAAyB,CAEf,MAAAE,EAAc,SAAS,cAAc,KAAK,EAChDA,EAAY,GAAK,eACjBA,EAAY,UAAY,eACxBA,EAAY,MAAM,QAAU,OAG5BA,EAAY,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAsEf,SAAA,KAAK,YAAYA,CAAW,EAGrC,KAAK,oBAAoB,CAAA,CAG7B,qBAA4B,CAElB,MAAAC,EAAa,SAAS,eAAe,aAAa,EACpDA,GACWA,EAAA,iBAAiB,QAAS,IAAM,CACvC,QAAQ,IAAI,qBAAqB,EACzB,QAAA,IAAI,eAAgB,KAAK,IAAI,EAC7B,QAAA,IAAI,0BAA2B,OAAO,oBAAoB,OAAO,eAAe,KAAK,IAAI,CAAC,CAAC,EAEnG,KAAK,KAAK,EAEV,MAAMC,EAAc,aAAa,QAAQ,aAAa,IAAM,OACpD,QAAA,IAAI,uBAAwBA,CAAW,EAE3CA,GAEA,QAAQ,IAAI,oDAAoD,EAC5D,KAAK,MAAQ,KAAK,KAAK,YACvB,KAAK,KAAK,YAAY,EAEd,QAAA,MAAM,6BAA8B,KAAK,IAAI,IAIzD,QAAQ,IAAI,wCAAwC,EAChD,KAAK,MAAQ,KAAK,KAAK,mBACvB,KAAK,KAAK,mBAAmB,EAErB,QAAA,MAAM,oCAAqC,KAAK,IAAI,EAEpE,CACH,EAIC,MAAAC,EAAkB,SAAS,eAAe,oBAAoB,EAC9DC,EAAiB,SAAS,eAAe,mBAAmB,EAC5DC,EAAuB,SAAS,eAAe,mBAAmB,EAEpEF,GAAmBC,GACHD,EAAA,iBAAiB,QAAS,IAAM,CAC5CC,EAAe,MAAM,QAAU,MAAA,CAClC,EAGDC,GAAwBD,IACHC,EAAA,iBAAiB,QAAS,IAAM,CACjDD,EAAe,MAAM,QAAU,MAAA,CAClC,EAGcA,EAAA,iBAAiB,QAAUE,GAAkB,CACpDA,EAAE,SAAWF,IACbA,EAAe,MAAM,QAAU,OACnC,CACH,EACL,CAGJ,MAAa,CACH,MAAAJ,EAAc,SAAS,eAAe,cAAc,EAC1D,GAAIA,EAAa,CACbA,EAAY,MAAM,QAAU,OAC5B,KAAK,UAAY,GAGjB,MAAMO,EAAoB,OAAkD,iBAC5E,GAAIA,EAAkB,CACZ,MAAAC,EAAoB,YAAY,IAAA,EAAQD,EAC9C,QAAQ,IAAI,iCAAiCC,EAAkB,QAAQ,CAAC,CAAC,IAAI,CAAA,CAEjF,CACJ,CAGJ,MAAa,CACH,MAAAR,EAAc,SAAS,eAAe,cAAc,EACtDA,IACAA,EAAY,MAAM,QAAU,OAC5B,KAAK,UAAY,IAIf,MAAAI,EAAiB,SAAS,eAAe,mBAAmB,EAC9DA,IACAA,EAAe,MAAM,QAAU,OACnC,CAER"}