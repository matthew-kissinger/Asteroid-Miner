{"version":3,"file":"miningDisplay-qrCNkB-M.js","sources":["../../js/modules/ui/miningDisplay.ts"],"sourcesContent":["// miningDisplay.js - Handles the mining UI and resource display\n\nexport class MiningDisplay {\n    controls: MiningControls | null;\n\n    constructor() {\n        this.controls = null; // Will be set later\n        this.setupMiningDisplay();\n    }\n    \n    setControls(controls: MiningControls): void {\n        this.controls = controls;\n    }\n    \n    setupMiningDisplay(): void {\n        // Don't create a duplicate target-info element\n        // The HUD already creates one that we'll use\n        // We just need to ensure mining-time element exists when needed\n    }\n    \n    update(): void {\n        // Update the HUD resource counters in the top right with our resource values\n        if (this.controls && this.controls.resources) {\n            const ironAmount = document.getElementById('iron-amount') as HTMLSpanElement | null;\n            const goldAmount = document.getElementById('gold-amount') as HTMLSpanElement | null;\n            const platinumAmount = document.getElementById('platinum-amount') as HTMLSpanElement | null;\n            const cargoCapacity = document.getElementById('cargo-capacity') as HTMLSpanElement | null;\n            const capacityBar = document.getElementById('capacity-bar') as HTMLDivElement | null;\n            \n            if (ironAmount) ironAmount.textContent = String(this.controls.resources.iron || 0);\n            if (goldAmount) goldAmount.textContent = String(this.controls.resources.gold || 0);\n            if (platinumAmount) platinumAmount.textContent = String(this.controls.resources.platinum || 0);\n            \n            // Update cargo capacity\n            if (cargoCapacity && capacityBar && this.controls.spaceship) {\n                const totalResources = \n                    (this.controls.resources.iron || 0) + \n                    (this.controls.resources.gold || 0) + \n                    (this.controls.resources.platinum || 0);\n                const maxCapacity = this.controls.spaceship.maxCargoCapacity || 1000;\n                const capacityPercentage = (totalResources / maxCapacity) * 100;\n                \n                cargoCapacity.textContent = `${totalResources} / ${maxCapacity}`;\n                capacityBar.style.width = `${capacityPercentage}%`;\n                \n                // Change color when near capacity\n                if (capacityPercentage > 90) {\n                    capacityBar.style.backgroundColor = 'rgba(255, 80, 80, 0.8)';\n                } else if (capacityPercentage > 75) {\n                    capacityBar.style.backgroundColor = 'rgba(255, 204, 0, 0.8)';\n                } else {\n                    capacityBar.style.backgroundColor = 'rgba(120, 220, 232, 0.8)';\n                }\n            }\n            \n            // Update mining time estimate if targeting an asteroid\n            this.updateMiningTimeEstimate();\n        }\n    }\n    \n    /**\n     * Update the mining time estimate based on the targeted asteroid type and mining efficiency\n     */\n    updateMiningTimeEstimate(): void {\n        const miningTimeElement = document.getElementById('mining-time') as HTMLDivElement | null;\n        if (!miningTimeElement || !this.controls || !this.controls.miningSystem) return;\n        \n        const miningSystem = this.controls.miningSystem;\n        if (miningSystem.targetAsteroid && miningSystem.targetAsteroid.resourceType) {\n            const resourceType = miningSystem.targetAsteroid.resourceType.toLowerCase();\n            const efficiency = miningSystem.getMiningEfficiency();\n            const baseSpeed = miningSystem.miningSpeedByType[resourceType] || 0;\n            const secondsRequired = baseSpeed > 0 ? Math.round(1 / (baseSpeed * efficiency)) : 0;\n            \n            miningTimeElement.textContent = `Mining time: ${secondsRequired} seconds`;\n            miningTimeElement.style.display = 'block';\n            \n            // Color based on resource value\n            if (resourceType === 'platinum') {\n                miningTimeElement.style.color = '#66ffff';\n            } else if (resourceType === 'gold') {\n                miningTimeElement.style.color = '#ffcc00';\n            } else {\n                miningTimeElement.style.color = '#a0a0a0';\n            }\n        } else {\n            miningTimeElement.style.display = 'none';\n        }\n    }\n    \n    hide(): void {\n        // Hide target info\n        const targetInfo = document.getElementById('target-info') as HTMLDivElement | null;\n        if (targetInfo) {\n            targetInfo.style.display = 'none';\n        }\n    }\n    \n    show(): void {\n        // Show target info if needed\n        // In this implementation, the target info is shown directly by the targeting system\n    }\n}\n\ntype MiningResources = {\n    iron?: number;\n    gold?: number;\n    platinum?: number;\n};\n\ntype MiningSpaceship = {\n    maxCargoCapacity?: number;\n};\n\ntype MiningSystem = {\n    targetAsteroid?: {\n        resourceType?: string;\n    };\n    getMiningEfficiency: () => number;\n    miningSpeedByType: Record<string, number>;\n};\n\ntype MiningControls = {\n    resources?: MiningResources;\n    spaceship?: MiningSpaceship;\n    miningSystem?: MiningSystem;\n};\n"],"names":["MiningDisplay","__publicField","controls","ironAmount","goldAmount","platinumAmount","cargoCapacity","capacityBar","totalResources","maxCapacity","capacityPercentage","miningTimeElement","miningSystem","resourceType","efficiency","baseSpeed","secondsRequired","targetInfo"],"mappings":"oKAEO,MAAMA,CAAc,CAGvB,aAAc,CAFdC,EAAA,iBAGI,KAAK,SAAW,KAChB,KAAK,mBAAmB,CAAA,CAG5B,YAAYC,EAAgC,CACxC,KAAK,SAAWA,CAAA,CAGpB,oBAA2B,CAAA,CAM3B,QAAe,CAEX,GAAI,KAAK,UAAY,KAAK,SAAS,UAAW,CACpC,MAAAC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAiB,SAAS,eAAe,iBAAiB,EAC1DC,EAAgB,SAAS,eAAe,gBAAgB,EACxDC,EAAc,SAAS,eAAe,cAAc,EAO1D,GALIJ,MAAuB,YAAc,OAAO,KAAK,SAAS,UAAU,MAAQ,CAAC,GAC7EC,MAAuB,YAAc,OAAO,KAAK,SAAS,UAAU,MAAQ,CAAC,GAC7EC,MAA+B,YAAc,OAAO,KAAK,SAAS,UAAU,UAAY,CAAC,GAGzFC,GAAiBC,GAAe,KAAK,SAAS,UAAW,CACzD,MAAMC,GACD,KAAK,SAAS,UAAU,MAAQ,IAChC,KAAK,SAAS,UAAU,MAAQ,IAChC,KAAK,SAAS,UAAU,UAAY,GACnCC,EAAc,KAAK,SAAS,UAAU,kBAAoB,IAC1DC,EAAsBF,EAAiBC,EAAe,IAE5DH,EAAc,YAAc,GAAGE,CAAc,MAAMC,CAAW,GAClDF,EAAA,MAAM,MAAQ,GAAGG,CAAkB,IAG3CA,EAAqB,GACrBH,EAAY,MAAM,gBAAkB,yBAC7BG,EAAqB,GAC5BH,EAAY,MAAM,gBAAkB,yBAEpCA,EAAY,MAAM,gBAAkB,0BACxC,CAIJ,KAAK,yBAAyB,CAAA,CAClC,CAMJ,0BAAiC,CACvB,MAAAI,EAAoB,SAAS,eAAe,aAAa,EAC3D,GAAA,CAACA,GAAqB,CAAC,KAAK,UAAY,CAAC,KAAK,SAAS,aAAc,OAEnE,MAAAC,EAAe,KAAK,SAAS,aACnC,GAAIA,EAAa,gBAAkBA,EAAa,eAAe,aAAc,CACzE,MAAMC,EAAeD,EAAa,eAAe,aAAa,YAAY,EACpEE,EAAaF,EAAa,oBAAoB,EAC9CG,EAAYH,EAAa,kBAAkBC,CAAY,GAAK,EAC5DG,EAAkBD,EAAY,EAAI,KAAK,MAAM,GAAKA,EAAYD,EAAW,EAAI,EAEjEH,EAAA,YAAc,gBAAgBK,CAAe,WAC/DL,EAAkB,MAAM,QAAU,QAG9BE,IAAiB,WACjBF,EAAkB,MAAM,MAAQ,UACzBE,IAAiB,OACxBF,EAAkB,MAAM,MAAQ,UAEhCA,EAAkB,MAAM,MAAQ,SACpC,MAEAA,EAAkB,MAAM,QAAU,MACtC,CAGJ,MAAa,CAEH,MAAAM,EAAa,SAAS,eAAe,aAAa,EACpDA,IACAA,EAAW,MAAM,QAAU,OAC/B,CAGJ,MAAa,CAAA,CAIjB"}