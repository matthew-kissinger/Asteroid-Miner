{"version":3,"mappings":"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","names":["HUDStyles","fontLink","style","timestamp","glitchAnimation","element","styles","panel","topLeft","topRight","bottomLeft","bottomRight","HUDDisplays","parent","flightPanel","panelHeader","statusIndicator","statusPanel","locationPanel","resourcePanel","resourceHeader","fuelRow","fuelLabel","fuelValue","fuelBarContainer","fuelBar","shieldRow","shieldLabel","shieldBarContainer","shieldBar","hullRow","hullLabel","hullBarContainer","hullBar","name","id","hexColor","row","hexIcon","label","value","capacityRow","capacityLabel","capacityValue","capacityBarContainer","capacityBar","defaultValue","isIndicator","labelEl","valueEl","controlsButton","soundToggleBtn","isMuted","HUDNotifications","notificationsArea","hordeIndicator","hordeContent","hordeLabel","survivalTime","totalSeconds","minutes","seconds","styleEl","message","type","duration","notification","backgroundColor","borderColor","fadeInStyle","flashOverlay","flashStyle","HUDStatusIndicators","targetingSystem","crosshair","targetInfo","positionStyles","laserBeam","_parent","spaceship","shieldPercentage","shieldFound","players","health","e","hullPercentage","healthFound","fuelPercent","creditsDisplay","x","y","z","coordsElement","fps","cap","fpsElement","_locationName","systemName","currentSystem","HUDEventHandlers","__publicField","hudContainer","animationName","position","height","moveScanline","scanlineElement","_systemName","frame","frameId","controls","_frameTime","newState","_oldState","eventType","_data","HUDHelpers","num","milliseconds","distance","maxValue","percentage","shieldPercent","hullPercent","min","max","start","end","factor","degrees","radians","resourceType","prefix","func","wait","timeout","args","later","limit","inThrottle","context","obj","path","current","key","rect","player","str","rgb","_a","HUD","locationName","safeLocation","MobileHUD","cargoContainer","cargoLabel","cargoValue","hordeContainer","hordeTimer","color","container","labelElement","barContainer","bar","anomalyContainer","anomalyLabel","anomalyCount","shieldValue","maxShield","_b","hullValue","maxHull","maxFuel","fuel","resources","maxCargo","totalCargo","amount","count","hordeSurvivalTime","typedArrayPools","MemoryStats","objectPool","pool","report","flashTimeout","initScreenFlash","setupEventListeners","mainMessageBus","damage","shieldDamage","flashScreen","explosionHandler","camera","renderer","numberPool","activeNumbers","initDamageNumbers","cam","rend","showDamageNumber","damageType","worldPos","damageNum","createDamageNumberElement","updateDamageNumberPosition","THREE.Vector3","screenPos","width","progress","floatDistance","scale","opacity","updateDamageNumbers","deltaTime","i","MAX_INDICATORS","DETECTION_RANGE","ARROW_SIZE","EDGE_PADDING","DISTANCE_NEAR","DISTANCE_MEDIUM","arrowPool","initialized","initThreatIndicators","arrow","createArrowElement","setThreatIndicatorsCamera","updateThreatIndicators","enemies","playerEid","playerX","Position","playerY","playerZ","threats","eid","dx","dy","dz","a","b","arrowIndex","screenWidth","screenHeight","threat","ndc","screenX","screenY","angle","calculateEdgePosition","getDistanceColor","ndcX","ndcY","paddingX","paddingY","clampedX","clampedY","centerX","centerY","UI","environment","MobileDetector","MiningDisplay","__vitePreload","TargetingUI","StargateInterface","GameOverScreen","ControlsMenu","StarMap","DEBUG_MODE","mobileCSS","audio","BlackjackGame","game","Settings","StartScreen","wasMobile","content","_message","getEnemies","getPlayerEntity","systemData","fpsDisplay","fallbackOverlay","messageData","messageText","restartBtn","mobileHudContainer","pointerLockInstructions","statsContainer","memoryStats","fpsCounter"],"ignoreList":[],"sources":["../../js/modules/ui/components/hud/styles.ts","../../js/modules/ui/components/hud/displays.ts","../../js/modules/ui/components/hud/notifications.ts","../../js/modules/ui/components/hud/statusIndicators.ts","../../js/modules/ui/components/hud/eventHandlers.ts","../../js/modules/ui/components/hud/helpers.ts","../../js/modules/ui/hud.ts","../../js/modules/ui/mobileHUD.ts","../../js/utils/memoryManager.ts","../../js/modules/ui/screenFlash.ts","../../js/modules/ui/damageNumbers.ts","../../js/modules/ui/threatIndicators.ts","../../js/modules/ui.ts"],"sourcesContent":["// styles.js - CSS styles and animations for HUD elements\n\nexport class HUDStyles {\n    static initializeStyles(): void {\n        // Add Google Font for futuristic UI\n        const fontLink: HTMLLinkElement = document.createElement('link');\n        fontLink.href = 'https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;600&family=Electrolize&display=swap';\n        fontLink.rel = 'stylesheet';\n        document.head.appendChild(fontLink);\n\n        // Add main HUD animations and styles\n        const style: HTMLStyleElement = document.createElement('style');\n        style.textContent = `\n            @keyframes pulse {\n                0% { opacity: 0.7; }\n                50% { opacity: 1; }\n                100% { opacity: 0.7; }\n            }\n            \n            @keyframes radar-ping {\n                0% { transform: translate(-50%, -50%) scale(0); opacity: 0.5; }\n                100% { transform: translate(-50%, -50%) scale(3); opacity: 0; }\n            }\n            \n            @keyframes text-flicker {\n                0% { opacity: 1; }\n                3% { opacity: 0.4; }\n                6% { opacity: 1; }\n                9% { opacity: 0.4; }\n                12% { opacity: 1; }\n                35% { opacity: 1; }\n                38% { opacity: 0.4; }\n                41% { opacity: 1; }\n                100% { opacity: 1; }\n            }\n            \n            @keyframes blink {\n                0% { opacity: 1; }\n                49% { opacity: 1; }\n                50% { opacity: 0; }\n                100% { opacity: 0; }\n            }\n\n            @keyframes pulse-horde {\n                0% { box-shadow: 0 0 5px rgba(255, 30, 30, 0.5); }\n                50% { box-shadow: 0 0 10px rgba(255, 30, 30, 0.8); }\n                100% { box-shadow: 0 0 5px rgba(255, 30, 30, 0.5); }\n            }\n        `;\n        document.head.appendChild(style);\n    }\n\n    static getMainContainerStyles(): Record<string, string> {\n        return {\n            position: 'absolute',\n            top: '0',\n            left: '0',\n            width: '100%',\n            height: '100%',\n            pointerEvents: 'none',\n            fontFamily: '\"Rajdhani\", \"Electrolize\", sans-serif',\n            fontWeight: '400',\n            color: 'rgba(120, 220, 232, 0.9)',\n            textShadow: '0 0 10px rgba(120, 220, 232, 0.5)',\n            opacity: '0',\n            transition: 'opacity 0.5s ease'\n        };\n    }\n\n    static getPanelStyles(): Record<string, string> {\n        return {\n            backgroundColor: 'rgba(6, 22, 31, 0.7)',\n            backdropFilter: 'blur(5px)',\n            borderRadius: '10px',\n            border: '1px solid rgba(120, 220, 232, 0.3)',\n            boxShadow: '0 0 15px rgba(120, 220, 232, 0.2), inset 0 0 10px rgba(120, 220, 232, 0.1)',\n            overflow: 'hidden'\n        };\n    }\n\n    static getPanelHeaderStyles(): Record<string, string> {\n        return {\n            fontWeight: '600',\n            fontSize: '14px',\n            textTransform: 'uppercase',\n            letterSpacing: '2px',\n            marginBottom: '15px',\n            paddingBottom: '8px',\n            borderBottom: '1px solid rgba(120, 220, 232, 0.3)',\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n        };\n    }\n\n    static getStatusIndicatorStyles(): Record<string, string> {\n        return {\n            width: '8px',\n            height: '8px',\n            borderRadius: '50%',\n            backgroundColor: 'rgba(120, 220, 232, 0.8)',\n            boxShadow: '0 0 5px rgba(120, 220, 232, 0.8)',\n            animation: 'pulse 2s infinite'\n        };\n    }\n\n    static getPanelRowStyles(): Record<string, string> {\n        return {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            margin: '10px 0'\n        };\n    }\n\n    static getButtonStyles(): Record<string, string> {\n        return {\n            width: '100%',\n            marginTop: '15px',\n            padding: '8px',\n            backgroundColor: 'rgba(120, 220, 232, 0.15)',\n            border: '1px solid rgba(120, 220, 232, 0.5)',\n            borderRadius: '5px',\n            color: 'rgba(120, 220, 232, 0.9)',\n            fontSize: '12px',\n            fontFamily: '\"Rajdhani\", sans-serif',\n            cursor: 'pointer',\n            transition: 'all 0.2s ease',\n            textTransform: 'uppercase',\n            letterSpacing: '1px',\n            fontWeight: '600',\n            outline: 'none',\n            pointerEvents: 'auto'\n        };\n    }\n\n    static getBarContainerStyles(): Record<string, string> {\n        return {\n            height: '10px',\n            backgroundColor: 'rgba(10, 30, 40, 0.5)',\n            borderRadius: '5px',\n            overflow: 'hidden'\n        };\n    }\n\n    static getBarStyles(): Record<string, string> {\n        return {\n            width: '100%',\n            height: '100%',\n            boxShadow: 'inset 0 0 5px rgba(255, 255, 255, 0.5)',\n            transition: 'width 0.3s ease'\n        };\n    }\n\n    static getScanlineEffectStyles(): Record<string, string> {\n        return {\n            position: 'absolute',\n            top: '0',\n            left: '0',\n            width: '100%',\n            height: '100%',\n            background: 'linear-gradient(transparent 50%, rgba(120, 220, 232, 0.03) 50%)',\n            backgroundSize: '100% 4px',\n            zIndex: '1000',\n            pointerEvents: 'none',\n            opacity: '0.5'\n        };\n    }\n\n    static getActiveScanlineStyles(): Record<string, string> {\n        return {\n            position: 'absolute',\n            left: '0',\n            width: '100%',\n            height: '3px',\n            background: 'linear-gradient(90deg, transparent 0%, rgba(120, 220, 232, 0.1) 50%, transparent 100%)',\n            boxShadow: '0 0 10px rgba(120, 220, 232, 0.3)',\n            zIndex: '1001',\n            top: '0',\n            opacity: '0.7',\n            pointerEvents: 'none'\n        };\n    }\n\n    static createGlitchAnimation(): string {\n        const timestamp: number = Date.now();\n        const glitchAnimation: string = `\n            @keyframes glitch-${timestamp} {\n                0% { transform: translate(0, 0) skew(0deg); filter: hue-rotate(0deg); }\n                1% { transform: translate(2px, 2px) skew(1deg); filter: hue-rotate(90deg); }\n                2% { transform: translate(-2px, -3px) skew(-1deg); filter: hue-rotate(180deg); }\n                3% { transform: translate(0, 0) skew(0deg); filter: hue-rotate(0deg); }\n                12% { clip-path: inset(0 0 0 0); }\n                13% { clip-path: inset(10% 0 0 0); }\n                14% { clip-path: inset(0 0 0 0); }\n                15% { clip-path: inset(0 0 10% 0); }\n                16% { clip-path: inset(0 0 0 0); }\n                100% { transform: translate(0, 0) skew(0deg); filter: hue-rotate(0deg); }\n            }\n        `;\n        \n        // Add animation to document\n        const style: HTMLStyleElement = document.createElement('style');\n        style.textContent = glitchAnimation;\n        document.head.appendChild(style);\n        \n        // Return animation name for usage\n        return `glitch-${timestamp}`;\n    }\n\n    static applyStyles(element: HTMLElement, styles: Partial<CSSStyleDeclaration>): void {\n        Object.assign(element.style, styles);\n    }\n\n    static addCornerElements(panel: HTMLElement): void {\n        // Top left corner\n        const topLeft: HTMLDivElement = document.createElement('div');\n        HUDStyles.applyStyles(topLeft, {\n            position: 'absolute',\n            top: '0',\n            left: '0',\n            width: '10px',\n            height: '10px',\n            borderTop: '2px solid rgba(120, 220, 232, 0.8)',\n            borderLeft: '2px solid rgba(120, 220, 232, 0.8)'\n        });\n        panel.appendChild(topLeft);\n        \n        // Top right corner\n        const topRight: HTMLDivElement = document.createElement('div');\n        HUDStyles.applyStyles(topRight, {\n            position: 'absolute',\n            top: '0',\n            right: '0',\n            width: '10px',\n            height: '10px',\n            borderTop: '2px solid rgba(120, 220, 232, 0.8)',\n            borderRight: '2px solid rgba(120, 220, 232, 0.8)'\n        });\n        panel.appendChild(topRight);\n        \n        // Bottom left corner\n        const bottomLeft: HTMLDivElement = document.createElement('div');\n        HUDStyles.applyStyles(bottomLeft, {\n            position: 'absolute',\n            bottom: '0',\n            left: '0',\n            width: '10px',\n            height: '10px',\n            borderBottom: '2px solid rgba(120, 220, 232, 0.8)',\n            borderLeft: '2px solid rgba(120, 220, 232, 0.8)'\n        });\n        panel.appendChild(bottomLeft);\n        \n        // Bottom right corner\n        const bottomRight: HTMLDivElement = document.createElement('div');\n        HUDStyles.applyStyles(bottomRight, {\n            position: 'absolute',\n            bottom: '0',\n            right: '0',\n            width: '10px',\n            height: '10px',\n            borderBottom: '2px solid rgba(120, 220, 232, 0.8)',\n            borderRight: '2px solid rgba(120, 220, 232, 0.8)'\n        });\n        panel.appendChild(bottomRight);\n    }\n}","// displays.ts - Resource displays, health bars, fuel gauges, and data panels\n\nimport { HUDStyles } from './styles.ts';\n\nexport class HUDDisplays {\n    /**\n     * Creates the flight panel displaying core ship information\n     */\n    static createFlightPanel(parent: HTMLElement): HTMLDivElement {\n        const flightPanel = document.createElement('div');\n        flightPanel.id = 'flight-panel';\n        flightPanel.className = 'hud-panel';\n        \n        HUDStyles.applyStyles(flightPanel, {\n            position: 'absolute',\n            bottom: '20px',\n            left: '20px',\n            width: '260px',\n            padding: '15px',\n            ...HUDStyles.getPanelStyles()\n        });\n        \n        parent.appendChild(flightPanel);\n        \n        // Panel header\n        const panelHeader = document.createElement('div');\n        panelHeader.className = 'panel-header';\n        panelHeader.innerHTML = '<span>FLIGHT SYSTEMS</span>';\n        HUDStyles.applyStyles(panelHeader, HUDStyles.getPanelHeaderStyles());\n        flightPanel.appendChild(panelHeader);\n        \n        // Add status indicator\n        const statusIndicator = document.createElement('div');\n        statusIndicator.className = 'status-indicator';\n        HUDStyles.applyStyles(statusIndicator, HUDStyles.getStatusIndicatorStyles());\n        panelHeader.appendChild(statusIndicator);\n        \n        // Create fuel gauge\n        HUDDisplays.createFuelGauge(flightPanel);\n        \n        // Credits display\n        HUDDisplays.createPanelRow(flightPanel, 'CREDITS', 'credits', '1000 CR');\n        \n        // Controls button\n        HUDDisplays.createControlsButton(flightPanel);\n        \n        // Add holographic decorative elements\n        HUDStyles.addCornerElements(flightPanel);\n        \n        return flightPanel;\n    }\n\n    /**\n     * Creates the status panel for hull and shield monitoring\n     */\n    static createStatusPanel(parent: HTMLElement): HTMLDivElement {\n        const statusPanel = document.createElement('div');\n        statusPanel.id = 'status-panel';\n        statusPanel.className = 'hud-panel';\n        \n        HUDStyles.applyStyles(statusPanel, {\n            position: 'absolute',\n            bottom: '20px',\n            right: '20px',\n            width: '260px',\n            padding: '15px',\n            ...HUDStyles.getPanelStyles()\n        });\n        \n        parent.appendChild(statusPanel);\n        \n        // Panel header\n        const panelHeader = document.createElement('div');\n        panelHeader.className = 'panel-header';\n        panelHeader.innerHTML = '<span>SHIP STATUS</span>';\n        HUDStyles.applyStyles(panelHeader, HUDStyles.getPanelHeaderStyles());\n        statusPanel.appendChild(panelHeader);\n        \n        // Add status indicator\n        const statusIndicator = document.createElement('div');\n        statusIndicator.className = 'status-indicator';\n        HUDStyles.applyStyles(statusIndicator, HUDStyles.getStatusIndicatorStyles());\n        panelHeader.appendChild(statusIndicator);\n        \n        // Ship shield bar\n        HUDDisplays.createShieldBar(statusPanel);\n        \n        // Ship hull integrity bar\n        HUDDisplays.createHullBar(statusPanel);\n        \n        // Add holographic decorative elements\n        HUDStyles.addCornerElements(statusPanel);\n        \n        // Add sound control button\n        HUDDisplays.createSoundToggleButton(statusPanel);\n        \n        return statusPanel;\n    }\n\n    /**\n     * Creates the location panel with system name, coordinates, and FPS\n     */\n    static createLocationPanel(parent: HTMLElement): HTMLDivElement {\n        const locationPanel = document.createElement('div');\n        locationPanel.id = 'location-panel';\n        locationPanel.className = 'hud-panel';\n        \n        HUDStyles.applyStyles(locationPanel, {\n            position: 'absolute',\n            top: '20px',\n            left: '20px',\n            padding: '10px 20px',\n            backgroundColor: 'rgba(6, 22, 31, 0.7)',\n            backdropFilter: 'blur(5px)',\n            borderRadius: '8px',\n            border: '1px solid rgba(120, 220, 232, 0.3)',\n            boxShadow: '0 0 15px rgba(120, 220, 232, 0.2)',\n            fontSize: '14px'\n        });\n        \n        parent.appendChild(locationPanel);\n        \n        // Location name with icon\n        locationPanel.innerHTML = `\n            <div style=\"display:flex; align-items:center; gap:10px;\">\n                <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22C12 22 19 14.25 19 9C19 5.13 15.87 2 12 2ZM12 11.5C10.62 11.5 9.5 10.38 9.5 9C9.5 7.62 10.62 6.5 12 6.5C13.38 6.5 14.5 7.62 14.5 9C14.5 10.38 13.38 11.5 12 11.5Z\" \n                          fill=\"rgba(120, 220, 232, 0.8)\"/>\n                </svg>\n                <span id=\"current-system\" style=\"font-weight:600; letter-spacing:1px;\">SOLAR SYSTEM</span>\n            </div>\n            <div id=\"location-coordinates\" style=\"margin-top:5px; font-size:12px; opacity:0.8;\">X: 0 Y: 0 Z: 0</div>\n            <div id=\"fps-display\" style=\"margin-top:5px; font-size:12px; opacity:0.8;\">FPS: 0</div>\n            <div style=\"margin-top:5px; display:flex; align-items:center; gap:10px; font-size:12px; opacity:0.8;\">\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\" \n                          fill=\"rgba(120, 220, 232, 0.8)\"/>\n                    <path d=\"M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z\" \n                          fill=\"rgba(120, 220, 232, 0.5)\"/>\n                </svg>\n                <span>ANOMALIES: <span id=\"anomaly-count\" style=\"font-weight:600;\">0</span></span>\n            </div>\n        `;\n        \n        // Add decorative corner effects\n        HUDStyles.addCornerElements(locationPanel);\n        \n        return locationPanel;\n    }\n\n    /**\n     * Creates the resource panel for cargo monitoring\n     */\n    static createResourcePanel(parent: HTMLElement): HTMLDivElement {\n        const resourcePanel = document.createElement('div');\n        resourcePanel.id = 'resource-panel';\n        resourcePanel.className = 'hud-panel';\n        \n        HUDStyles.applyStyles(resourcePanel, {\n            position: 'absolute',\n            top: '20px',\n            right: '20px',\n            width: '180px',\n            padding: '10px 15px',\n            backgroundColor: 'rgba(6, 22, 31, 0.7)',\n            backdropFilter: 'blur(5px)',\n            borderRadius: '8px',\n            border: '1px solid rgba(120, 220, 232, 0.3)',\n            boxShadow: '0 0 15px rgba(120, 220, 232, 0.2)',\n            fontSize: '14px'\n        });\n        \n        parent.appendChild(resourcePanel);\n        \n        // Panel header\n        const resourceHeader = document.createElement('div');\n        resourceHeader.className = 'panel-header';\n        resourceHeader.innerHTML = '<span>CARGO BAY</span>';\n        HUDStyles.applyStyles(resourceHeader, {\n            fontWeight: '600',\n            fontSize: '12px',\n            textTransform: 'uppercase',\n            letterSpacing: '1px',\n            marginBottom: '8px',\n            paddingBottom: '5px',\n            borderBottom: '1px solid rgba(120, 220, 232, 0.3)',\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n        });\n        resourcePanel.appendChild(resourceHeader);\n        \n        // Add resources\n        HUDDisplays.createResourceRow(resourcePanel, 'IRON', 'iron-amount', 'rgba(180, 180, 180, 0.8)');\n        HUDDisplays.createResourceRow(resourcePanel, 'GOLD', 'gold-amount', 'rgba(255, 215, 0, 0.8)');\n        HUDDisplays.createResourceRow(resourcePanel, 'PLATINUM', 'platinum-amount', 'rgba(229, 228, 226, 0.8)');\n        \n        // Add capacity meter\n        HUDDisplays.createCapacityMeter(resourcePanel);\n        \n        // Add decorative corner elements\n        HUDStyles.addCornerElements(resourcePanel);\n        \n        return resourcePanel;\n    }\n\n    /**\n     * Creates the fuel gauge component\n     */\n    static createFuelGauge(panel: HTMLElement): void {\n        const fuelRow = document.createElement('div');\n        fuelRow.className = 'panel-row';\n        HUDStyles.applyStyles(fuelRow, HUDStyles.getPanelRowStyles());\n        panel.appendChild(fuelRow);\n        \n        const fuelLabel = document.createElement('span');\n        fuelLabel.className = 'row-label';\n        fuelLabel.textContent = 'FUEL';\n        fuelLabel.style.width = '40%';\n        fuelRow.appendChild(fuelLabel);\n        \n        // Add fuel value display\n        const fuelValue = document.createElement('span');\n        fuelValue.id = 'fuel-value';\n        fuelValue.className = 'row-value';\n        fuelValue.textContent = '100 / 100';\n        HUDStyles.applyStyles(fuelValue, {\n            position: 'absolute',\n            right: '15px',\n            top: '-18px',\n            fontSize: '12px',\n            color: 'rgba(120, 220, 232, 0.9)'\n        });\n        \n        const fuelBarContainer = document.createElement('div');\n        HUDStyles.applyStyles(fuelBarContainer, {\n            width: '60%',\n            position: 'relative',\n            ...HUDStyles.getBarContainerStyles()\n        });\n        fuelBarContainer.appendChild(fuelValue);\n        fuelRow.appendChild(fuelBarContainer);\n        \n        const fuelBar = document.createElement('div');\n        fuelBar.id = 'fuel-bar';\n        HUDStyles.applyStyles(fuelBar, {\n            backgroundColor: 'rgba(120, 220, 232, 0.8)',\n            ...HUDStyles.getBarStyles()\n        });\n        fuelBarContainer.appendChild(fuelBar);\n    }\n\n    /**\n     * Creates the shield integrity bar\n     */\n    static createShieldBar(panel: HTMLElement): void {\n        const shieldRow = document.createElement('div');\n        shieldRow.className = 'panel-row';\n        HUDStyles.applyStyles(shieldRow, HUDStyles.getPanelRowStyles());\n        panel.appendChild(shieldRow);\n        \n        const shieldLabel = document.createElement('span');\n        shieldLabel.className = 'row-label';\n        shieldLabel.textContent = 'SHIELD';\n        shieldLabel.style.width = '50%';\n        shieldRow.appendChild(shieldLabel);\n        \n        const shieldBarContainer = document.createElement('div');\n        HUDStyles.applyStyles(shieldBarContainer, {\n            width: '50%',\n            ...HUDStyles.getBarContainerStyles()\n        });\n        shieldRow.appendChild(shieldBarContainer);\n        \n        const shieldBar = document.createElement('div');\n        shieldBar.id = 'shield-bar';\n        HUDStyles.applyStyles(shieldBar, {\n            backgroundColor: 'rgba(51, 153, 255, 0.8)',\n            ...HUDStyles.getBarStyles()\n        });\n        shieldBarContainer.appendChild(shieldBar);\n    }\n\n    /**\n     * Creates the hull integrity bar\n     */\n    static createHullBar(panel: HTMLElement): void {\n        const hullRow = document.createElement('div');\n        hullRow.className = 'panel-row';\n        HUDStyles.applyStyles(hullRow, HUDStyles.getPanelRowStyles());\n        panel.appendChild(hullRow);\n        \n        const hullLabel = document.createElement('span');\n        hullLabel.className = 'row-label';\n        hullLabel.textContent = 'HULL INTEGRITY';\n        hullLabel.style.width = '50%';\n        hullRow.appendChild(hullLabel);\n        \n        const hullBarContainer = document.createElement('div');\n        HUDStyles.applyStyles(hullBarContainer, {\n            width: '50%',\n            ...HUDStyles.getBarContainerStyles()\n        });\n        hullRow.appendChild(hullBarContainer);\n        \n        const hullBar = document.createElement('div');\n        hullBar.id = 'hull-bar';\n        HUDStyles.applyStyles(hullBar, {\n            backgroundColor: 'rgba(120, 220, 232, 0.8)',\n            ...HUDStyles.getBarStyles()\n        });\n        hullBarContainer.appendChild(hullBar);\n    }\n\n    /**\n     * Creates a resource row for the cargo panel\n     */\n    static createResourceRow(panel: HTMLElement, name: string, id: string, hexColor: string): void {\n        const row = document.createElement('div');\n        HUDStyles.applyStyles(row, {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n            margin: '5px 0'\n        });\n        \n        // Hex icon with resource color\n        const hexIcon = document.createElement('div');\n        HUDStyles.applyStyles(hexIcon, {\n            width: '12px',\n            height: '14px',\n            clipPath: 'polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)',\n            backgroundColor: hexColor,\n            marginRight: '8px'\n        });\n        \n        const label = document.createElement('div');\n        HUDStyles.applyStyles(label, {\n            display: 'flex',\n            alignItems: 'center',\n            width: '50%',\n            fontSize: '12px'\n        });\n        label.appendChild(hexIcon);\n        label.appendChild(document.createTextNode(name));\n        \n        const value = document.createElement('div');\n        value.id = id;\n        HUDStyles.applyStyles(value, {\n            width: '50%',\n            textAlign: 'right',\n            fontWeight: '600',\n            fontSize: '12px'\n        });\n        value.textContent = '0';\n        \n        row.appendChild(label);\n        row.appendChild(value);\n        panel.appendChild(row);\n    }\n\n    /**\n     * Creates the cargo capacity meter\n     */\n    static createCapacityMeter(panel: HTMLElement): void {\n        const capacityRow = document.createElement('div');\n        HUDStyles.applyStyles(capacityRow, {\n            marginTop: '8px',\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            borderTop: '1px solid rgba(120, 220, 232, 0.3)',\n            paddingTop: '8px'\n        });\n        panel.appendChild(capacityRow);\n        \n        const capacityLabel = document.createElement('div');\n        capacityLabel.textContent = 'CAPACITY';\n        capacityLabel.style.fontSize = '12px';\n        capacityRow.appendChild(capacityLabel);\n        \n        const capacityValue = document.createElement('div');\n        capacityValue.id = 'cargo-capacity';\n        capacityValue.textContent = '0 / 1000';\n        HUDStyles.applyStyles(capacityValue, {\n            fontSize: '12px',\n            fontWeight: '600'\n        });\n        capacityRow.appendChild(capacityValue);\n        \n        // Add capacity bar\n        const capacityBarContainer = document.createElement('div');\n        HUDStyles.applyStyles(capacityBarContainer, {\n            width: '100%',\n            height: '5px',\n            backgroundColor: 'rgba(10, 30, 40, 0.5)',\n            borderRadius: '3px',\n            overflow: 'hidden',\n            marginTop: '5px'\n        });\n        panel.appendChild(capacityBarContainer);\n        \n        const capacityBar = document.createElement('div');\n        capacityBar.id = 'capacity-bar';\n        HUDStyles.applyStyles(capacityBar, {\n            width: '0%',\n            height: '100%',\n            backgroundColor: 'rgba(120, 220, 232, 0.8)',\n            transition: 'width 0.3s ease'\n        });\n        capacityBarContainer.appendChild(capacityBar);\n    }\n\n    /**\n     * Creates a standard panel row with label and value\n     */\n    static createPanelRow(panel: HTMLElement, label: string, id: string, defaultValue: string, isIndicator: boolean = false): void {\n        const row = document.createElement('div');\n        row.className = 'panel-row';\n        HUDStyles.applyStyles(row, {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            margin: '8px 0'\n        });\n        panel.appendChild(row);\n        \n        const labelEl = document.createElement('span');\n        labelEl.className = 'row-label';\n        labelEl.textContent = label;\n        row.appendChild(labelEl);\n        \n        const valueEl = document.createElement('span');\n        valueEl.id = id;\n        valueEl.className = 'row-value';\n        valueEl.textContent = defaultValue;\n        \n        if (isIndicator && defaultValue === 'ON') {\n            valueEl.style.color = '#5fff8f';\n        } else if (isIndicator && defaultValue === 'OFF') {\n            valueEl.style.color = '#ff7f7f';\n        }\n        \n        row.appendChild(valueEl);\n    }\n\n    /**\n     * Creates the systems control button\n     */\n    static createControlsButton(panel: HTMLElement): void {\n        const controlsButton = document.createElement('button');\n        controlsButton.id = 'show-controls';\n        controlsButton.textContent = 'SYSTEM CONTROLS';\n        HUDStyles.applyStyles(controlsButton, HUDStyles.getButtonStyles());\n        \n        controlsButton.addEventListener('mouseover', () => {\n            HUDStyles.applyStyles(controlsButton, {\n                backgroundColor: 'rgba(120, 220, 232, 0.3)',\n                boxShadow: '0 0 10px rgba(120, 220, 232, 0.5)'\n            });\n        });\n        \n        controlsButton.addEventListener('mouseout', () => {\n            HUDStyles.applyStyles(controlsButton, {\n                backgroundColor: 'rgba(120, 220, 232, 0.15)',\n                boxShadow: 'none'\n            });\n        });\n        \n        panel.appendChild(controlsButton);\n    }\n\n    /**\n     * Creates the sound toggle button\n     */\n    static createSoundToggleButton(panel: HTMLElement): void {\n        const soundToggleBtn = document.createElement('button');\n        soundToggleBtn.id = 'sound-toggle';\n        soundToggleBtn.textContent = 'SOUND: ON';\n        HUDStyles.applyStyles(soundToggleBtn, {\n            background: 'none',\n            border: '1px solid rgba(120, 220, 232, 0.5)',\n            color: 'rgba(120, 220, 232, 0.9)',\n            padding: '5px 10px',\n            borderRadius: '5px',\n            cursor: 'pointer',\n            fontFamily: '\"Rajdhani\", sans-serif',\n            fontSize: '12px',\n            marginLeft: '10px',\n            marginTop: '10px',\n            outline: 'none',\n            pointerEvents: 'auto'\n        });\n        \n        // Add click handler for sound toggle\n        soundToggleBtn.addEventListener('click', () => {\n            if (window.game && window.game.audio) {\n                const isMuted = window.game.audio.toggleMute();\n                soundToggleBtn.textContent = isMuted ? 'SOUND: OFF' : 'SOUND: ON';\n            }\n        });\n        \n        panel.appendChild(soundToggleBtn);\n    }\n}","// notifications.js - Notification system and message display\n\nimport { HUDStyles } from './styles.ts';\n\nexport class HUDNotifications {\n    static createNotificationsArea(parent: HTMLElement): HTMLDivElement {\n        // Create notifications area in the top middle of the screen\n        const notificationsArea: HTMLDivElement = document.createElement('div');\n        notificationsArea.id = 'notifications-area';\n        HUDStyles.applyStyles(notificationsArea, {\n            position: 'absolute',\n            top: '20px',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            gap: '10px'\n        });\n        parent.appendChild(notificationsArea);\n        \n        // Add horde mode indicator (hidden by default)\n        HUDNotifications.createHordeModeIndicator(notificationsArea);\n        \n        return notificationsArea;\n    }\n\n    static createHordeModeIndicator(parent: HTMLElement): HTMLDivElement {\n        const hordeIndicator: HTMLDivElement = document.createElement('div');\n        hordeIndicator.id = 'horde-mode-indicator';\n        hordeIndicator.className = 'hud-panel';\n        HUDStyles.applyStyles(hordeIndicator, {\n            display: 'none', // Hidden by default, will be changed to 'flex' when active\n            padding: '8px 12px',\n            backgroundColor: 'rgba(51, 10, 10, 0.8)',\n            backdropFilter: 'blur(5px)',\n            borderRadius: '8px',\n            border: '1px solid #ff3030',\n            boxShadow: '0 0 15px rgba(255, 48, 48, 0.5)',\n            animation: 'pulse-horde 2s infinite',\n            marginBottom: '10px',\n            fontSize: '18px',\n            fontWeight: '600',\n            letterSpacing: '1px'\n        });\n        \n        // Create a flex container for the horde mode indicator content\n        const hordeContent: HTMLDivElement = document.createElement('div');\n        HUDStyles.applyStyles(hordeContent, {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            gap: '10px'\n        });\n        \n        // Add the text and timer elements\n        const hordeLabel: HTMLSpanElement = document.createElement('span');\n        HUDStyles.applyStyles(hordeLabel, {\n            color: '#ff3030',\n            textShadow: '0 0 5px rgba(255,48,48,0.5)'\n        });\n        hordeLabel.textContent = 'HORDE MODE';\n        \n        const survivalTime: HTMLSpanElement = document.createElement('span');\n        survivalTime.id = 'horde-survival-time';\n        HUDStyles.applyStyles(survivalTime, {\n            color: '#ff9999',\n            fontWeight: 'bold'\n        });\n        survivalTime.textContent = '00:00';\n        \n        // Add the elements to the container\n        hordeContent.appendChild(hordeLabel);\n        hordeContent.appendChild(survivalTime);\n        hordeIndicator.appendChild(hordeContent);\n        \n        // Add decorative corner elements\n        HUDStyles.addCornerElements(hordeIndicator);\n        \n        parent.appendChild(hordeIndicator);\n        \n        return hordeIndicator;\n    }\n\n    /**\n     * Update the horde mode indicator and survival timer\n     */\n    static updateHordeModeDisplay(): void {\n        const hordeIndicator: HTMLDivElement | null = document.getElementById('horde-mode-indicator') as HTMLDivElement;\n        const survivalTime: HTMLSpanElement | null = document.getElementById('horde-survival-time') as HTMLSpanElement;\n        \n        if (!hordeIndicator || !survivalTime) return;\n        \n        // Check if horde mode is active in the game\n        if (window.game && (window.game as any).isHordeActive) {\n            // Show the indicator if not already visible\n            if (hordeIndicator.style.display === 'none') {\n                hordeIndicator.style.display = 'flex';\n            }\n            \n            // Update the survival time display\n            if (window.game && (window.game as any).getFormattedHordeSurvivalTime) {\n                survivalTime.textContent = (window.game as any).getFormattedHordeSurvivalTime();\n            } else if (window.game && (window.game as any).hordeSurvivalTime !== undefined) {\n                // Fallback calculation if method not available\n                const totalSeconds: number = Math.floor((window.game as any).hordeSurvivalTime / 1000);\n                const minutes: number = Math.floor(totalSeconds / 60);\n                const seconds: number = totalSeconds % 60;\n                survivalTime.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n            }\n            \n            // Increase pulsing intensity based on survival time\n            // After 3 minutes, make the pulsing more urgent\n            if (window.game && (window.game as any).hordeSurvivalTime > 3 * 60 * 1000) {\n                const styleEl: HTMLStyleElement = document.createElement('style');\n                styleEl.textContent = `\n                    @keyframes pulse-horde {\n                        0% { box-shadow: 0 0 8px rgba(255, 30, 30, 0.7); }\n                        50% { box-shadow: 0 0 15px rgba(255, 30, 30, 1); }\n                        100% { box-shadow: 0 0 8px rgba(255, 30, 30, 0.7); }\n                    }\n                `;\n                document.head.appendChild(styleEl);\n                \n                // Make animation faster\n                hordeIndicator.style.animation = 'pulse-horde 1s infinite';\n            }\n        } else {\n            // Hide the indicator if horde mode is not active\n            hordeIndicator.style.display = 'none';\n        }\n    }\n\n    /**\n     * Show a temporary notification message\n     */\n    static showNotification(message: string, type: 'info' | 'warning' | 'error' | 'success' = 'info', duration: number = 3000): void {\n        const notificationsArea: HTMLDivElement | null = document.getElementById('notifications-area') as HTMLDivElement;\n        if (!notificationsArea) return;\n\n        const notification: HTMLDivElement = document.createElement('div');\n        notification.className = 'hud-notification';\n        \n        let backgroundColor, borderColor;\n        switch (type) {\n            case 'warning':\n                backgroundColor = 'rgba(255, 204, 0, 0.1)';\n                borderColor = 'rgba(255, 204, 0, 0.5)';\n                break;\n            case 'error':\n                backgroundColor = 'rgba(255, 48, 48, 0.1)';\n                borderColor = 'rgba(255, 48, 48, 0.5)';\n                break;\n            case 'success':\n                backgroundColor = 'rgba(95, 255, 143, 0.1)';\n                borderColor = 'rgba(95, 255, 143, 0.5)';\n                break;\n            default: // info\n                backgroundColor = 'rgba(120, 220, 232, 0.1)';\n                borderColor = 'rgba(120, 220, 232, 0.5)';\n        }\n\n        HUDStyles.applyStyles(notification, {\n            padding: '8px 15px',\n            backgroundColor: backgroundColor,\n            backdropFilter: 'blur(5px)',\n            borderRadius: '5px',\n            border: `1px solid ${borderColor}`,\n            fontSize: '14px',\n            color: 'rgba(255, 255, 255, 0.9)',\n            textAlign: 'center',\n            animation: 'fadeIn 0.3s ease-in-out',\n            marginBottom: '5px',\n            maxWidth: '300px',\n            wordWrap: 'break-word'\n        });\n\n        notification.textContent = message;\n        notificationsArea.appendChild(notification);\n\n        // Add fade-in animation\n        const fadeInStyle: HTMLStyleElement = document.createElement('style');\n        fadeInStyle.textContent = `\n            @keyframes fadeIn {\n                from { opacity: 0; transform: translateY(-10px); }\n                to { opacity: 1; transform: translateY(0); }\n            }\n            @keyframes fadeOut {\n                from { opacity: 1; transform: translateY(0); }\n                to { opacity: 0; transform: translateY(-10px); }\n            }\n        `;\n        document.head.appendChild(fadeInStyle);\n\n        // Remove notification after duration\n        setTimeout(() => {\n            notification.style.animation = 'fadeOut 0.3s ease-in-out';\n            setTimeout(() => {\n                if (notification.parentNode) {\n                    notification.parentNode.removeChild(notification);\n                }\n            }, 300);\n        }, duration);\n    }\n\n    /**\n     * Show a critical alert that requires attention\n     */\n    static showCriticalAlert(message: string): void {\n        HUDNotifications.showNotification(message, 'error', 5000);\n        \n        // Add screen flash effect for critical alerts\n        const flashOverlay: HTMLDivElement = document.createElement('div');\n        HUDStyles.applyStyles(flashOverlay, {\n            position: 'fixed',\n            top: '0',\n            left: '0',\n            width: '100%',\n            height: '100%',\n            backgroundColor: 'rgba(255, 0, 0, 0.1)',\n            pointerEvents: 'none',\n            zIndex: '9999',\n            animation: 'flash 0.5s ease-in-out'\n        });\n\n        const flashStyle: HTMLStyleElement = document.createElement('style');\n        flashStyle.textContent = `\n            @keyframes flash {\n                0% { opacity: 0; }\n                50% { opacity: 1; }\n                100% { opacity: 0; }\n            }\n        `;\n        document.head.appendChild(flashStyle);\n\n        document.body.appendChild(flashOverlay);\n\n        setTimeout(() => {\n            if (flashOverlay.parentNode) {\n                flashOverlay.parentNode.removeChild(flashOverlay);\n            }\n            if (flashStyle.parentNode) {\n                flashStyle.parentNode.removeChild(flashStyle);\n            }\n        }, 500);\n    }\n}","// statusIndicators.js - Various status indicators (shields, weapons, targeting system, etc.)\n\nimport { HUDStyles } from './styles.ts';\n\nexport class HUDStatusIndicators {\n    static createTargetingSystem(parent: HTMLElement): HTMLDivElement {\n        // Main crosshair container\n        const targetingSystem: HTMLDivElement = document.createElement('div');\n        targetingSystem.id = 'targeting-system';\n        HUDStyles.applyStyles(targetingSystem, {\n            position: 'absolute',\n            top: '50%',\n            left: '50%',\n            transform: 'translate(-50%, -50%)',\n            width: '100px',\n            height: '100px',\n            zIndex: '100'\n        });\n        parent.appendChild(targetingSystem);\n        \n        // Crosshair - create using SVG for more precise styling\n        const crosshair: HTMLDivElement = document.createElement('div');\n        crosshair.id = 'crosshair';\n        HUDStyles.applyStyles(crosshair, {\n            position: 'absolute',\n            top: '50%',\n            left: '50%',\n            transform: 'translate(-50%, -50%)',\n            width: '50px',\n            height: '50px'\n        });\n        \n        // SVG crosshair\n        crosshair.innerHTML = `\n            <svg width=\"50\" height=\"50\" viewBox=\"0 0 50 50\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <circle cx=\"25\" cy=\"25\" r=\"20\" stroke=\"rgba(120, 220, 232, 0.5)\" stroke-width=\"1\" stroke-dasharray=\"8 4\"/>\n                <circle cx=\"25\" cy=\"25\" r=\"3\" stroke=\"rgba(120, 220, 232, 0.8)\" stroke-width=\"1\"/>\n                <circle cx=\"25\" cy=\"25\" r=\"1\" fill=\"rgba(120, 220, 232, 0.8)\"/>\n                <line x1=\"25\" y1=\"10\" x2=\"25\" y2=\"18\" stroke=\"rgba(120, 220, 232, 0.8)\" stroke-width=\"1\"/>\n                <line x1=\"25\" y1=\"32\" x2=\"25\" y2=\"40\" stroke=\"rgba(120, 220, 232, 0.8)\" stroke-width=\"1\"/>\n                <line x1=\"10\" y1=\"25\" x2=\"18\" y2=\"25\" stroke=\"rgba(120, 220, 232, 0.8)\" stroke-width=\"1\"/>\n                <line x1=\"32\" y1=\"25\" x2=\"40\" y2=\"25\" stroke=\"rgba(120, 220, 232, 0.8)\" stroke-width=\"1\"/>\n                <!-- Add a pulsing animation to the outer circle -->\n                <circle cx=\"25\" cy=\"25\" r=\"24\" stroke=\"rgba(120, 220, 232, 0.3)\" stroke-width=\"1\">\n                    <animate attributeName=\"r\" values=\"24;28;24\" dur=\"3s\" repeatCount=\"indefinite\"/>\n                    <animate attributeName=\"opacity\" values=\"0.3;0.1;0.3\" dur=\"3s\" repeatCount=\"indefinite\"/>\n                </circle>\n            </svg>\n        `;\n        \n        targetingSystem.appendChild(crosshair);\n        \n        // Target info display that appears when targeting something\n        HUDStatusIndicators.createTargetInfoDisplay(parent);\n        \n        // Laser beam\n        HUDStatusIndicators.createLaserBeam(parent);\n        \n        return targetingSystem;\n    }\n\n    static createTargetInfoDisplay(parent: HTMLElement): HTMLDivElement {\n        const targetInfo: HTMLDivElement = document.createElement('div');\n        targetInfo.id = 'target-info';\n        targetInfo.className = 'hud-panel';\n        \n        // Detect mobile device and position accordingly\n        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||\n                          (navigator.maxTouchPoints && navigator.maxTouchPoints > 2) ||\n                          window.innerWidth <= 768;\n        \n        const positionStyles = isMobile ? {\n            bottom: '15px',\n            top: 'auto'\n        } : {\n            top: '15px',\n            bottom: 'auto'\n        };\n\n        HUDStyles.applyStyles(targetInfo, {\n            position: 'fixed',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            width: '280px',\n            padding: '10px 15px',\n            backgroundColor: 'rgba(6, 22, 31, 0.7)',\n            backdropFilter: 'blur(5px)',\n            borderRadius: '8px',\n            fontSize: '14px',\n            color: 'rgba(120, 220, 232, 0.9)',\n            border: '1px solid rgba(120, 220, 232, 0.3)',\n            boxShadow: '0 0 15px rgba(120, 220, 232, 0.2)',\n            textAlign: 'center',\n            display: 'none',\n            zIndex: '999',\n            fontFamily: '\"Rajdhani\", \"Electrolize\", sans-serif',\n            ...positionStyles\n        });\n        \n        parent.appendChild(targetInfo);\n        \n        // Add decorative corner elements to match other HUD panels\n        HUDStyles.addCornerElements(targetInfo);\n        \n        // Target info content - simplified for less clutter\n        targetInfo.innerHTML = `\n            <div id=\"target-name\" style=\"font-weight:600; margin-bottom:5px;\">NO TARGET</div>\n            <div id=\"target-distance\" style=\"margin-bottom:0;\">DISTANCE: ---</div>\n        `;\n        \n        return targetInfo;\n    }\n\n    static createLaserBeam(parent: HTMLElement): HTMLDivElement {\n        const laserBeam: HTMLDivElement = document.createElement('div');\n        laserBeam.id = 'laser-beam';\n        HUDStyles.applyStyles(laserBeam, {\n            position: 'absolute',\n            top: '50%',\n            left: '50%',\n            width: '0px',\n            height: '2px',\n            backgroundColor: 'rgba(255, 50, 50, 0.8)',\n            boxShadow: '0 0 10px rgba(255, 50, 50, 0.8)',\n            transformOrigin: 'left',\n            transform: 'rotate(var(--angle, 0deg))',\n            zIndex: '90',\n            display: 'none'\n        });\n        parent.appendChild(laserBeam);\n        \n        return laserBeam;\n    }\n\n    static createScanlineEffect(_parent: HTMLElement): HTMLDivElement | null {\n        // Scanline effect disabled - returning null\n        return null;\n        \n        // Original scanline code commented out:\n        /*\n        // Scanline effect overlay\n        const scanlineEffect = document.createElement('div');\n        scanlineEffect.id = 'scanline-effect';\n        HUDStyles.applyStyles(scanlineEffect, HUDStyles.getScanlineEffectStyles());\n        parent.appendChild(scanlineEffect);\n        \n        // Add subtle scan line that moves\n        const activeScanline = document.createElement('div');\n        activeScanline.id = 'active-scanline';\n        HUDStyles.applyStyles(activeScanline, HUDStyles.getActiveScanlineStyles());\n        parent.appendChild(activeScanline);\n        \n        return activeScanline;\n        */\n    }\n\n    /**\n     * Update shield display with current shield status\n     */\n    static updateShieldDisplay(spaceship: any): void {\n        const shieldBar: HTMLDivElement | null = document.getElementById('shield-bar') as HTMLDivElement;\n        if (!shieldBar) return;\n        \n        let shieldPercentage: number = 100;\n        let shieldFound: boolean = false;\n        \n        // Try to directly access player's health component\n        try {\n            if (window.game && (window.game as any).world) {\n                const players: any[] = (window.game as any).world.getEntitiesByTag('player');\n                if (players && players.length > 0) {\n                    const player: any = players[0];\n                    const health: any = player.getComponent('HealthComponent');\n                    \n                    if (health) {\n                        shieldPercentage = health.getShieldPercentage();\n                        \n                        // Ensure spaceship object is in sync with the HealthComponent\n                        if (spaceship) {\n                            // If HealthComponent shield is higher, use that value\n                            if (health.shield > spaceship.shield) {\n                                spaceship.shield = health.shield;\n                                spaceship.maxShield = health.maxShield;\n                            } \n                            // If spaceship shield is higher (e.g., after repair), update health component\n                            else if (spaceship.shield > health.shield) {\n                                health.shield = spaceship.shield;\n                                console.log(`Updated HealthComponent shield from spaceship: ${health.shield}`);\n                                // Recalculate shield percentage\n                                shieldPercentage = health.getShieldPercentage();\n                            }\n                        }\n                        \n                        shieldFound = true;\n                    }\n                }\n            }\n        } catch (e: any) {\n            console.error(\"Error accessing player shield component:\", e);\n        }\n        \n        // Fallback to spaceship object if health component not found\n        if (!shieldFound && spaceship && spaceship.shield !== undefined) {\n            shieldPercentage = (spaceship.shield / spaceship.maxShield) * 100;\n        }\n        \n        // Update the shield bar\n        shieldBar.style.width = `${shieldPercentage}%`;\n        \n        // Change color based on shield status\n        if (shieldPercentage < 25) {\n            shieldBar.style.backgroundColor = 'rgba(255, 80, 80, 0.8)'; // Red for low shields\n        } else if (shieldPercentage < 50) {\n            shieldBar.style.backgroundColor = 'rgba(255, 204, 0, 0.8)'; // Yellow for medium shields\n        } else {\n            shieldBar.style.backgroundColor = 'rgba(51, 153, 255, 0.8)'; // Blue for healthy shields\n        }\n    }\n\n    /**\n     * Update hull display with current hull status\n     */\n    static updateHullDisplay(spaceship: any): void {\n        const hullBar: HTMLDivElement | null = document.getElementById('hull-bar') as HTMLDivElement;\n        if (!hullBar) return;\n        \n        let hullPercentage: number = 100;\n        let healthFound: boolean = false;\n        \n        // Try to directly access player's health component\n        try {\n            if (window.game && (window.game as any).world) {\n                const players: any[] = (window.game as any).world.getEntitiesByTag('player');\n                if (players && players.length > 0) {\n                    const player: any = players[0];\n                    const health: any = player.getComponent('HealthComponent');\n                    \n                    if (health) {\n                        hullPercentage = health.getHealthPercentage();\n                        \n                        // Ensure spaceship object is in sync with the HealthComponent\n                        if (spaceship) {\n                            // If HealthComponent health is higher, use that value\n                            if (health.health > spaceship.hull) {\n                                spaceship.hull = health.hull;\n                                spaceship.maxHull = health.maxHull;\n                            }\n                            // If spaceship hull is higher (e.g., after repair), update health component\n                            else if (spaceship.hull > health.health) {\n                                health.health = spaceship.hull;\n                                console.log(`Updated HealthComponent health from spaceship: ${health.hull}`);\n                                // Recalculate hull percentage\n                                hullPercentage = health.getHealthPercentage();\n                            }\n                        }\n                        \n                        healthFound = true;\n                    }\n                }\n            }\n        } catch (e: any) {\n            console.error(\"Error accessing player health component:\", e);\n        }\n        \n        // Fallback to spaceship object if health component not found\n        if (!healthFound && spaceship && spaceship.hull !== undefined) {\n            hullPercentage = (spaceship.hull / spaceship.maxHull) * 100;\n        }\n        \n        // Update the hull bar\n        hullBar.style.width = `${hullPercentage}%`;\n        \n        // Change color based on hull status\n        if (hullPercentage < 30) {\n            hullBar.style.backgroundColor = 'rgba(255, 80, 80, 0.8)';\n        } else if (hullPercentage < 60) {\n            hullBar.style.backgroundColor = 'rgba(255, 204, 0, 0.8)';\n        } else {\n            hullBar.style.backgroundColor = 'rgba(120, 220, 232, 0.8)';\n        }\n    }\n\n    /**\n     * Update fuel display with current fuel status\n     */\n    static updateFuelDisplay(spaceship: any): void {\n        const fuelBar: HTMLDivElement | null = document.getElementById('fuel-bar') as HTMLDivElement;\n        const fuelValue: HTMLSpanElement | null = document.getElementById('fuel-value') as HTMLSpanElement;\n        if (!fuelBar || !spaceship) return;\n        \n        // Correctly calculate fuel percentage based on maxFuel\n        const fuelPercent: number = spaceship.maxFuel > 0 ? \n            (spaceship.fuel / spaceship.maxFuel) * 100 : 0;\n        \n        fuelBar.style.width = `${fuelPercent}%`;\n        \n        // Change color based on fuel level\n        if (fuelPercent < 20) {\n            fuelBar.style.backgroundColor = 'rgba(255, 80, 80, 0.8)';\n        } else if (fuelPercent < 40) {\n            fuelBar.style.backgroundColor = 'rgba(255, 204, 0, 0.8)';\n        } else {\n            fuelBar.style.backgroundColor = 'rgba(120, 220, 232, 0.8)';\n        }\n        \n        // Update text display if it exists\n        if (fuelValue) {\n            fuelValue.textContent = `${Math.round(spaceship.fuel)} / ${Math.round(spaceship.maxFuel)}`;\n        }\n    }\n\n    /**\n     * Update credits display\n     */\n    static updateCreditsDisplay(spaceship: any): void {\n        const creditsDisplay: HTMLElement | null = document.getElementById('credits-value');\n        if (creditsDisplay && spaceship) {\n            creditsDisplay.textContent = `${spaceship.credits} CR`;\n        }\n    }\n\n    /**\n     * Update location coordinates display\n     */\n    static updateCoordinates(x: number, y: number, z: number): void {\n        const coordsElement: HTMLElement | null = document.getElementById('location-coordinates');\n        if (coordsElement) {\n            coordsElement.textContent = `X: ${Math.round(x)} Y: ${Math.round(y)} Z: ${Math.round(z)}`;\n        }\n    }\n\n    /**\n     * Update FPS display\n     */\n    static updateFPS(fps: number, cap: number): void {\n        const fpsElement: HTMLElement | null = document.getElementById('fps-display');\n        if (fpsElement) {\n            if (cap) {\n                // Show actual FPS and the cap\n                fpsElement.textContent = `FPS: ${Math.round(fps)}/${cap}`;\n                \n                // Color code based on performance relative to cap\n                if (fps < cap * 0.9) {\n                    // Below 90% of target - indicate performance issues\n                    fpsElement.style.color = \"rgba(255, 120, 120, 0.9)\";\n                } else {\n                    // Normal performance - standard color\n                    fpsElement.style.color = \"rgba(120, 220, 232, 0.8)\";\n                }\n            } else {\n                // Just show FPS for uncapped mode\n                fpsElement.textContent = `FPS: ${Math.round(fps)}`;\n                fpsElement.style.color = \"rgba(120, 220, 232, 0.8)\";\n            }\n            \n            // Add auto indicator if using monitor refresh rate\n            if (window.game && \n                (window.game as any).ui && \n                (window.game as any).ui.settings && \n                (window.game as any).ui.settings.settings.frameRateCap === 'auto') {\n                \n                if (cap > 0) {\n                    // Show it's using auto mode with the detected refresh rate\n                    fpsElement.textContent = `FPS: ${Math.round(fps)}/${cap} (Auto)`;\n                } else {\n                    // Using unlimited because refresh rate is high\n                    fpsElement.textContent = `FPS: ${Math.round(fps)} (Auto: Unlimited)`;\n                }\n            }\n        }\n    }\n\n    /**\n     * Update location display\n     */\n    static updateLocation(_locationName: string, systemName: string = 'Unknown System'): void {\n        const currentSystem: HTMLElement | null = document.getElementById('current-system');\n        \n        if (currentSystem) {\n            currentSystem.textContent = systemName.toUpperCase();\n        }\n    }\n}","// eventHandlers.js - Event handling and updates for HUD components\n\nimport { HUDStyles } from './styles.ts';\n\nexport class HUDEventHandlers {\n    animationFrames: number[];\n    glitchInterval: ReturnType<typeof setInterval> | null;\n    scanline: HTMLDivElement | null;\n    constructor() {\n        this.animationFrames = [];\n        this.glitchInterval = null;\n        this.scanline = null;\n    }\n\n    /**\n     * Initialize startup animation and effects\n     */\n    animateHudIn(): void {\n        // Add glitch effect for initialization\n        this.addStartupGlitchEffect();\n        \n        // Animate scanlines\n        setTimeout(() => {\n            if (this.scanline) {\n                this.animateScanline();\n            }\n        }, 1500);\n    }\n\n    /**\n     * Add startup glitch effect to show HUD is initializing\n     */\n    addStartupGlitchEffect(): void {\n        const hudContainer: HTMLDivElement | null = document.getElementById('hud-container') as HTMLDivElement;\n        if (!hudContainer) return;\n        \n        // Incremental fade-in with glitches\n        setTimeout(() => {\n            hudContainer.style.opacity = '0.3';\n            this.addGlitch(hudContainer);\n        }, 300);\n        \n        setTimeout(() => {\n            hudContainer.style.opacity = '0.7';\n            this.addGlitch(hudContainer);\n        }, 800);\n        \n        setTimeout(() => {\n            hudContainer.style.opacity = '1';\n            this.addGlitch(hudContainer);\n        }, 1200);\n        \n        // Start random glitch effects at intervals\n        this.glitchInterval = setInterval(() => {\n            if (Math.random() > 0.7) {\n                this.addGlitch(hudContainer);\n            }\n        }, 5000);\n    }\n\n    /**\n     * Add glitch effect to an element\n     */\n    addGlitch(element: HTMLElement): void {\n        // Create a temporary animation\n        const animationName = HUDStyles.createGlitchAnimation();\n        \n        // Apply animation\n        element.style.animation = `${animationName} 1s forwards`;\n        \n        // Remove animation after it's complete\n        setTimeout(() => {\n            element.style.animation = '';\n            // Find and remove the style element\n            const styles = document.querySelectorAll('style');\n            styles.forEach(style => {\n                if (style.textContent.includes(animationName)) {\n                    style.remove();\n                }\n            });\n        }, 1000);\n    }\n\n    /**\n     * Animate the scanline moving down the screen\n     */\n    animateScanline(): void {\n        let position: number = 0;\n        const height: number = window.innerHeight;\n        \n        const moveScanline = () => {\n            if (!this.scanline) return;\n            position = (position + 2) % height;\n            this.scanline.style.top = `${position}px`;\n            \n            // Add random flicker\n            if (Math.random() > 0.97) {\n                this.scanline.style.opacity = '0';\n                setTimeout(() => {\n                    if (this.scanline) {\n                        this.scanline.style.opacity = '0.7';\n                    }\n                }, 50);\n            }\n            \n            this.animationFrames.push(requestAnimationFrame(moveScanline));\n        };\n        \n        moveScanline();\n    }\n\n    /**\n     * Set the scanline element reference\n     */\n    setScanline(scanlineElement: HTMLDivElement): void {\n        this.scanline = scanlineElement;\n    }\n\n    /**\n     * Handle location changes with glitch effect\n     */\n    handleLocationChange(_locationName: string, _systemName: string): void {\n        const locationPanel: HTMLDivElement | null = document.getElementById('location-panel') as HTMLDivElement;\n        if (locationPanel) {\n            this.addGlitch(locationPanel);\n        }\n    }\n\n    /**\n     * Show HUD with animations\n     */\n    show(): void {\n        const hudContainer: HTMLDivElement | null = document.getElementById('hud-container') as HTMLDivElement;\n        if (hudContainer) {\n            hudContainer.style.opacity = '1';\n        }\n        \n        // Restart scanline animation\n        if (this.scanline) {\n            this.animateScanline();\n        }\n        \n        // Restart glitch interval\n        if (!this.glitchInterval) {\n            this.glitchInterval = setInterval(() => {\n                if (Math.random() > 0.7) {\n                    this.addGlitch(hudContainer);\n                }\n            }, 5000);\n        }\n    }\n\n    /**\n     * Hide HUD\n     */\n    hide(): void {\n        const hudContainer: HTMLDivElement | null = document.getElementById('hud-container') as HTMLDivElement;\n        if (hudContainer) {\n            hudContainer.style.opacity = '0';\n        }\n        \n        // Clear animation frames\n        this.animationFrames.forEach(frame => cancelAnimationFrame(frame));\n        this.animationFrames = [];\n        \n        // Clear glitch interval\n        if (this.glitchInterval) {\n            clearInterval(this.glitchInterval);\n            this.glitchInterval = null;\n        }\n    }\n\n    /**\n     * Clean up resources and event listeners\n     */\n    destroy(): void {\n        // Cancel any active animation frames\n        this.animationFrames.forEach((frameId: number) => {\n            cancelAnimationFrame(frameId);\n        });\n        this.animationFrames = [];\n        \n        // Clear intervals\n        if (this.glitchInterval) {\n            clearInterval(this.glitchInterval);\n            this.glitchInterval = null;\n        }\n        \n        // Remove DOM event listeners\n        const controls: any = document.getElementById('show-controls');\n        if (controls) {\n            controls.removeEventListener('click', controls.clickHandler);\n            controls.removeEventListener('mouseover', controls.mouseoverHandler);\n            controls.removeEventListener('mouseout', controls.mouseoutHandler);\n        }\n        \n        // Clear references\n        this.scanline = null;\n    }\n\n    /**\n     * Handle window resize events\n     */\n    handleResize(): void {\n        // Update scanline animation bounds if needed\n        if (this.scanline) {\n            // Restart scanline animation with new dimensions\n            this.animateScanline();\n        }\n    }\n\n    /**\n     * Handle performance monitoring\n     */\n    handlePerformanceUpdate(fps: number, _frameTime: number): void {\n        // Could add performance-based UI adjustments here\n        // For example, reduce effects if FPS is low\n        if (fps < 30) {\n            // Reduce glitch frequency if performance is poor\n            if (this.glitchInterval) {\n                clearInterval(this.glitchInterval);\n                this.glitchInterval = setInterval(() => {\n                    if (Math.random() > 0.9) { // Less frequent\n                        this.addGlitch(document.getElementById('hud-container') as HTMLDivElement);\n                    }\n                }, 10000); // Less often\n            }\n        }\n    }\n\n    /**\n     * Handle game state changes\n     */\n    handleGameStateChange(newState: string, _oldState: string): void {\n        // React to game state changes with appropriate HUD updates\n        switch (newState) {\n            case 'playing':\n                this.show();\n                break;\n            case 'paused':\n                // Maybe dim the HUD slightly\n                const hudContainer: HTMLDivElement | null = document.getElementById('hud-container') as HTMLDivElement;\n                if (hudContainer) {\n                    hudContainer.style.opacity = '0.5';\n                }\n                break;\n            case 'game-over':\n                this.hide();\n                break;\n        }\n    }\n\n    /**\n     * Handle critical events that need immediate visual feedback\n     */\n    handleCriticalEvent(eventType: string, _data: any): void {\n        const hudContainer: HTMLDivElement | null = document.getElementById('hud-container') as HTMLDivElement;\n        \n        switch (eventType) {\n            case 'low-health':\n                // Flash red for low health\n                if (hudContainer) {\n                    hudContainer.style.filter = 'hue-rotate(0deg) saturate(1.5)';\n                    setTimeout(() => {\n                        hudContainer.style.filter = 'none';\n                    }, 200);\n                }\n                break;\n            case 'shield-down':\n                // Flash blue for shield failure\n                if (hudContainer) {\n                    hudContainer.style.filter = 'hue-rotate(240deg) saturate(1.5)';\n                    setTimeout(() => {\n                        hudContainer.style.filter = 'none';\n                    }, 300);\n                }\n                break;\n            case 'low-fuel':\n                // Flash yellow for low fuel\n                if (hudContainer) {\n                    hudContainer.style.filter = 'hue-rotate(60deg) saturate(1.5)';\n                    setTimeout(() => {\n                        hudContainer.style.filter = 'none';\n                    }, 250);\n                }\n                break;\n        }\n    }\n}","// helpers.js - Utility functions and formatting for HUD components\n\nexport class HUDHelpers {\n    /**\n     * Format a number with appropriate units (K, M, B)\n     */\n    static formatNumber(num: number): string {\n        if (num >= 1000000000) {\n            return (num / 1000000000).toFixed(1) + 'B';\n        }\n        if (num >= 1000000) {\n            return (num / 1000000).toFixed(1) + 'M';\n        }\n        if (num >= 1000) {\n            return (num / 1000).toFixed(1) + 'K';\n        }\n        return num.toString();\n    }\n\n    /**\n     * Format time in MM:SS format\n     */\n    static formatTime(milliseconds: number): string {\n        const totalSeconds = Math.floor(milliseconds / 1000);\n        const minutes = Math.floor(totalSeconds / 60);\n        const seconds = totalSeconds % 60;\n        return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n    }\n\n    /**\n     * Format coordinates for display\n     */\n    static formatCoordinates(x: number, y: number, z: number): string {\n        return `X: ${Math.round(x)} Y: ${Math.round(y)} Z: ${Math.round(z)}`;\n    }\n\n    /**\n     * Format distance with appropriate units\n     */\n    static formatDistance(distance: number): string {\n        if (distance >= 1000) {\n            return `${(distance / 1000).toFixed(1)} km`;\n        }\n        return `${Math.round(distance)} m`;\n    }\n\n    /**\n     * Format percentage for display\n     */\n    static formatPercentage(value: number, maxValue: number): number {\n        if (maxValue === 0) return 0;\n        return Math.round((value / maxValue) * 100);\n    }\n\n    /**\n     * Get color based on percentage value (green to red)\n     */\n    static getStatusColor(percentage: number): string {\n        if (percentage >= 75) {\n            return 'rgba(95, 255, 143, 0.8)'; // Green\n        } else if (percentage >= 50) {\n            return 'rgba(255, 255, 95, 0.8)'; // Yellow\n        } else if (percentage >= 25) {\n            return 'rgba(255, 204, 0, 0.8)'; // Orange\n        } else {\n            return 'rgba(255, 80, 80, 0.8)'; // Red\n        }\n    }\n\n    /**\n     * Get fuel color based on fuel level\n     */\n    static getFuelColor(fuelPercent: number): string {\n        if (fuelPercent < 20) {\n            return 'rgba(255, 80, 80, 0.8)'; // Red for critical\n        } else if (fuelPercent < 40) {\n            return 'rgba(255, 204, 0, 0.8)'; // Yellow for low\n        } else {\n            return 'rgba(120, 220, 232, 0.8)'; // Blue for normal\n        }\n    }\n\n    /**\n     * Get shield color based on shield level\n     */\n    static getShieldColor(shieldPercent: number): string {\n        if (shieldPercent < 25) {\n            return 'rgba(255, 80, 80, 0.8)'; // Red for low shields\n        } else if (shieldPercent < 50) {\n            return 'rgba(255, 204, 0, 0.8)'; // Yellow for medium shields\n        } else {\n            return 'rgba(51, 153, 255, 0.8)'; // Blue for healthy shields\n        }\n    }\n\n    /**\n     * Get hull color based on hull integrity\n     */\n    static getHullColor(hullPercent: number): string {\n        if (hullPercent < 30) {\n            return 'rgba(255, 80, 80, 0.8)'; // Red for critical damage\n        } else if (hullPercent < 60) {\n            return 'rgba(255, 204, 0, 0.8)'; // Yellow for damaged\n        } else {\n            return 'rgba(120, 220, 232, 0.8)'; // Blue for intact\n        }\n    }\n\n    /**\n     * Check if device is mobile\n     */\n    static isMobileDevice(): boolean {\n        return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||\n               (navigator.maxTouchPoints && navigator.maxTouchPoints > 2) ||\n               window.innerWidth <= 768;\n    }\n\n    /**\n     * Clamp a value between min and max\n     */\n    static clamp(value: number, min: number, max: number): number {\n        return Math.min(Math.max(value, min), max);\n    }\n\n    /**\n     * Linear interpolation between two values\n     */\n    static lerp(start: number, end: number, factor: number): number {\n        return start + (end - start) * factor;\n    }\n\n    /**\n     * Convert degrees to radians\n     */\n    static degToRad(degrees: number): number {\n        return degrees * (Math.PI / 180);\n    }\n\n    /**\n     * Convert radians to degrees\n     */\n    static radToDeg(radians: number): number {\n        return radians * (180 / Math.PI);\n    }\n\n    /**\n     * Get resource icon color based on type\n     */\n    static getResourceColor(resourceType: string): string {\n        switch (resourceType.toLowerCase()) {\n            case 'iron':\n                return 'rgba(180, 180, 180, 0.8)';\n            case 'gold':\n                return 'rgba(255, 215, 0, 0.8)';\n            case 'platinum':\n                return 'rgba(229, 228, 226, 0.8)';\n            case 'titanium':\n                return 'rgba(135, 135, 135, 0.8)';\n            case 'uranium':\n                return 'rgba(0, 255, 0, 0.8)';\n            default:\n                return 'rgba(120, 220, 232, 0.8)';\n        }\n    }\n\n    /**\n     * Generate a random ID for temporary elements\n     */\n    static generateId(prefix: string = 'hud'): string {\n        return `${prefix}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n    }\n\n    /**\n     * Debounce function to limit how often a function can be called\n     */\n    static debounce(func: Function, wait: number): (...args: any[]) => void {\n        let timeout: ReturnType<typeof setTimeout> | undefined;\n        return function executedFunction(...args: any[]) {\n            const later = () => {\n                clearTimeout(timeout);\n                func(...args);\n            };\n            clearTimeout(timeout);\n            timeout = setTimeout(later, wait);\n        };\n    }\n\n    /**\n     * Throttle function to limit how often a function can be called\n     */\n    static throttle(func: Function, limit: number): (...args: any[]) => void {\n        let inThrottle: boolean;\n        return function(this: any) {\n            const args = arguments;\n            const context = this;\n            if (!inThrottle) {\n                func.apply(context, args);\n                inThrottle = true;\n                setTimeout(() => inThrottle = false, limit);\n            }\n        };\n    }\n\n    /**\n     * Safe access to nested object properties\n     */\n    static safeGet(obj: Record<string, any>, path: string, defaultValue: any = null): any {\n        try {\n            return path.split('.').reduce((current, key) => current[key], obj) ?? defaultValue;\n        } catch {\n            return defaultValue;\n        }\n    }\n\n    /**\n     * Check if an element is visible in the viewport\n     */\n    static isElementVisible(element: HTMLElement | null): boolean {\n        if (!element) return false;\n        \n        const rect = element.getBoundingClientRect();\n        return (\n            rect.top >= 0 &&\n            rect.left >= 0 &&\n            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n            rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n        );\n    }\n\n    /**\n     * Get the current game state safely\n     */\n    static getGameState(): string {\n        return HUDHelpers.safeGet(window, 'game.state', 'unknown');\n    }\n\n    /**\n     * Get player data safely\n     */\n    static getPlayerData(): any {\n        try {\n            if (window.game && window.game.world) {\n                const players: any[] = window.game.world.getEntitiesByTag('player');\n                return players && players.length > 0 ? players[0] : null;\n            }\n        } catch (e: any) {\n            console.error('Error accessing player data:', e);\n        }\n        return null;\n    }\n\n    /**\n     * Get player health component safely\n     */\n    static getPlayerHealthComponent(): any {\n        const player: any = HUDHelpers.getPlayerData();\n        if (player) {\n            try {\n                return player.getComponent('HealthComponent');\n            } catch (e: any) {\n                console.error('Error accessing health component:', e);\n            }\n        }\n        return null;\n    }\n\n    /**\n     * Validate and sanitize user input\n     */\n    static sanitizeString(str: string): string {\n        if (typeof str !== 'string') return '';\n        return str.replace(/[<>'\"&]/g, '');\n    }\n\n    /**\n     * Check if a value is numeric\n     */\n    static isNumeric(value: any): boolean {\n        return !isNaN(parseFloat(value)) && isFinite(value);\n    }\n\n    /**\n     * Get optimal text color for given background color\n     */\n    static getOptimalTextColor(backgroundColor: string): string {\n        // Simple luminance calculation to determine if text should be light or dark\n        const rgb: number[] | null = backgroundColor.match(/\\d+/g)?.map(Number) || null;\n        if (rgb && rgb.length >= 3) {\n            const luminance: number = (0.299 * rgb[0] + 0.587 * rgb[1] + 0.114 * rgb[2]) / 255;\n            return luminance > 0.5 ? '#000000' : '#ffffff';\n        }\n        return '#ffffff'; // Default to white\n    }\n}","// hud.js - Refactored HUD orchestrator class\n\nimport { HUDStyles } from './components/hud/styles.js';\nimport { HUDDisplays } from './components/hud/displays.js';\nimport { HUDNotifications } from './components/hud/notifications.js';\nimport { HUDStatusIndicators } from './components/hud/statusIndicators.js';\nimport { HUDEventHandlers } from './components/hud/eventHandlers.js';\nimport { HUDHelpers } from './components/hud/helpers.js';\n\ntype HUDSpaceship = {\n    [key: string]: unknown;\n};\n\ntype HUDNotificationType = 'info' | 'warning' | 'error' | 'success';\n\nexport class HUD {\n    spaceship: HUDSpaceship | null;\n    eventHandlers: HUDEventHandlers | null;\n\n    constructor(spaceship: HUDSpaceship) {\n        this.spaceship = spaceship;\n        this.eventHandlers = new HUDEventHandlers();\n        this.setupHUD();\n        this.eventHandlers?.animateHudIn();\n    }\n    \n    setupHUD(): void {\n        // Initialize styles first\n        HUDStyles.initializeStyles();\n        \n        // Create main HUD container\n        const hudContainer = this.createMainContainer();\n        \n        // Create scanline effect and get reference\n        const scanline = HUDStatusIndicators.createScanlineEffect(hudContainer);\n        if (scanline) {\n            this.eventHandlers?.setScanline(scanline);\n        }\n        \n        // Create all HUD panels\n        HUDDisplays.createFlightPanel(hudContainer);\n        HUDDisplays.createStatusPanel(hudContainer);\n        HUDStatusIndicators.createTargetingSystem(hudContainer);\n        HUDDisplays.createLocationPanel(hudContainer);\n        HUDDisplays.createResourcePanel(hudContainer);\n        HUDNotifications.createNotificationsArea(hudContainer);\n    }\n    \n    createMainContainer(): HTMLDivElement {\n        const hudContainer = document.createElement('div');\n        hudContainer.id = 'hud-container';\n        HUDStyles.applyStyles(hudContainer, HUDStyles.getMainContainerStyles());\n        document.body.appendChild(hudContainer);\n        return hudContainer;\n    }\n    \n    update(): void {\n        if (!this.spaceship) return;\n        \n        // Update all status indicators\n        HUDStatusIndicators.updateShieldDisplay(this.spaceship);\n        HUDStatusIndicators.updateHullDisplay(this.spaceship);\n        HUDStatusIndicators.updateFuelDisplay(this.spaceship);\n        HUDStatusIndicators.updateCreditsDisplay(this.spaceship);\n        \n        // Update horde mode display\n        HUDNotifications.updateHordeModeDisplay();\n    }\n    \n    updateLocation(locationName: string | null, systemName = 'Unknown System'): void {\n        const safeLocation = locationName ?? 'Unknown Location';\n        HUDStatusIndicators.updateLocation(safeLocation, systemName);\n        this.eventHandlers?.handleLocationChange(safeLocation, systemName);\n    }\n    \n    updateCoordinates(x: number, y: number, z: number): void {\n        HUDStatusIndicators.updateCoordinates(x, y, z);\n    }\n    \n    updateFPS(fps: number, cap?: number): void {\n        HUDStatusIndicators.updateFPS(fps, cap ?? 0);\n    }\n    \n    hide(): void {\n        this.eventHandlers?.hide();\n    }\n    \n    show(): void {\n        this.eventHandlers?.show();\n    }\n    \n    destroy(): void {\n        this.eventHandlers?.destroy();\n        \n        // Remove DOM elements\n        const hudContainer = document.getElementById('hud-container') as HTMLDivElement | null;\n        if (hudContainer && hudContainer.parentNode) {\n            hudContainer.parentNode.removeChild(hudContainer);\n        }\n        \n        // Clear references\n        this.spaceship = null;\n        this.eventHandlers = null;\n    }\n    \n    // Backward compatibility methods\n    updateShieldDisplay(): void {\n        HUDStatusIndicators.updateShieldDisplay(this.spaceship);\n    }\n    \n    updateHullDisplay(): void {\n        HUDStatusIndicators.updateHullDisplay(this.spaceship);\n    }\n    \n    updateHordeModeDisplay(): void {\n        HUDNotifications.updateHordeModeDisplay();\n    }\n    \n    // Utility methods for external access\n    showNotification(message: string, type: HUDNotificationType = 'info', duration = 3000): void {\n        HUDNotifications.showNotification(message, type, duration);\n    }\n    \n    showCriticalAlert(message: string): void {\n        HUDNotifications.showCriticalAlert(message);\n    }\n    \n    // Helper method access\n    static get helpers() {\n        return HUDHelpers;\n    }\n}\n\n// Maintain backward compatibility as default export\nexport default HUD;\n","// mobileHUD.js - Simplified HUD for mobile devices\n\nexport class MobileHUD {\n    spaceship: MobileHUDSpaceship | null;\n    controls: MobileHUDControls | null;\n\n    constructor(spaceship: MobileHUDSpaceship) {\n        this.spaceship = spaceship;\n        this.controls = null; // Will be set from UI class\n        this.setupMobileHUD();\n    }\n    \n    setupMobileHUD(): void {\n        // Add CSS for animations\n        const style = document.createElement('style');\n        style.textContent = `\n            @keyframes pulse-horde-mobile {\n                0% { box-shadow: 0 0 5px rgba(255, 30, 30, 0.5); }\n                50% { box-shadow: 0 0 10px rgba(255, 30, 30, 0.8); }\n                100% { box-shadow: 0 0 5px rgba(255, 30, 30, 0.5); }\n            }\n        `;\n        document.head.appendChild(style);\n        \n        // Create main container for mobile HUD\n        const hudContainer = document.createElement('div');\n        hudContainer.id = 'mobile-hud-container';\n        hudContainer.style.position = 'absolute';\n        hudContainer.style.top = '10px';\n        hudContainer.style.right = '10px';\n        hudContainer.style.width = 'min(140px, 25vw)'; // Responsive width with minimum\n        hudContainer.style.backgroundColor = 'rgba(6, 22, 31, 0.8)';\n        hudContainer.style.backdropFilter = 'blur(5px)';\n        hudContainer.style.setProperty('webkitBackdropFilter', 'blur(5px)'); // For Safari\n        hudContainer.style.borderRadius = '8px';\n        hudContainer.style.border = '1px solid rgba(120, 220, 232, 0.3)';\n        hudContainer.style.padding = '10px';\n        hudContainer.style.color = 'rgba(120, 220, 232, 0.9)';\n        hudContainer.style.fontFamily = '\"Rajdhani\", \"Electrolize\", sans-serif';\n        hudContainer.style.fontSize = '14px';\n        hudContainer.style.boxShadow = '0 0 10px rgba(120, 220, 232, 0.2)';\n        hudContainer.style.zIndex = '1000';\n        // Add hardware acceleration to improve performance\n        hudContainer.style.transform = 'translateZ(0)';\n        hudContainer.style.backfaceVisibility = 'hidden';\n        document.body.appendChild(hudContainer);\n\n        // Create status bars with labels\n        this.createStatusBar(hudContainer, 'S', 'shield-bar-mobile', 'rgba(51, 153, 255, 0.8)');\n        this.createStatusBar(hudContainer, 'H', 'hull-bar-mobile', 'rgba(120, 220, 232, 0.8)');\n        this.createStatusBar(hudContainer, 'F', 'fuel-bar-mobile', 'rgba(120, 220, 232, 0.8)');\n        \n        // Add anomaly count display\n        this.createAnomalyDisplay(hudContainer);\n        \n        // Create cargo display\n        const cargoContainer = document.createElement('div');\n        cargoContainer.style.display = 'flex';\n        cargoContainer.style.justifyContent = 'space-between';\n        cargoContainer.style.alignItems = 'center';\n        cargoContainer.style.marginTop = '10px';\n        \n        const cargoLabel = document.createElement('div');\n        cargoLabel.textContent = 'C';\n        cargoLabel.style.marginRight = '10px';\n        cargoLabel.style.fontSize = '14px';\n        \n        const cargoValue = document.createElement('div');\n        cargoValue.id = 'cargo-value-mobile';\n        cargoValue.textContent = '0 / 1000';\n        cargoValue.style.textAlign = 'right';\n        cargoValue.style.flexGrow = '1';\n        cargoValue.style.fontSize = '14px';\n        \n        cargoContainer.appendChild(cargoLabel);\n        cargoContainer.appendChild(cargoValue);\n        hudContainer.appendChild(cargoContainer);\n        \n        // Add horde mode indicator (hidden by default)\n        const hordeContainer = document.createElement('div');\n        hordeContainer.id = 'mobile-horde-indicator';\n        hordeContainer.style.display = 'none';\n        hordeContainer.style.marginTop = '10px';\n        hordeContainer.style.padding = '5px';\n        hordeContainer.style.backgroundColor = 'rgba(255, 30, 30, 0.2)';\n        hordeContainer.style.borderRadius = '4px';\n        hordeContainer.style.border = '1px solid #ff3030';\n        hordeContainer.style.animation = 'pulse-horde-mobile 2s infinite';\n        hordeContainer.style.fontSize = '12px';\n        \n        const hordeTimer = document.createElement('div');\n        hordeTimer.id = 'mobile-horde-timer';\n        hordeTimer.textContent = '00:00';\n        hordeTimer.style.textAlign = 'center';\n        hordeTimer.style.fontWeight = 'bold';\n        hordeTimer.style.color = '#ff3030';\n        \n        hordeContainer.appendChild(hordeTimer);\n        hudContainer.appendChild(hordeContainer);\n        \n        // Add decorative corner elements\n        this.addCornerElements(hudContainer);\n    }\n    \n    createStatusBar(parent: HTMLElement, label: string, id: string, color: string): void {\n        const container = document.createElement('div');\n        container.style.display = 'flex';\n        container.style.alignItems = 'center';\n        container.style.marginBottom = '8px';\n        \n        const labelElement = document.createElement('div');\n        labelElement.textContent = label;\n        labelElement.style.marginRight = '8px';\n        labelElement.style.width = '16px';\n        labelElement.style.textAlign = 'center';\n        labelElement.style.fontSize = '14px';\n        \n        const barContainer = document.createElement('div');\n        barContainer.style.flexGrow = '1';\n        barContainer.style.height = '8px';\n        barContainer.style.backgroundColor = 'rgba(10, 30, 40, 0.5)';\n        barContainer.style.borderRadius = '4px';\n        barContainer.style.overflow = 'hidden';\n        barContainer.style.position = 'relative';\n        \n        // Add fuel value text if this is the fuel bar\n        if (id === 'fuel-bar-mobile') {\n            const fuelValue = document.createElement('div');\n            fuelValue.id = 'fuel-value-mobile';\n            fuelValue.style.position = 'absolute';\n            fuelValue.style.right = '0';\n            fuelValue.style.top = '-14px';\n            fuelValue.style.fontSize = '10px';\n            fuelValue.style.color = 'rgba(120, 220, 232, 0.9)';\n            fuelValue.textContent = '100 / 100';\n            barContainer.appendChild(fuelValue);\n        }\n        \n        const bar = document.createElement('div');\n        bar.id = id;\n        bar.style.width = '100%';\n        bar.style.height = '100%';\n        bar.style.backgroundColor = color;\n        bar.style.transition = 'width 0.2s ease';\n        \n        barContainer.appendChild(bar);\n        container.appendChild(labelElement);\n        container.appendChild(barContainer);\n        parent.appendChild(container);\n    }\n    \n    createAnomalyDisplay(parent: HTMLElement): void {\n        const anomalyContainer = document.createElement('div');\n        anomalyContainer.style.display = 'flex';\n        anomalyContainer.style.justifyContent = 'space-between';\n        anomalyContainer.style.alignItems = 'center';\n        anomalyContainer.style.marginBottom = '8px';\n        \n        const anomalyLabel = document.createElement('div');\n        anomalyLabel.textContent = 'A';\n        anomalyLabel.style.marginRight = '8px';\n        anomalyLabel.style.width = '16px';\n        anomalyLabel.style.textAlign = 'center';\n        anomalyLabel.style.fontSize = '14px';\n        \n        const anomalyCount = document.createElement('div');\n        anomalyCount.id = 'anomaly-count-mobile';\n        anomalyCount.textContent = '0';\n        anomalyCount.style.textAlign = 'right';\n        anomalyCount.style.flexGrow = '1';\n        anomalyCount.style.fontSize = '14px';\n        anomalyCount.style.fontWeight = 'bold';\n        anomalyCount.style.color = 'rgba(120, 220, 232, 0.9)';\n        \n        anomalyContainer.appendChild(anomalyLabel);\n        anomalyContainer.appendChild(anomalyCount);\n        parent.appendChild(anomalyContainer);\n    }\n    \n    addCornerElements(panel: HTMLElement): void {\n        // Top left corner\n        const topLeft = document.createElement('div');\n        topLeft.style.position = 'absolute';\n        topLeft.style.top = '0';\n        topLeft.style.left = '0';\n        topLeft.style.width = '6px';\n        topLeft.style.height = '6px';\n        topLeft.style.borderTop = '1px solid rgba(120, 220, 232, 0.8)';\n        topLeft.style.borderLeft = '1px solid rgba(120, 220, 232, 0.8)';\n        panel.appendChild(topLeft);\n        \n        // Top right corner\n        const topRight = document.createElement('div');\n        topRight.style.position = 'absolute';\n        topRight.style.top = '0';\n        topRight.style.right = '0';\n        topRight.style.width = '6px';\n        topRight.style.height = '6px';\n        topRight.style.borderTop = '1px solid rgba(120, 220, 232, 0.8)';\n        topRight.style.borderRight = '1px solid rgba(120, 220, 232, 0.8)';\n        panel.appendChild(topRight);\n        \n        // Bottom left corner\n        const bottomLeft = document.createElement('div');\n        bottomLeft.style.position = 'absolute';\n        bottomLeft.style.bottom = '0';\n        bottomLeft.style.left = '0';\n        bottomLeft.style.width = '6px';\n        bottomLeft.style.height = '6px';\n        bottomLeft.style.borderBottom = '1px solid rgba(120, 220, 232, 0.8)';\n        bottomLeft.style.borderLeft = '1px solid rgba(120, 220, 232, 0.8)';\n        panel.appendChild(bottomLeft);\n        \n        // Bottom right corner\n        const bottomRight = document.createElement('div');\n        bottomRight.style.position = 'absolute';\n        bottomRight.style.bottom = '0';\n        bottomRight.style.right = '0';\n        bottomRight.style.width = '6px';\n        bottomRight.style.height = '6px';\n        bottomRight.style.borderBottom = '1px solid rgba(120, 220, 232, 0.8)';\n        bottomRight.style.borderRight = '1px solid rgba(120, 220, 232, 0.8)';\n        panel.appendChild(bottomRight);\n    }\n    \n    update(): void {\n        // Update shield display\n        this.updateShieldDisplay();\n        \n        // Update hull display\n        this.updateHullDisplay();\n        \n        // Update fuel display\n        this.updateFuelDisplay();\n        \n        // Update cargo display\n        this.updateCargoDisplay();\n        \n        // Update anomaly count\n        this.updateAnomalyCount();\n        \n        // Update horde mode display\n        this.updateHordeModeDisplay();\n    }\n    \n    updateShieldDisplay(): void {\n        const shieldBar = document.getElementById('shield-bar-mobile') as HTMLDivElement | null;\n        if (!shieldBar) return;\n        \n        let shieldPercentage = 100;\n        \n        // Get shield data from spaceship\n        const shieldValue = this.spaceship?.shield ?? null;\n        const maxShield = this.spaceship?.maxShield ?? null;\n        if (typeof shieldValue === 'number' && typeof maxShield === 'number' && maxShield > 0) {\n            shieldPercentage = (shieldValue / maxShield) * 100;\n        }\n        \n        // Update the shield bar\n        shieldBar.style.width = `${shieldPercentage}%`;\n        \n        // Change color based on shield status\n        if (shieldPercentage < 25) {\n            shieldBar.style.backgroundColor = 'rgba(255, 80, 80, 0.8)'; // Red for low shields\n        } else if (shieldPercentage < 50) {\n            shieldBar.style.backgroundColor = 'rgba(255, 204, 0, 0.8)'; // Yellow for medium shields\n        } else {\n            shieldBar.style.backgroundColor = 'rgba(51, 153, 255, 0.8)'; // Blue for healthy shields\n        }\n    }\n    \n    updateHullDisplay(): void {\n        const hullBar = document.getElementById('hull-bar-mobile') as HTMLDivElement | null;\n        if (!hullBar) return;\n        \n        let hullPercentage = 100;\n        \n        // Get hull data from spaceship\n        const hullValue = this.spaceship?.hull ?? null;\n        const maxHull = this.spaceship?.maxHull ?? null;\n        if (typeof hullValue === 'number' && typeof maxHull === 'number' && maxHull > 0) {\n            hullPercentage = (hullValue / maxHull) * 100;\n        }\n        \n        // Update the hull bar\n        hullBar.style.width = `${hullPercentage}%`;\n        \n        // Change color based on hull status\n        if (hullPercentage < 30) {\n            hullBar.style.backgroundColor = 'rgba(255, 80, 80, 0.8)';\n        } else if (hullPercentage < 60) {\n            hullBar.style.backgroundColor = 'rgba(255, 204, 0, 0.8)';\n        } else {\n            hullBar.style.backgroundColor = 'rgba(120, 220, 232, 0.8)';\n        }\n    }\n    \n    updateFuelDisplay(): void {\n        const fuelBar = document.getElementById('fuel-bar-mobile') as HTMLDivElement | null;\n        const fuelValue = document.getElementById('fuel-value-mobile') as HTMLDivElement | null;\n        if (!fuelBar || !this.spaceship) return;\n        \n        // Correctly calculate fuel percentage based on maxFuel\n        const maxFuel = this.spaceship.maxFuel ?? 0;\n        const fuel = this.spaceship.fuel ?? 0;\n        const fuelPercent = maxFuel > 0 ? (fuel / maxFuel) * 100 : 0;\n        \n        fuelBar.style.width = `${fuelPercent}%`;\n        \n        // Change color when low based on percentage, not absolute value\n        if (fuelPercent < 20) {\n            fuelBar.style.backgroundColor = 'rgba(255, 80, 80, 0.8)';\n        } else if (fuelPercent < 40) {\n            fuelBar.style.backgroundColor = 'rgba(255, 204, 0, 0.8)';\n        } else {\n            fuelBar.style.backgroundColor = 'rgba(120, 220, 232, 0.8)';\n        }\n        \n        // Update the fuel value text display\n        if (fuelValue) {\n            fuelValue.textContent = `${Math.round(fuel)} / ${Math.round(maxFuel)}`;\n        }\n    }\n    \n    updateCargoDisplay(): void {\n        const cargoValue = document.getElementById('cargo-value-mobile') as HTMLDivElement | null;\n        if (!cargoValue) return;\n        \n        // Try to get resources from different possible sources\n        let resources = null;\n        let maxCargo = 1000; // Default max\n        \n        // First try to get from controls\n        if (this.controls && this.controls.resources) {\n            resources = this.controls.resources;\n            // Get max capacity from spaceship if available\n            if (this.spaceship && typeof this.spaceship.maxCargoCapacity === 'number') {\n                maxCargo = this.spaceship.maxCargoCapacity;\n            }\n        } \n        // Fall back to cargo component if available\n        else if (this.spaceship && this.spaceship.cargoComponent && this.spaceship.cargoComponent.resources) {\n            resources = this.spaceship.cargoComponent.resources;\n            if (typeof this.spaceship.cargoComponent.maxCapacity === 'number') {\n                maxCargo = this.spaceship.cargoComponent.maxCapacity;\n            }\n        }\n        // Last resort - use previously defined resources structure\n        else if (this.spaceship && this.spaceship.resources) {\n            resources = this.spaceship.resources;\n        }\n        \n        // If no resources found, exit\n        if (!resources) return;\n        \n        // Calculate total cargo - ensure we're dealing with numbers\n        let totalCargo = 0;\n        \n        // Properly iterate through the resources object and sum numeric values\n        for (const key in resources) {\n            if (Object.prototype.hasOwnProperty.call(resources, key)) {\n                // Get the resource amount, ensure it's a number\n                const amount = parseFloat(String(resources[key])) || 0;\n                totalCargo += amount;\n            }\n        }\n        \n        // Format to integer for display\n        totalCargo = Math.round(totalCargo);\n        \n        cargoValue.textContent = `${totalCargo} / ${maxCargo}`;\n        \n        // Change color when cargo is almost full\n        if (totalCargo >= maxCargo * 0.9) {\n            cargoValue.style.color = 'rgba(255, 80, 80, 0.9)';\n        } else if (totalCargo >= maxCargo * 0.7) {\n            cargoValue.style.color = 'rgba(255, 204, 0, 0.9)';\n        } else {\n            cargoValue.style.color = 'rgba(120, 220, 232, 0.9)';\n        }\n    }\n    \n    updateAnomalyCount(): void {\n        const anomalyCount = document.getElementById('anomaly-count-mobile') as HTMLDivElement | null;\n        if (!anomalyCount) return;\n        \n        // Get anomaly count from game object if available\n        let count = 0;\n        if (window.game && window.game.environment && window.game.environment.anomalyCount) {\n            count = window.game.environment.anomalyCount;\n        }\n        \n        // Update the anomaly counter\n        anomalyCount.textContent = count.toString();\n        \n        // Highlight if anomalies are present\n        if (count > 0) {\n            anomalyCount.style.color = 'rgba(255, 204, 0, 0.9)';\n            anomalyCount.style.textShadow = '0 0 5px rgba(255, 204, 0, 0.5)';\n        } else {\n            anomalyCount.style.color = 'rgba(120, 220, 232, 0.9)';\n            anomalyCount.style.textShadow = 'none';\n        }\n    }\n    \n    /**\n     * Update the horde mode indicator and timer in the mobile HUD\n     */\n    updateHordeModeDisplay(): void {\n        const hordeIndicator = document.getElementById('mobile-horde-indicator') as HTMLDivElement | null;\n        const hordeTimer = document.getElementById('mobile-horde-timer') as HTMLDivElement | null;\n        \n        if (!hordeIndicator || !hordeTimer) return;\n        \n        // Check if horde mode is active\n        if (window.game && window.game.isHordeActive) {\n            // Show the indicator if not already visible\n            if (hordeIndicator.style.display === 'none') {\n                hordeIndicator.style.display = 'block';\n                hordeIndicator.innerHTML = '<div style=\"text-align:center; color:#ff3030; font-weight:bold; margin-bottom:2px;\">HORDE MODE</div>';\n                hordeIndicator.appendChild(hordeTimer);\n            }\n            \n            // Update the timer\n            if (window.game.getFormattedHordeSurvivalTime) {\n                hordeTimer.textContent = window.game.getFormattedHordeSurvivalTime();\n            } else {\n                // Fallback calculation\n                const hordeSurvivalTime = window.game.hordeSurvivalTime ?? 0;\n                const totalSeconds = Math.floor(hordeSurvivalTime / 1000);\n                const minutes = Math.floor(totalSeconds / 60);\n                const seconds = totalSeconds % 60;\n                hordeTimer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n            }\n            \n            // Increase pulsing intensity after 3 minutes\n            if ((window.game.hordeSurvivalTime ?? 0) > 3 * 60 * 1000) {\n                const styleEl = document.createElement('style');\n                styleEl.textContent = `\n                    @keyframes pulse-horde-mobile {\n                        0% { box-shadow: 0 0 5px rgba(255, 30, 30, 0.7); }\n                        50% { box-shadow: 0 0 10px rgba(255, 30, 30, 1); }\n                        100% { box-shadow: 0 0 5px rgba(255, 30, 30, 0.7); }\n                    }\n                `;\n                document.head.appendChild(styleEl);\n                \n                // Make animation faster\n                hordeIndicator.style.animation = 'pulse-horde-mobile 0.8s infinite';\n                hordeIndicator.style.backgroundColor = 'rgba(255, 30, 30, 0.3)';\n            }\n        } else {\n            // Hide the indicator\n            hordeIndicator.style.display = 'none';\n        }\n    }\n    \n    hide(): void {\n        const container = document.getElementById('mobile-hud-container') as HTMLDivElement | null;\n        if (container) {\n            container.style.display = 'none';\n        }\n    }\n    \n    show(): void {\n        // Check if intro sequence is active\n        if (window.game && window.game.introSequenceActive) {\n            console.log(\"MobileHUD: Not showing HUD during intro sequence\");\n            return; // Don't show during intro\n        }\n        \n        const container = document.getElementById('mobile-hud-container') as HTMLDivElement | null;\n        if (container) {\n            container.style.display = 'block';\n        }\n    }\n    \n    // Add method to set controls reference\n    setControls(controls: MobileHUDControls): void {\n        console.log(\"MobileHUD: Setting controls reference\");\n        this.controls = controls;\n    }\n\n    // Update to handle system name and anomaly count in a simpler way\n    updateLocation(_locationName: string | null, _systemName = 'Unknown System'): void {\n        // Since we no longer show system name, we just need to update anomaly count\n        this.updateAnomalyCount();\n    }\n} \n\ntype MobileHUDResources = Record<string, number | string>;\n\ntype MobileHUDSpaceship = any;\n\ntype MobileHUDControls = {\n    resources?: MobileHUDResources;\n};\n","/**\n * Memory Management Utilities\n * Provides tools for optimizing memory usage and reducing garbage collection\n */\n\nimport * as THREE from 'three';\nimport { DEBUG_MODE } from '../globals/debug.ts';\nimport { objectPool } from '../globals/objectPool.ts';\n\n// Define the structure for typed array pools\ninterface TypedArrayPools {\n    float32: Float32Array[];\n    int32: Int32Array[];\n    uint32: Uint32Array[];\n    uint16: Uint16Array[];\n    uint8: Uint8Array[];\n}\n\nconst typedArrayPools: TypedArrayPools = {\n    float32: [],\n    int32: [],\n    uint32: [],\n    uint16: [],\n    uint8: []\n};\n\n// Maximum pool sizes to prevent memory leaks\nconst MAX_POOL_SIZE = 100;\n\n/**\n * Get a Float32Array from the pool or create a new one\n * @param size - Length of the array\n * @returns - A Float32Array of the specified size\n */\nexport function getFloat32Array(size: number): Float32Array {\n    const pool = typedArrayPools.float32;\n    \n    // Find an array of appropriate size in the pool\n    for (let i = 0; i < pool.length; i++) {\n        if (pool[i].length >= size) {\n            const array = pool.splice(i, 1)[0];\n            return array;\n        }\n    }\n    \n    // Create a new array if none found in pool\n    return new Float32Array(size);\n}\n\n/**\n * Release a Float32Array back to the pool\n * @param array - The array to release\n */\nexport function releaseFloat32Array(array: Float32Array): void {\n    if (typedArrayPools.float32.length < MAX_POOL_SIZE) {\n        // Zero out the array to prevent data leaks\n        array.fill(0);\n        typedArrayPools.float32.push(array);\n    }\n}\n\n/**\n * Get an Int32Array from the pool or create a new one\n * @param size - Length of the array\n * @returns - An Int32Array of the specified size\n */\nexport function getInt32Array(size: number): Int32Array {\n    const pool = typedArrayPools.int32;\n    \n    for (let i = 0; i < pool.length; i++) {\n        if (pool[i].length >= size) {\n            const array = pool.splice(i, 1)[0];\n            return array;\n        }\n    }\n    \n    return new Int32Array(size);\n}\n\n/**\n * Release an Int32Array back to the pool\n * @param array - The array to release\n */\nexport function releaseInt32Array(array: Int32Array): void {\n    if (typedArrayPools.int32.length < MAX_POOL_SIZE) {\n        array.fill(0);\n        typedArrayPools.int32.push(array);\n    }\n}\n\n/**\n * Get a Uint32Array from the pool or create a new one\n * @param size - Length of the array\n * @returns - A Uint32Array of the specified size\n */\nexport function getUint32Array(size: number): Uint32Array {\n    const pool = typedArrayPools.uint32;\n    \n    for (let i = 0; i < pool.length; i++) {\n        if (pool[i].length >= size) {\n            const array = pool.splice(i, 1)[0];\n            return array;\n        }\n    }\n    \n    return new Uint32Array(size);\n}\n\n/**\n * Release a Uint32Array back to the pool\n * @param array - The array to release\n */\nexport function releaseUint32Array(array: Uint32Array): void {\n    if (typedArrayPools.uint32.length < MAX_POOL_SIZE) {\n        array.fill(0);\n        typedArrayPools.uint32.push(array);\n    }\n}\n\n/**\n * Get a Uint16Array from the pool or create a new one\n * @param size - Length of the array\n * @returns - A Uint16Array of the specified size\n */\nexport function getUint16Array(size: number): Uint16Array {\n    const pool = typedArrayPools.uint16;\n    \n    for (let i = 0; i < pool.length; i++) {\n        if (pool[i].length >= size) {\n            const array = pool.splice(i, 1)[0];\n            return array;\n        }\n    }\n    \n    return new Uint16Array(size);\n}\n\n/**\n * Release a Uint16Array back to the pool\n * @param array - The array to release\n */\nexport function releaseUint16Array(array: Uint16Array): void {\n    if (typedArrayPools.uint16.length < MAX_POOL_SIZE) {\n        array.fill(0);\n        typedArrayPools.uint16.push(array);\n    }\n}\n\n/**\n * Get a Uint8Array from the pool or create a new one\n * @param size - Length of the array\n * @returns - A Uint8Array of the specified size\n */\nexport function getUint8Array(size: number): Uint8Array {\n    const pool = typedArrayPools.uint8;\n    \n    for (let i = 0; i < pool.length; i++) {\n        if (pool[i].length >= size) {\n            const array = pool.splice(i, 1)[0];\n            return array;\n        }\n    }\n    \n    return new Uint8Array(size);\n}\n\n/**\n * Release a Uint8Array back to the pool\n * @param array - The array to release\n */\nexport function releaseUint8Array(array: Uint8Array): void {\n    if (typedArrayPools.uint8.length < MAX_POOL_SIZE) {\n        array.fill(0);\n        typedArrayPools.uint8.push(array);\n    }\n}\n\n/**\n * Creates a pooled THREE.js BufferAttribute\n * @param size - Number of vertices\n * @param itemSize - Number of values per vertex (e.g. 3 for position, 2 for UV) \n * @returns - A buffer attribute backed by a pooled typed array\n */\nexport function createPooledBufferAttribute(size: number, itemSize: number): THREE.BufferAttribute {\n    const array = getFloat32Array(size * itemSize);\n    return new THREE.BufferAttribute(array, itemSize);\n}\n\n/**\n * Releases a pooled buffer attribute back to the pool\n * @param attribute - The buffer attribute to release\n */\nexport function releasePooledBufferAttribute(attribute: THREE.BufferAttribute | null): void {\n    if (attribute && attribute.array instanceof Float32Array) {\n        releaseFloat32Array(attribute.array);\n        // Ensure that the reference to the array is cleared from the attribute\n        // This might be tricky as `BufferAttribute` expects `array` to be a TypedArray.\n        // Setting it to `null` might cause issues if not handled carefully downstream.\n        // For now, we'll keep the existing behavior, but note this potential area.\n        (attribute.array as any) = null; // Type assertion to allow setting to null\n    }\n}\n\n/**\n * Fixed-size array implementation to avoid dynamic array resizing\n */\nexport class FixedArray<T> {\n    private data: (T | undefined)[];\n    public length: number;\n    public capacity: number;\n    \n    /**\n     * @param size - Maximum size of the array\n     */\n    constructor(size: number) {\n        this.data = new Array<T | undefined>(size);\n        this.length = 0;\n        this.capacity = size;\n    }\n    \n    /**\n     * Add an item to the array\n     * @param item - Item to add\n     * @returns - True if item was added, false if array is full\n     */\n    push(item: T): boolean {\n        if (this.length < this.capacity) {\n            this.data[this.length++] = item;\n            return true;\n        }\n        return false;\n    }\n    \n    /**\n     * Remove and return the last item\n     * @returns - The last item or undefined if empty\n     */\n    pop(): T | undefined {\n        if (this.length === 0) return undefined;\n        const item = this.data[--this.length];\n        this.data[this.length] = undefined; // Avoid memory leaks\n        return item;\n    }\n    \n    /**\n     * Get item at index\n     * @param index - Index to retrieve\n     * @returns - Item at that index\n     */\n    get(index: number): T | undefined {\n        if (index < 0 || index >= this.length) return undefined;\n        return this.data[index];\n    }\n    \n    /**\n     * Set item at index\n     * @param index - Index to set\n     * @param value - Value to set\n     */\n    set(index: number, value: T): void {\n        if (index < 0 || index >= this.capacity) return;\n        if (index >= this.length) this.length = index + 1;\n        this.data[index] = value;\n    }\n    \n    /**\n     * Remove item at index\n     * @param index - Index to remove\n     * @returns - True if removal was successful\n     */\n    removeAt(index: number): boolean {\n        if (index < 0 || index >= this.length) return false;\n        \n        // Shift all elements after index\n        for (let i = index; i < this.length - 1; i++) {\n            this.data[i] = this.data[i + 1];\n        }\n        \n        // Clear the last element to avoid memory leaks\n        this.data[--this.length] = undefined;\n        return true;\n    }\n    \n    /**\n     * Clear the array\n     */\n    clear(): void {\n        for (let i = 0; i < this.length; i++) {\n            this.data[i] = undefined;\n        }\n        this.length = 0;\n    }\n    \n    /**\n     * Iterate over each item\n     * @param callback - Function to call for each item\n     */\n    forEach(callback: (item: T, index: number, array: FixedArray<T>) => void): void {\n        for (let i = 0; i < this.length; i++) {\n            const item = this.data[i];\n            if (item !== undefined) {\n                callback(item, i, this);\n            }\n        }\n    }\n    \n    /**\n     * Map array items to a new array\n     * @param callback - Function to transform each item\n     * @returns - New array with transformed items\n     */\n    map<U>(callback: (item: T, index: number, array: FixedArray<T>) => U): U[] {\n        const result: U[] = [];\n        for (let i = 0; i < this.length; i++) {\n            const item = this.data[i];\n            if (item !== undefined) {\n                result.push(callback(item, i, this));\n            }\n        }\n        return result;\n    }\n    \n    /**\n     * Filter items into a new array\n     * @param callback - Predicate function to test each item\n     * @returns - New array with items that passed the test\n     */\n    filter(callback: (item: T, index: number, array: FixedArray<T>) => boolean): T[] {\n        const result: T[] = [];\n        for (let i = 0; i < this.length; i++) {\n            const item = this.data[i];\n            if (item !== undefined && callback(item, i, this)) {\n                result.push(item);\n            }\n        }\n        return result;\n    }\n}\n\n/**\n * Memory usage statistics tracking\n */\nexport const MemoryStats = {\n    vectorPoolSize: 0,\n    objectPoolSizes: {} as { [key: string]: number },\n    typedArrayPoolSizes: {} as { [key: string]: number },\n    \n    /**\n     * Update memory statistics\n     */\n    update(): void {\n        // Vector pool stats\n        if (window.vectorPool) {\n            this.vectorPoolSize = window.vectorPool.pool.length;\n        }\n        \n        // Object pool stats\n        if (objectPool?.registry?.typeToPool) { // Check for .registry and .typeToPool property\n            for (const type of Array.from(objectPool.registry.typeToPool.keys())) {\n                const pool = objectPool.registry.typeToPool.get(type);\n                if (pool) {\n                    this.objectPoolSizes[type] = pool.objects.length;\n                }\n            }\n        }\n        \n        // Typed array pool stats\n        for (const type in typedArrayPools) {\n            this.typedArrayPoolSizes[type] = (typedArrayPools as any)[type].length;\n        }\n    },\n    \n    /**\n     * Get a formatted report of memory usage\n     * @returns - Formatted memory stats\n     */\n    getReport(): string {\n        this.update();\n        \n        let report = \"Memory Pool Stats:\\n\";\n        \n        // Vector pool\n        report += `Vector Pool: ${this.vectorPoolSize} vectors\\n`;\n        \n        // Object pools\n        report += \"Object Pools:\\n\";\n        for (const type in this.objectPoolSizes) {\n            report += `  ${type}: ${this.objectPoolSizes[type]} objects\\n`;\n        }\n        \n        // Typed array pools\n        for (const type in this.typedArrayPoolSizes) {\n            report += `  ${type}: ${this.typedArrayPoolSizes[type]} arrays\\n`;\n        }\n        \n        return report;\n    },\n    \n    /**\n     * Print memory stats to console\n     */\n    logReport(): void {\n        console.log(this.getReport());\n    }\n};\n\n// Make MemoryStats globally available for debug purposes\nif (typeof window !== 'undefined') { // Check if window is defined (e.g., not in Node.js environment)\n  window.MemoryStats = MemoryStats;\n}\n\n// Export a no-op function that can replace often-created objects\n// to help identify memory hot spots\nexport function createNoOpVector(): { x: number; y: number; z: number } {\n    if (DEBUG_MODE.enabled) {\n        console.trace(\"Vector created at:\");\n    }\n    return window.vectorPool ? window.vectorPool.get() : { x: 0, y: 0, z: 0 };\n}\n","/**\n * screenFlash.ts - Screen flash effects for damage and other feedback\n * Part of Phase 3: Game Feel Overhaul\n */\n\nimport { mainMessageBus } from '../../globals/messageBus.ts';\nimport { Message } from '../../core/messageBus.ts';\n\nlet flashOverlay: HTMLDivElement | null = null;\nlet flashTimeout: number | null = null;\n\n/**\n * Initialize the screen flash overlay\n */\nexport function initScreenFlash(): void {\n    if (flashOverlay) return;\n\n    flashOverlay = document.createElement('div');\n    flashOverlay.id = 'screen-flash-overlay';\n    \n    // Initial styles\n    Object.assign(flashOverlay.style, {\n        position: 'fixed',\n        top: '0',\n        left: '0',\n        width: '100%',\n        height: '100%',\n        pointerEvents: 'none',\n        zIndex: '9999',\n        opacity: '0',\n        backgroundColor: 'transparent',\n        transition: 'opacity 50ms ease-out'\n    });\n\n    document.body.appendChild(flashOverlay);\n\n    // Subscribe to events\n    setupEventListeners();\n    \n    console.log('Screen flash system initialized');\n}\n\n/**\n * Set up event listeners for different flash triggers\n */\nfunction setupEventListeners(): void {\n    // Player damage - Red or Blue flash based on shield vs hull\n    mainMessageBus.subscribe('player.damaged', (message: Message) => {\n        const { damage, shieldDamage } = message.data;\n        \n        if (damage > 0) {\n            // Hull damage - Red flash\n            flashScreen('rgba(255, 0, 0, 0.3)', 150);\n        } else if (shieldDamage > 0) {\n            // Shield hit - Blue flash\n            flashScreen('rgba(0, 100, 255, 0.2)', 100);\n        }\n    });\n\n    // Explosion/Heavy impact - White flash\n    const explosionHandler = () => {\n        flashScreen('rgba(255, 255, 255, 0.4)', 100);\n    };\n    \n    mainMessageBus.subscribe('vfx.explosion', explosionHandler);\n    mainMessageBus.subscribe('explosion', explosionHandler);\n    \n    // Level up or special event - Gold/Yellow flash\n    mainMessageBus.subscribe('player.levelup', () => {\n        flashScreen('rgba(255, 215, 0, 0.3)', 500);\n    });\n}\n\n/**\n * Trigger a screen flash effect\n * @param color CSS color string (preferably rgba with some transparency)\n * @param duration Duration of the fade out in milliseconds\n */\nexport function flashScreen(color: string, duration: number = 200): void {\n    if (!flashOverlay) return;\n\n    // Clear any existing flash timeout\n    if (flashTimeout) {\n        clearTimeout(flashTimeout);\n        flashTimeout = null;\n    }\n\n    // Set flash color and initial opacity\n    flashOverlay.style.transition = 'none'; // Instant on\n    flashOverlay.style.backgroundColor = color;\n    flashOverlay.style.opacity = '1';\n\n    // Force reflow\n    void flashOverlay.offsetWidth;\n\n    // Start fade out\n    flashOverlay.style.transition = `opacity ${duration}ms ease-out`;\n    flashOverlay.style.opacity = '0';\n\n    // Cleanup after duration\n    flashTimeout = window.setTimeout(() => {\n        flashOverlay!.style.backgroundColor = 'transparent';\n        flashTimeout = null;\n    }, duration);\n}\n","/**\n * damageNumbers.ts - Floating damage numbers for combat feedback\n * Part of Phase 3: Game Feel Overhaul\n */\n\nimport * as THREE from 'three';\nimport { mainMessageBus } from '../../globals/messageBus.ts';\nimport { Message } from '../../core/messageBus.ts';\n\ninterface DamageNumber {\n    element: HTMLDivElement;\n    position: THREE.Vector3;\n    value: number;\n    lifetime: number;\n    maxLifetime: number;\n    color: string;\n}\n\n// References to camera and renderer for screen space conversion\nlet camera: THREE.Camera | null = null;\nlet renderer: { domElement: HTMLElement } | null = null;\n\n// Pool of reusable damage number elements\nconst numberPool: DamageNumber[] = [];\nconst activeNumbers: DamageNumber[] = [];\n\n// Damage number container\nlet container: HTMLDivElement | null = null;\n\n/**\n * Initialize the damage numbers system\n * @param cam The camera for screen space conversion\n * @param rend The renderer for getting viewport info\n */\nexport function initDamageNumbers(cam: THREE.Camera, rend: { domElement: HTMLElement }): void {\n    camera = cam;\n    renderer = rend;\n\n    // Create container if it doesn't exist\n    if (container) return;\n\n    container = document.createElement('div');\n    container.id = 'damage-numbers-container';\n\n    Object.assign(container.style, {\n        position: 'fixed',\n        top: '0',\n        left: '0',\n        width: '100%',\n        height: '100%',\n        pointerEvents: 'none',\n        zIndex: '9998',\n        fontSize: '20px',\n        fontFamily: 'Arial, sans-serif',\n        fontWeight: 'bold',\n        textShadow: '2px 2px 4px rgba(0, 0, 0, 0.8)'\n    });\n\n    document.body.appendChild(container);\n\n    // Subscribe to damage events\n    setupEventListeners();\n\n    console.log('Damage numbers system initialized');\n}\n\n/**\n * Set up event listeners for damage events\n */\nfunction setupEventListeners(): void {\n    // Player damage - Red for hull, Blue for shield\n    mainMessageBus.subscribe('player.damaged', (message: Message) => {\n        const { damage, shieldDamage, position } = message.data;\n\n        if (damage > 0 && position) {\n            showDamageNumber(position, damage, '#FF4444');\n        }\n        if (shieldDamage > 0 && position) {\n            showDamageNumber(position, shieldDamage, '#4488FF');\n        }\n    });\n\n    // Enemy damage - Red numbers\n    mainMessageBus.subscribe('enemy.damaged', (message: Message) => {\n        const { damage, position } = message.data;\n\n        if (damage > 0 && position) {\n            showDamageNumber(position, damage, '#FF4444');\n        }\n    });\n\n    // Generic entity damage fallback\n    mainMessageBus.subscribe('entity.damaged', (message: Message) => {\n        const { damage, damageType, position } = message.data;\n\n        if (damage > 0 && position) {\n            // Color based on damage type\n            let color = '#FF4444';\n            if (damageType === 'shield') {\n                color = '#4488FF';\n            } else if (damageType === 'healing') {\n                color = '#44FF44';\n            }\n            showDamageNumber(position, damage, color);\n        }\n    });\n\n    // Healing numbers - Green\n    mainMessageBus.subscribe('player.healed', (message: Message) => {\n        const { amount, position } = message.data;\n\n        if (amount > 0 && position) {\n            showDamageNumber(position, amount, '#44FF44');\n        }\n    });\n}\n\n/**\n * Create and display a damage number\n * @param worldPos World position where damage occurred\n * @param value Damage amount to display\n * @param color CSS color for the number\n */\nfunction showDamageNumber(worldPos: THREE.Vector3, value: number, color: string): void {\n    if (!camera || !renderer || !container) return;\n\n    // Reuse or create a damage number element\n    let damageNum: DamageNumber;\n\n    if (numberPool.length > 0) {\n        damageNum = numberPool.pop()!;\n        damageNum.element.style.display = 'block';\n    } else {\n        damageNum = createDamageNumberElement();\n    }\n\n    // Configure the damage number\n    damageNum.position = worldPos.clone();\n    damageNum.value = value;\n    damageNum.color = color;\n    damageNum.lifetime = 0;\n    damageNum.maxLifetime = 1000; // 1 second\n\n    // Set text and color\n    damageNum.element.textContent = `-${Math.round(value)}`;\n    damageNum.element.style.color = color;\n\n    // Set initial position\n    updateDamageNumberPosition(damageNum);\n\n    activeNumbers.push(damageNum);\n}\n\n/**\n * Create a new damage number DOM element\n */\nfunction createDamageNumberElement(): DamageNumber {\n    const element = document.createElement('div');\n\n    Object.assign(element.style, {\n        position: 'fixed',\n        whiteSpace: 'nowrap',\n        fontSize: '24px',\n        fontWeight: 'bold',\n        textShadow: '2px 2px 4px rgba(0, 0, 0, 0.9)',\n        transform: 'translateZ(0)',\n        willChange: 'transform, opacity'\n    });\n\n    container!.appendChild(element);\n\n    return {\n        element,\n        position: new THREE.Vector3(),\n        value: 0,\n        lifetime: 0,\n        maxLifetime: 1000,\n        color: '#FFFFFF'\n    };\n}\n\n/**\n * Update the screen position of a damage number based on world position\n */\nfunction updateDamageNumberPosition(damageNum: DamageNumber): void {\n    if (!camera || !renderer) return;\n\n    // Convert world position to screen space\n    const screenPos = new THREE.Vector3();\n    screenPos.copy(damageNum.position);\n    screenPos.project(camera);\n\n    // Convert from NDC to screen pixels\n    const width = renderer.domElement.clientWidth;\n    const height = renderer.domElement.clientHeight;\n\n    const x = (screenPos.x * 0.5 + 0.5) * width;\n    const y = (-screenPos.y * 0.5 + 0.5) * height;\n\n    // Apply floating animation - move up over lifetime\n    const progress = damageNum.lifetime / damageNum.maxLifetime;\n    const floatDistance = progress * 40; // Move up 40 pixels over lifetime\n\n    // Calculate scale based on damage (bigger numbers for bigger hits)\n    const scale = Math.max(0.8, Math.min(1.5, damageNum.value / 50));\n\n    // Calculate opacity (fade out)\n    const opacity = Math.max(0, 1 - progress);\n\n    damageNum.element.style.transform =\n        `translate(${x}px, ${y - floatDistance}px) scale(${scale})`;\n    damageNum.element.style.opacity = String(opacity);\n}\n\n/**\n * Update all active damage numbers\n * @param deltaTime Delta time in milliseconds\n */\nexport function updateDamageNumbers(deltaTime: number): void {\n    if (activeNumbers.length === 0) return;\n\n    // Update positions and lifetimes\n    for (let i = activeNumbers.length - 1; i >= 0; i--) {\n        const damageNum = activeNumbers[i];\n\n        damageNum.lifetime += deltaTime;\n\n        if (damageNum.lifetime >= damageNum.maxLifetime) {\n            // Move to pool\n            damageNum.element.style.display = 'none';\n            numberPool.push(damageNum);\n            activeNumbers.splice(i, 1);\n        } else {\n            // Update position and animation\n            updateDamageNumberPosition(damageNum);\n        }\n    }\n}\n\n/**\n * Clean up damage numbers system\n */\nexport function cleanupDamageNumbers(): void {\n    if (container && container.parentNode) {\n        container.parentNode.removeChild(container);\n    }\n    activeNumbers.length = 0;\n    numberPool.length = 0;\n    container = null;\n    camera = null;\n    renderer = null;\n}\n","/**\n * threatIndicators.ts - Off-screen enemy threat indicators\n * Part of Phase 4: Visual Indicators (Threat Awareness)\n *\n * Shows arrows at screen edges when enemies are off-screen to help player track threats.\n * Uses world-to-screen projection to determine enemy positions relative to viewport.\n */\n\nimport * as THREE from 'three';\nimport { Position } from '../../ecs/components';\n\n/**\n * Arrow indicator element with metadata\n */\ninterface ThreatArrow {\n    element: HTMLDivElement;\n    inUse: boolean;\n}\n\n// Configuration\nconst MAX_INDICATORS = 6;\nconst DETECTION_RANGE = 500; // Only show enemies within this range\nconst ARROW_SIZE = 30; // pixels\nconst EDGE_PADDING = 20; // pixels from screen edge\nconst DISTANCE_NEAR = 150; // Red zone\nconst DISTANCE_MEDIUM = 300; // Yellow zone\n\n// State\nlet arrowPool: ThreatArrow[] = [];\nlet container: HTMLDivElement | null = null;\nlet camera: THREE.Camera | null = null;\nlet initialized = false;\n\n/**\n * Initialize threat indicators system\n * Creates the HTML overlay container and arrow pool\n */\nexport function initThreatIndicators(): void {\n    if (initialized) return;\n\n    // Create container\n    container = document.createElement('div');\n    container.id = 'threat-indicators-container';\n\n    Object.assign(container.style, {\n        position: 'fixed',\n        top: '0',\n        left: '0',\n        width: '100%',\n        height: '100%',\n        pointerEvents: 'none',\n        zIndex: '1000'\n    });\n\n    document.body.appendChild(container);\n\n    // Create arrow pool\n    for (let i = 0; i < MAX_INDICATORS; i++) {\n        const arrow = createArrowElement();\n        arrowPool.push({\n            element: arrow,\n            inUse: false\n        });\n        container.appendChild(arrow);\n    }\n\n    initialized = true;\n    console.log('[ThreatIndicators] Initialized with', MAX_INDICATORS, 'indicators');\n}\n\n/**\n * Create a single arrow indicator element\n */\nfunction createArrowElement(): HTMLDivElement {\n    const arrow = document.createElement('div');\n    arrow.className = 'threat-arrow';\n\n    Object.assign(arrow.style, {\n        position: 'absolute',\n        width: `${ARROW_SIZE}px`,\n        height: `${ARROW_SIZE}px`,\n        borderLeft: '3px solid',\n        borderBottom: '3px solid',\n        borderColor: 'white',\n        opacity: '0',\n        transition: 'opacity 0.15s ease-out',\n        pointerEvents: 'none',\n        transformOrigin: 'center center'\n    });\n\n    return arrow;\n}\n\n/**\n * Set the camera reference (required for projection)\n */\nexport function setThreatIndicatorsCamera(cam: THREE.Camera): void {\n    camera = cam;\n}\n\n/**\n * Update threat indicators (call every frame)\n * @param enemies - Array of enemy entity IDs\n * @param playerEid - Player entity ID\n */\nexport function updateThreatIndicators(enemies: number[], playerEid: number): void {\n    if (!initialized || !camera || !container || playerEid === -1) {\n        return;\n    }\n\n    // Reset arrow pool\n    for (const arrow of arrowPool) {\n        arrow.inUse = false;\n        arrow.element.style.opacity = '0';\n    }\n\n    // Get player position\n    const playerX = Position.x[playerEid];\n    const playerY = Position.y[playerEid];\n    const playerZ = Position.z[playerEid];\n\n    // Collect enemies within detection range, sorted by distance\n    const threats: Array<{ eid: number; distance: number }> = [];\n\n    for (const eid of enemies) {\n        const dx = Position.x[eid] - playerX;\n        const dy = Position.y[eid] - playerY;\n        const dz = Position.z[eid] - playerZ;\n        const distance = Math.sqrt(dx * dx + dy * dy + dz * dz);\n\n        // Skip enemies outside detection range\n        if (distance > DETECTION_RANGE) continue;\n\n        threats.push({ eid, distance });\n    }\n\n    // Sort by distance (closest first)\n    threats.sort((a, b) => a.distance - b.distance);\n\n    // Process up to MAX_INDICATORS threats\n    let arrowIndex = 0;\n\n    const screenWidth = window.innerWidth;\n    const screenHeight = window.innerHeight;\n\n    for (const threat of threats) {\n        if (arrowIndex >= MAX_INDICATORS) break;\n\n        const { eid, distance } = threat;\n\n        // Project enemy position to NDC (Normalized Device Coordinates)\n        const worldPos = new THREE.Vector3(\n            Position.x[eid],\n            Position.y[eid],\n            Position.z[eid]\n        );\n\n        const ndc = worldPos.clone().project(camera);\n\n        // Check if enemy is off-screen\n        // NDC range: -1 to 1 for visible area\n        const isOffScreen = Math.abs(ndc.x) > 1 || Math.abs(ndc.y) > 1 || ndc.z > 1;\n\n        if (!isOffScreen) continue; // Skip on-screen enemies\n\n        // Get arrow from pool\n        const arrow = arrowPool[arrowIndex];\n        if (!arrow) break;\n\n        arrow.inUse = true;\n\n        // Calculate edge position and arrow angle\n        const { screenX, screenY, angle } = calculateEdgePosition(\n            ndc.x,\n            ndc.y,\n            screenWidth,\n            screenHeight\n        );\n\n        // Position arrow\n        arrow.element.style.left = `${screenX - ARROW_SIZE / 2}px`;\n        arrow.element.style.top = `${screenY - ARROW_SIZE / 2}px`;\n\n        // Rotate arrow to point toward enemy\n        // Base rotation: arrow points down-left (225deg), so adjust by -45deg\n        arrow.element.style.transform = `rotate(${angle - 45}deg)`;\n\n        // Color based on distance\n        const color = getDistanceColor(distance);\n        arrow.element.style.borderColor = color;\n\n        // Show arrow\n        arrow.element.style.opacity = '0.8';\n\n        arrowIndex++;\n    }\n}\n\n/**\n * Calculate screen position at edge and arrow angle\n * @param ndcX - Normalized Device Coordinate X (-1 to 1)\n * @param ndcY - Normalized Device Coordinate Y (-1 to 1)\n * @param screenWidth - Screen width in pixels\n * @param screenHeight - Screen height in pixels\n * @returns Screen position and rotation angle\n */\nfunction calculateEdgePosition(\n    ndcX: number,\n    ndcY: number,\n    screenWidth: number,\n    screenHeight: number\n): { screenX: number; screenY: number; angle: number } {\n    // Clamp NDC to screen bounds with padding\n    const paddingX = (EDGE_PADDING / screenWidth) * 2;\n    const paddingY = (EDGE_PADDING / screenHeight) * 2;\n\n    const clampedX = Math.max(-1 + paddingX, Math.min(1 - paddingX, ndcX));\n    const clampedY = Math.max(-1 + paddingY, Math.min(1 - paddingY, ndcY));\n\n    // Convert NDC to screen coordinates\n    // NDC: -1 to 1 (left to right, bottom to top)\n    // Screen: 0 to width (left to right), 0 to height (top to bottom)\n    const screenX = ((clampedX + 1) / 2) * screenWidth;\n    const screenY = ((1 - clampedY) / 2) * screenHeight; // Flip Y axis\n\n    // Calculate angle from screen center to clamped position\n    const centerX = screenWidth / 2;\n    const centerY = screenHeight / 2;\n    const angle = Math.atan2(screenY - centerY, screenX - centerX) * (180 / Math.PI);\n\n    return { screenX, screenY, angle };\n}\n\n/**\n * Get color based on enemy distance\n * @param distance - Distance to enemy\n * @returns CSS color string\n */\nfunction getDistanceColor(distance: number): string {\n    if (distance < DISTANCE_NEAR) {\n        return '#ff3030'; // Red - close threat\n    } else if (distance < DISTANCE_MEDIUM) {\n        return '#ffaa30'; // Orange - medium threat\n    } else {\n        return '#30ff30'; // Green - far threat\n    }\n}\n\n/**\n * Clean up threat indicators (call on shutdown)\n */\nexport function cleanupThreatIndicators(): void {\n    if (container && container.parentNode) {\n        container.parentNode.removeChild(container);\n    }\n\n    arrowPool = [];\n    container = null;\n    camera = null;\n    initialized = false;\n}\n","// ui.ts - Main UI class that integrates all UI components\n\nimport { HUD } from './ui/hud.ts';\nimport { MobileHUD } from './ui/mobileHUD.ts';\n// Removed direct imports for MiningDisplay, TargetingUI, StargateInterface, GameOverScreen, ControlsMenu, StarMap, BlackjackGame, Settings, StartScreen\n// import { MiningDisplay } from './ui/miningDisplay.ts';\n// import { TargetingUI } from './ui/targetingUI.ts';\n// import { StargateInterface } from './ui/stargateInterface.ts';\n// import { GameOverScreen } from './ui/gameOverScreen.ts';\n// import { ControlsMenu } from './ui/controlsMenu.ts';\n// import { StarMap } from './ui/starMap.ts';\n// import { BlackjackGame } from './ui/blackjackGame.ts';\n// import { Settings } from './ui/settings.ts';\n// import { StartScreen } from './ui/startScreen.ts';\nimport { MemoryStats } from '../utils/memoryManager.js';\nimport { MobileDetector } from '../utils/mobileDetector.js';\nimport { DEBUG_MODE } from '../globals/debug.ts';\nimport { mainMessageBus } from '../globals/messageBus.ts';\nimport { initScreenFlash } from './ui/screenFlash.ts';\nimport { initDamageNumbers, updateDamageNumbers } from './ui/damageNumbers.ts';\nimport { initThreatIndicators, setThreatIndicatorsCamera, updateThreatIndicators } from './ui/threatIndicators.ts';\nimport { getEnemies, getPlayerEntity } from '../ecs/systems/ecsRunner';\n\n// Type definitions for UI-related objects\ntype SpaceshipForUI = any;\n\ninterface StarSystemGenerator {\n    getCurrentSystemData(): { name: string } | null;\n}\n\ninterface EnvironmentForUI {\n    starSystemGenerator?: StarSystemGenerator;\n}\n\ninterface DockingSystem {\n    isDocked: boolean;\n}\n\ninterface TouchControls {\n    update(): void;\n    hide(): void;\n    show(): void;\n}\n\ninterface ControlsForUI {\n    dockingSystem?: DockingSystem;\n    touchControls?: TouchControls;\n    setupStargateUIControls?: () => void;\n    [key: string]: unknown;\n}\n\ninterface AudioForUI {\n    playSound?: (sound: string) => void;\n}\n\ninterface HUDComponent {\n    update?: () => void;\n    updateLocation?: (location: string | null, systemName: string) => void;\n    updateCoordinates?: (x: number, y: number, z: number) => void;\n    updateFPS?: (fps: number, cap?: number) => void;\n    hide?: () => void;\n    show?: () => void;\n    setControls?: (controls: any) => void;\n}\n\ninterface MiningDisplayComponent {\n    update?: () => void;\n    hide?: () => void;\n    show?: () => void;\n    setControls?: (controls: any) => void;\n}\n\ninterface TargetingUIComponent {\n    hideLockOn?: () => void;\n    hideTargetInfo?: () => void;\n}\n\ninterface StargateInterfaceComponent {\n    hideDockingPrompt?: () => void;\n    showStargateUI?: () => void;\n    setStarMap?: (starMap: any) => void;\n    setBlackjackGame?: (blackjackGame: any) => void;\n    setSettings?: (settings: any) => void;\n}\n\ninterface GameOverScreenComponent {\n    audio?: AudioForUI;\n    show?: (resources: unknown, message: unknown) => void;\n    setupGameOverScreen?: () => void;\n}\n\ninterface ControlsMenuComponent {\n    setupButtonHandler?: () => void;\n}\n\ninterface StarMapComponent {\n    dockingSystem?: DockingSystem | null;\n}\n\ninterface BlackjackGameComponent {\n    // BlackjackGame interface\n}\n\ninterface SettingsComponent {\n    settings?: {\n        showFPS?: boolean;\n    };\n}\n\ninterface StartScreenComponent {\n    isVisible?: boolean;\n}\n\n// Use any for game parameter to be compatible with different game types\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype GameForUI = any;\n\ninterface MessageBusEvent {\n    data?: {\n        message?: string;\n        duration?: number;\n        reason?: string;\n    };\n}\n\nexport class UI {\n    spaceship: SpaceshipForUI;\n    environment: EnvironmentForUI;\n    controls: ControlsForUI | null;\n    audio: AudioForUI | null;\n    isMobile: boolean;\n    hud: HUDComponent;\n    miningDisplay!: MiningDisplayComponent;\n    targetingUI!: TargetingUIComponent;\n    stargateInterface!: StargateInterfaceComponent;\n    gameOverScreen!: GameOverScreenComponent;\n    controlsMenu!: ControlsMenuComponent;\n    starMap!: StarMapComponent;\n    blackjackGame: BlackjackGameComponent | null = null;\n    settings: SettingsComponent | null = null;\n    startScreen: StartScreenComponent | null = null;\n    statsInterval?: number;\n    camera: any = null;\n    renderer: any = null;\n    \n    constructor(spaceship: SpaceshipForUI, environment: EnvironmentForUI) {\n        this.spaceship = spaceship;\n        this.environment = environment;\n        this.controls = null; // Will be set via setControls\n        this.audio = null; // Will be set via setAudio\n        this.isMobile = MobileDetector.isMobile();\n        \n        console.log(`Initializing UI components for ${this.isMobile ? 'mobile' : 'desktop'} device...`);\n        \n        // Load mobile CSS if on mobile device\n        if (this.isMobile) {\n            this.loadMobileCSS();\n        }\n        \n        // Initialize UI components\n        if (this.isMobile) {\n            this.hud = new MobileHUD(spaceship);\n        } else {\n            this.hud = new HUD(spaceship);\n        }\n    }\n    \n    // Add an async initialization method\n    async initializeUIComponents() {\n        // Initialize screen flash early so it's ready for any initialization-related flashes\n        initScreenFlash();\n\n        // Initialize threat indicators\n        initThreatIndicators();\n\n        // Initialize damage numbers if camera and renderer are available\n        if (this.camera && this.renderer) {\n            initDamageNumbers(this.camera, this.renderer);\n        }\n\n        const { MiningDisplay } = await import('./ui/miningDisplay.ts');\n        this.miningDisplay = new MiningDisplay();\n        \n        const { TargetingUI } = await import('./ui/targetingUI.ts');\n        this.targetingUI = new TargetingUI();\n        \n        const { StargateInterface } = await import('./ui/stargateInterface.ts');\n        this.stargateInterface = new StargateInterface();\n        \n        const { GameOverScreen } = await import('./ui/gameOverScreen.ts');\n        this.gameOverScreen = new GameOverScreen();\n        \n        const { ControlsMenu } = await import('./ui/controlsMenu.ts');\n        this.controlsMenu = new ControlsMenu();\n        \n        const { StarMap } = await import('./ui/starMap.ts');\n        // Initialize star map (requires environment, docking system, and stargate interface)\n        this.starMap = new StarMap(this.environment.starSystemGenerator ?? null, null, this.stargateInterface);\n        \n        // Initialize Blackjack game (will be fully initialized after audio is set)\n        this.blackjackGame = null;\n        \n        // Initialize settings (requires game instance)\n        this.settings = null;\n        \n        // Link starMap to stargateInterface\n        this.stargateInterface.setStarMap?.(this.starMap);\n        \n        // StartScreen will be initialized after game instance is available\n        this.startScreen = null;\n        \n        // Initialize performance monitoring if in debug mode\n        if (DEBUG_MODE.enabled) {\n            this.initializePerformanceMonitor();\n        }\n        \n        console.log(\"UI components initialized\");\n    }\n    \n    loadMobileCSS(): void {\n        // Create link element for mobile CSS\n        const mobileCSS = document.createElement('link');\n        mobileCSS.rel = 'stylesheet';\n        mobileCSS.href = 'css/mobile.css';\n        mobileCSS.type = 'text/css';\n        \n        // Add to document head\n        document.head.appendChild(mobileCSS);\n        \n        console.log(\"Mobile CSS loaded\");\n    }\n    \n    async setAudio(audio: AudioForUI): Promise<void> {\n        console.log(\"Setting audio reference in UI\");\n        this.audio = audio;\n        \n        // Now that we have audio, initialize BlackjackGame\n        if (this.audio) {\n            // Make sure spaceship has cargo property\n            if (this.spaceship && !this.spaceship.cargo) {\n                this.spaceship.cargo = { iron: 0, gold: 0, platinum: 0 };\n                console.warn(\"UI: Created empty cargo object for spaceship\");\n            }\n            \n            const { BlackjackGame } = await import('./ui/blackjackGame.ts');\n            this.blackjackGame = new BlackjackGame(null, this.spaceship, this.audio);\n            console.log(\"UI: Created BlackjackGame with spaceship:\", this.spaceship);\n            \n            // Link blackjackGame to stargateInterface\n            this.stargateInterface.setBlackjackGame?.(this.blackjackGame);\n        }\n    }\n    \n    setControls(controls: ControlsForUI): void {\n        console.log(\"Setting controls reference in UI\");\n        this.controls = controls;\n        \n        // Now that we have controls, we can set it in components that need it\n        if (this.miningDisplay.setControls) {\n            this.miningDisplay.setControls(this.controls);\n        }\n        \n        // Set controls in the mobile HUD if we're on mobile\n        if (this.isMobile && this.hud && this.hud.setControls) {\n            this.hud.setControls(this.controls);\n        }\n        \n        // Update star map with docking system\n        if (this.starMap && this.controls.dockingSystem) {\n            this.starMap.dockingSystem = this.controls.dockingSystem;\n        }\n        \n        // Set up button handlers\n        this.setupEventHandlers();\n    }\n\n    setCameraAndRenderer(camera: any, renderer: any): void {\n        this.camera = camera;\n        this.renderer = renderer;\n\n        // Set camera for threat indicators\n        setThreatIndicatorsCamera(camera);\n    }\n\n    // Initialize settings with the game instance\n    async initializeSettings(game: GameForUI): Promise<void> {\n        if (!game) {\n            console.error(\"Cannot initialize settings without game instance\");\n            return;\n        }\n        \n        // Create settings\n        const { Settings } = await import('./ui/settings.ts');\n        this.settings = new Settings(game);\n        \n        // Link settings to stargateInterface\n        this.stargateInterface.setSettings?.(this.settings);\n        \n        // Initialize start screen now that we have game instance\n        const { StartScreen } = await import('./ui/startScreen.ts');\n        this.startScreen = new StartScreen(game, this);\n        \n        console.log(\"Settings and StartScreen initialized with game instance\");\n    }\n    \n    /**\n     * Set up event handlers\n     */\n    setupEventHandlers(): void {\n        console.log(\"Setting up UI event handlers\");\n        \n        // Set up controls menu button handler\n        if (this.controlsMenu && this.controlsMenu.setupButtonHandler) {\n            this.controlsMenu.setupButtonHandler();\n        }\n        \n        // Set up stargate UI control handlers if controls are available\n        if (this.controls && this.controls.setupStargateUIControls) {\n            this.controls.setupStargateUIControls();\n        }\n        \n        // Listen for UI notification events\n        mainMessageBus?.subscribe('ui.notification', this.handleNotification.bind(this));\n        \n        // Add resize handler to update mobile detection\n        window.addEventListener('resize', () => {\n            const wasMobile = this.isMobile;\n            this.isMobile = MobileDetector.isMobile();\n            \n            // If device type changed, reload the page to apply correct UI\n            if (wasMobile !== this.isMobile) {\n                console.log(`Device type changed from ${wasMobile ? 'mobile' : 'desktop'} to ${this.isMobile ? 'mobile' : 'desktop'}`);\n                location.reload();\n            }\n        });\n    }\n    \n    /**\n     * Handle UI notification events\n     * @param message The notification message\n     */\n    handleNotification(message: MessageBusEvent): void {\n        if (message && message.data) {\n            const content = message.data.message || 'System notification';\n            const duration = message.data.duration || 3000;\n            this.showNotification(content, duration);\n        }\n    }\n    \n    /**\n     * Handle game over event\n     * @param _message Event data\n     */\n    handleGameOver(_message: MessageBusEvent): void {\n        // ... existing code ...\n    }\n    \n    update(deltaTime: number = 16): void {\n        // Update appropriate HUD based on device type\n        if (this.hud && this.hud.update) {\n            this.hud.update();\n        }\n\n        if (this.miningDisplay && this.miningDisplay.update) {\n            this.miningDisplay.update();\n        }\n\n        // Update damage numbers animation\n        updateDamageNumbers(deltaTime);\n\n        // Update threat indicators\n        const enemies = getEnemies();\n        const playerEid = getPlayerEntity();\n        updateThreatIndicators(enemies, playerEid);\n\n        // Update touch controls if on mobile\n        if (this.isMobile && this.controls && this.controls.touchControls) {\n            this.controls.touchControls.update();\n        }\n    }\n    \n    updateLocation(_locationName: string): void {\n        // Get the current star system name from the environment\n        let systemName = 'Unknown System';\n        if (this.environment && this.environment.starSystemGenerator) {\n            const systemData = this.environment.starSystemGenerator.getCurrentSystemData();\n            systemName = systemData ? systemData.name : 'Unknown System';\n        }\n        \n        if (this.hud && this.hud.updateLocation) {\n            // Only pass the system name since we removed the location display\n            this.hud.updateLocation(null, systemName);\n        }\n    }\n    \n    updateCoordinates(x: number, y: number, z: number): void {\n        if (this.hud && this.hud.updateCoordinates) {\n            this.hud.updateCoordinates(x, y, z);\n        }\n    }\n    \n    updateFPS(fps: number, cap?: number): void {\n        if (this.hud && this.hud.updateFPS) {\n            // Pass both actual FPS and cap to HUD\n            this.hud.updateFPS(fps, cap);\n            \n            // Control visibility of FPS display based on settings\n            if (this.settings && this.settings.settings) {\n                const fpsDisplay = document.getElementById('fps-display');\n                if (fpsDisplay) {\n                    fpsDisplay.style.display = this.settings.settings.showFPS ? 'block' : 'none';\n                }\n            }\n        }\n    }\n    \n    /**\n     * Show a notification message to the user\n     * @param message - The message to display\n     * @param duration - Time in milliseconds to show the notification\n     */\n    showNotification(message: string, duration: number = 3000): void {\n        const notificationsArea = document.getElementById('notifications-area');\n        if (!notificationsArea) return;\n        \n        const notification = document.createElement('div');\n        notification.className = 'notification';\n        notification.textContent = message;\n        notification.style.backgroundColor = 'rgba(6, 22, 31, 0.7)';\n        notification.style.backdropFilter = 'blur(5px)';\n        notification.style.color = 'rgba(120, 220, 232, 0.9)';\n        notification.style.padding = '8px 15px';\n        notification.style.borderRadius = '5px';\n        notification.style.marginBottom = '10px';\n        notification.style.border = '1px solid rgba(120, 220, 232, 0.3)';\n        notification.style.boxShadow = '0 0 10px rgba(120, 220, 232, 0.2)';\n        notification.style.textAlign = 'center';\n        notification.style.opacity = '0';\n        notification.style.transition = 'opacity 0.3s';\n        \n        notificationsArea.appendChild(notification);\n        \n        // Fade in\n        setTimeout(() => {\n            notification.style.opacity = '1';\n        }, 10);\n        \n        // Fade out and remove after duration\n        setTimeout(() => {\n            notification.style.opacity = '0';\n            setTimeout(() => {\n                if (notification.parentNode) {\n                    notification.parentNode.removeChild(notification);\n                }\n            }, 300);\n        }, duration);\n    }\n    \n    showGameOver(resources: unknown, message: unknown): void {\n        console.log(\"Showing game over screen\");\n        console.log(\"Resources data:\", resources); // Add logging to see structure\n        \n        // Show game over screen\n        if (this.gameOverScreen && this.gameOverScreen.show) {\n            // Make sure element exists in DOM first\n            if (!document.getElementById('game-over-container')) {\n                console.warn(\"Game over container not found in DOM, recreating\");\n                this.gameOverScreen.setupGameOverScreen?.();\n            }\n            \n            // Pass the audio reference to the game over screen\n            if (this.audio) {\n                this.gameOverScreen.audio = this.audio;\n            }\n            \n            // Pass the message object through directly - gameOverScreen will handle the parsing\n            this.gameOverScreen.show(resources, message);\n            \n            // Remove all direct sound playback from here\n            // The GameOverScreen will handle playing the sound\n        } else {\n            console.error(\"Game over screen not properly initialized\");\n            // Create a very simple fallback\n            const fallbackOverlay = document.createElement('div');\n            fallbackOverlay.id = 'fallback-overlay';\n            fallbackOverlay.style.position = 'fixed';\n            fallbackOverlay.style.top = '0';\n            fallbackOverlay.style.left = '0';\n            fallbackOverlay.style.width = '100%';\n            fallbackOverlay.style.height = '100%';\n            fallbackOverlay.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';\n            fallbackOverlay.style.display = 'flex';\n            fallbackOverlay.style.justifyContent = 'center';\n            fallbackOverlay.style.alignItems = 'center';\n            fallbackOverlay.style.zIndex = '9999';\n            \n            // Extract message text if it's an object\n            const messageData = message as MessageBusEvent;\n            const messageText = typeof message === 'string' ? message : \n                               (messageData && messageData.data && messageData.data.reason ? messageData.data.reason : \n                                'Your ship was destroyed!');\n            \n            const content = document.createElement('div');\n            content.innerHTML = `\n                <h1 style=\"color: #ff3030; font-size: 48px; margin-bottom: 20px;\">GAME OVER</h1>\n                <p style=\"color: #fff; font-size: 24px; margin-bottom: 30px;\">${messageText}</p>\n                <button id=\"restart-btn\" style=\"padding: 15px 30px; background-color: #ff3030; color: #fff; border: none; \n                    font-size: 24px; cursor: pointer; border-radius: 5px;\">RESTART GAME</button>\n            `;\n            fallbackOverlay.appendChild(content);\n            document.body.appendChild(fallbackOverlay);\n            \n            // Add restart button handler\n            const restartBtn = document.getElementById('restart-btn');\n            if (restartBtn) {\n                restartBtn.addEventListener('click', () => {\n                    location.reload();\n                });\n            }\n        }\n        \n        // Hide other UI elements\n        this.hideUI();\n    }\n    \n    hideUI(): void {\n        console.log(\"Hiding UI elements\");\n        \n        // Force hide ALL UI elements during intro sequence\n        if (window.game && window.game.introSequenceActive) {\n            console.log(\"Intro sequence active - forcing ALL UI elements to be hidden\");\n            \n            // Get references to each UI element we need to hide\n            const elements: (HTMLElement | null)[] = [\n                document.getElementById('hud-container'),\n                document.getElementById('mobile-hud-container'),\n                document.getElementById('pointer-lock-instructions'),\n                document.getElementById('notifications-area')\n            ];\n            \n            // Hide each found element (being careful to check if it exists)\n            elements.forEach(element => {\n                if (element) {\n                    element.style.display = 'none';\n                }\n            });\n            \n            // Hide any additional UI panels that might be visible\n            const allPanels = document.querySelectorAll('.ui-panel, .panel, .hud-panel, .status-panel');\n            allPanels.forEach(panel => {\n                if (panel instanceof HTMLElement) {\n                    panel.style.display = 'none';\n                }\n            });\n            \n            return; // Skip standard hiding - we've handled everything\n        }\n        \n        // Standard UI hiding for non-intro cases\n        // Hide main UI elements but not game over screen\n        if (this.hud && this.hud.hide) {\n            this.hud.hide();\n        }\n        \n        if (this.miningDisplay && this.miningDisplay.hide) {\n            this.miningDisplay.hide();\n        }\n        \n        if (this.targetingUI && this.targetingUI.hideLockOn) {\n            this.targetingUI.hideLockOn();\n        }\n        \n        if (this.targetingUI && this.targetingUI.hideTargetInfo) {\n            this.targetingUI.hideTargetInfo();\n        }\n        \n        if (this.stargateInterface && this.stargateInterface.hideDockingPrompt) {\n            this.stargateInterface.hideDockingPrompt();\n        }\n        \n        // Hide touch controls if on mobile\n        if (this.isMobile && this.controls && this.controls.touchControls) {\n            this.controls.touchControls.hide();\n        }\n    }\n    \n    showUI(): void {\n        console.log(\"Showing UI elements\");\n        \n        // Don't show UI if intro sequence is active\n        if (window.game && window.game.introSequenceActive) {\n            console.warn(\"showUI called while intro is still active - not showing UI elements\");\n            return; // Exit early - don't show any UI during intro\n        }\n        \n        // Don't show UI if start screen is visible\n        if (this.startScreen && this.startScreen.isVisible) {\n            console.warn(\"showUI called while start screen is visible - not showing UI elements\");\n            return;\n        }\n        \n        // First, show UI components through their interfaces\n        if (this.hud && this.hud.show) {\n            console.log(\"Calling hud.show()\");\n            this.hud.show();\n        }\n        \n        if (this.miningDisplay && this.miningDisplay.show) {\n            this.miningDisplay.show();\n        }\n        \n        // Show touch controls if on mobile\n        if (this.isMobile && this.controls && this.controls.touchControls) {\n            this.controls.touchControls.show();\n        }\n        \n        // FORCE restore elements that might have been forcibly hidden\n        // But only if intro is not active\n        if (window.game && window.game.introSequenceActive) {\n            return; // Double-check intro is not active before forcing visibility\n        }\n        \n        console.log(\"Forcing all UI elements to be displayed\");\n        \n        // Ensure HUD container is visible\n        const hudContainer = document.getElementById('hud-container');\n        if (hudContainer) {\n            console.log(\"Setting hudContainer to display:block\");\n            hudContainer.style.display = 'block';\n            hudContainer.style.visibility = 'visible'; // Double ensure visibility\n        } else {\n            console.warn(\"HUD container not found - could not make visible\");\n        }\n        \n        // Ensure mobile HUD is visible if on mobile\n        const mobileHudContainer = document.getElementById('mobile-hud-container');\n        if (mobileHudContainer) {\n            mobileHudContainer.style.display = 'block';\n            mobileHudContainer.style.visibility = 'visible';\n        }\n        \n        // Show pointer lock instructions only if not locked\n        const pointerLockInstructions = document.getElementById('pointer-lock-instructions');\n        if (pointerLockInstructions && !document.pointerLockElement) {\n            pointerLockInstructions.style.display = 'block';\n            pointerLockInstructions.style.visibility = 'visible';\n        }\n        \n        // Show notifications area\n        const notificationsArea = document.getElementById('notifications-area');\n        if (notificationsArea) {\n            notificationsArea.style.display = 'block';\n            notificationsArea.style.visibility = 'visible';\n        }\n\n        // Also show any panels that might have been hidden (except target-info which should stay hidden)\n        const allPanels = document.querySelectorAll('.ui-panel, .panel, .hud-panel, .status-panel');\n        allPanels.forEach(panel => {\n            if (panel instanceof HTMLElement) {\n                // Don't force target-info to be visible - let targeting system control it\n                if (panel.id !== 'target-info') {\n                    panel.style.display = 'block';\n                }\n                panel.style.visibility = 'visible';\n            }\n        });\n    }\n    \n    /**\n     * Initialize performance monitor for debugging\n     */\n    initializePerformanceMonitor(): void {\n        // Create container for performance stats\n        const statsContainer = document.createElement('div');\n        statsContainer.id = 'performance-stats';\n        statsContainer.style.position = 'fixed';\n        statsContainer.style.bottom = '10px';\n        statsContainer.style.right = '10px';\n        statsContainer.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';\n        statsContainer.style.color = '#0ff';\n        statsContainer.style.padding = '10px';\n        statsContainer.style.fontFamily = 'monospace';\n        statsContainer.style.fontSize = '12px';\n        statsContainer.style.borderRadius = '4px';\n        statsContainer.style.zIndex = '1000';\n        statsContainer.style.maxWidth = '300px';\n        statsContainer.style.maxHeight = '200px';\n        statsContainer.style.overflow = 'auto';\n        \n        // Memory stats container\n        const memoryStats = document.createElement('div');\n        memoryStats.id = 'memory-stats';\n        statsContainer.appendChild(memoryStats);\n        \n        // FPS counter\n        const fpsCounter = document.createElement('div');\n        fpsCounter.id = 'fps-counter';\n        statsContainer.appendChild(fpsCounter);\n        \n        // Add to DOM\n        document.body.appendChild(statsContainer);\n        \n        // Update stats every second\n        this.statsInterval = window.setInterval(() => {\n            // Update memory stats display\n            memoryStats.innerHTML = MemoryStats.getReport().replace(/\\n/g, '<br>');\n            \n            // Display current FPS if available\n            if (window.game && window.game.currentFPS) {\n                fpsCounter.innerHTML = `FPS: ${Math.round(window.game.currentFPS)}`;\n            }\n        }, 1000);\n    }\n    \n    // Make sure to clean up stats interval when necessary\n    onDisabled(): void {\n        // Clear stats interval if it exists\n        if (this.statsInterval) {\n            clearInterval(this.statsInterval);\n            this.statsInterval = undefined;\n        }\n    }\n}\n"],"file":"assets/ui-DLX1Dt1V.js"}