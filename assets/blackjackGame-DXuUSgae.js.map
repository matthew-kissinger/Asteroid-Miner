{"version":3,"file":"blackjackGame-DXuUSgae.js","sources":["../../js/modules/ui/components/blackjack/styles.ts","../../js/modules/ui/components/blackjack/gameView.ts","../../js/modules/ui/components/blackjack/cardDeck.ts","../../js/modules/ui/components/blackjack/gameLogic.ts","../../js/modules/ui/components/blackjack/animations.ts","../../js/modules/ui/components/blackjack/betting.ts","../../js/modules/ui/components/blackjack/eventHandlers.ts","../../js/modules/ui/blackjackGame.ts"],"sourcesContent":["/**\n * Blackjack Game Styles - CSS styling and visual theming\n */\n\ntype StyleMap = Record<string, string>;\n\nexport class BlackjackStyles {\n    isMobile: boolean;\n\n    constructor(isMobile: boolean = false) {\n        this.isMobile = isMobile;\n    }\n\n    /**\n     * Get main game UI styles\n     */\n    getGameUIStyles(): StyleMap {\n        return {\n            position: 'absolute',\n            top: '50%',\n            left: '50%',\n            transform: 'translate(-50%, -50%)',\n            width: this.isMobile ? '95%' : '900px',\n            maxWidth: this.isMobile ? '600px' : 'none',\n            height: this.isMobile ? 'auto' : '650px',\n            maxHeight: this.isMobile ? '85vh' : 'none',\n            backgroundColor: 'rgba(6, 22, 31, 0.85)',\n            backdropFilter: 'blur(10px)',\n            border: '2px solid #33aaff',\n            borderRadius: '15px',\n            boxShadow: '0 0 30px rgba(51, 170, 255, 0.5)',\n            padding: this.isMobile ? '15px' : '25px',\n            zIndex: '1000',\n            display: 'none',\n            fontFamily: 'Courier New, monospace',\n            color: '#fff',\n            userSelect: 'none',\n            overflowY: this.isMobile ? 'auto' : 'hidden'\n        };\n    }\n\n    /**\n     * Get mobile-specific styles\n     */\n    getMobileStyles(): StyleMap {\n        if (!this.isMobile) return {};\n        \n        return {\n            webkitOverflowScrolling: 'touch',\n            touchAction: 'pan-y',\n            overscrollBehavior: 'contain'\n        };\n    }\n\n    /**\n     * Get scanline effect styles\n     */\n    getScanlineStyles(): StyleMap {\n        return {\n            position: 'absolute',\n            top: '0',\n            left: '0',\n            width: '100%',\n            height: '100%',\n            backgroundImage: 'linear-gradient(transparent 50%, rgba(0, 0, 0, 0.1) 50%)',\n            backgroundSize: '100% 4px',\n            pointerEvents: 'none',\n            zIndex: '1001',\n            opacity: '0.15'\n        };\n    }\n\n    /**\n     * Get header styles\n     */\n    getHeaderStyles(): StyleMap {\n        return {\n            textAlign: 'center',\n            marginBottom: '20px',\n            position: 'relative'\n        };\n    }\n\n    /**\n     * Get title styles\n     */\n    getTitleStyles(): StyleMap {\n        return {\n            color: '#30cfd0',\n            textShadow: '0 0 10px rgba(48, 207, 208, 0.7)',\n            margin: '0 0 5px 0',\n            fontSize: this.isMobile ? '24px' : '32px'\n        };\n    }\n\n    /**\n     * Get subtitle styles\n     */\n    getSubtitleStyles(): StyleMap {\n        return {\n            color: 'rgba(255, 255, 255, 0.6)',\n            fontSize: this.isMobile ? '12px' : '14px',\n            letterSpacing: '2px'\n        };\n    }\n\n    /**\n     * Get close button styles\n     */\n    getCloseButtonStyles(): StyleMap {\n        const baseStyles: StyleMap = {\n            position: 'absolute',\n            top: '0',\n            right: '0',\n            backgroundColor: 'transparent',\n            border: 'none',\n            color: '#33aaff',\n            fontSize: '32px',\n            cursor: 'pointer',\n            outline: 'none',\n            padding: '0 10px',\n            lineHeight: '1'\n        };\n\n        if (this.isMobile) {\n            return {\n                ...baseStyles,\n                fontSize: '42px',\n                padding: '5px 15px',\n                backgroundColor: 'rgba(0, 0, 0, 0.3)',\n                borderRadius: '50%',\n                width: '50px',\n                height: '50px',\n                display: 'flex',\n                justifyContent: 'center',\n                alignItems: 'center',\n                boxShadow: '0 0 10px rgba(51, 170, 255, 0.5)',\n                right: '5px',\n                top: '5px'\n            };\n        }\n\n        return baseStyles;\n    }\n\n    /**\n     * Get game area styles\n     */\n    getGameAreaStyles(): StyleMap {\n        return {\n            display: 'flex',\n            flexDirection: 'column',\n            height: this.isMobile ? 'auto' : 'calc(100% - 80px)'\n        };\n    }\n\n    /**\n     * Get dealer/player area styles\n     */\n    getPlayerAreaStyles(): StyleMap {\n        return {\n            flex: '1',\n            border: '1px solid rgba(51, 170, 255, 0.3)',\n            borderRadius: '8px',\n            padding: '15px',\n            marginBottom: '15px',\n            background: 'linear-gradient(to bottom, rgba(9, 30, 42, 0.4), rgba(9, 30, 42, 0.6))'\n        };\n    }\n\n    /**\n     * Get dealer area styles\n     */\n    getDealerAreaStyles(): StyleMap {\n        return {\n            ...this.getPlayerAreaStyles(),\n            background: 'linear-gradient(to bottom, rgba(9, 30, 42, 0.6), rgba(9, 30, 42, 0.4))'\n        };\n    }\n\n    /**\n     * Get area header styles\n     */\n    getAreaHeaderStyles(): StyleMap {\n        return {\n            display: 'flex',\n            justifyContent: 'space-between',\n            marginBottom: '10px'\n        };\n    }\n\n    /**\n     * Get dealer title styles\n     */\n    getDealerTitleStyles(): StyleMap {\n        return {\n            color: '#33aaff',\n            fontWeight: 'bold'\n        };\n    }\n\n    /**\n     * Get player title styles\n     */\n    getPlayerTitleStyles(): StyleMap {\n        return {\n            color: '#30cfd0',\n            fontWeight: 'bold'\n        };\n    }\n\n    /**\n     * Get score display styles\n     */\n    getScoreStyles(isPlayer: boolean = false): StyleMap {\n        return {\n            color: '#fff',\n            fontWeight: 'bold',\n            backgroundColor: isPlayer ? 'rgba(48, 207, 208, 0.2)' : 'rgba(51, 170, 255, 0.2)',\n            padding: '0 10px',\n            borderRadius: '4px'\n        };\n    }\n\n    /**\n     * Get cards container styles\n     */\n    getCardsContainerStyles(): StyleMap {\n        return {\n            display: 'flex',\n            gap: '15px',\n            flexWrap: 'wrap',\n            height: this.isMobile ? 'auto' : '130px',\n            minHeight: this.isMobile ? '120px' : '130px'\n        };\n    }\n\n    /**\n     * Get card element styles\n     */\n    getCardStyles(faceDown: boolean = false): StyleMap {\n        return {\n            width: this.isMobile ? '70px' : '100px',\n            height: this.isMobile ? '105px' : '150px',\n            fontSize: this.isMobile ? '80%' : '100%',\n            backgroundColor: faceDown ? 'rgba(9, 30, 42, 0.8)' : 'rgba(15, 35, 50, 0.9)',\n            border: faceDown ? \n                '2px solid rgba(51, 170, 255, 0.3)' : \n                '2px solid rgba(51, 170, 255, 0.7)',\n            borderRadius: '10px',\n            boxShadow: faceDown ?\n                '0 0 5px rgba(51, 170, 255, 0.3)' :\n                '0 0 10px rgba(51, 170, 255, 0.5)',\n            position: 'relative',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            overflow: 'hidden',\n            transition: 'transform 0.3s ease'\n        };\n    }\n\n    /**\n     * Get card value styles\n     */\n    getCardValueStyles(position: 'top' | 'bottom' = 'top'): StyleMap {\n        const baseStyles: StyleMap = {\n            position: 'absolute',\n            fontSize: this.isMobile ? '14px' : '20px',\n            fontWeight: 'bold'\n        };\n\n        if (position === 'top') {\n            return {\n                ...baseStyles,\n                top: '8px',\n                left: '8px'\n            };\n        } else {\n            return {\n                ...baseStyles,\n                bottom: '8px',\n                right: '8px',\n                transform: 'rotate(180deg)'\n            };\n        }\n    }\n\n    /**\n     * Get card suit styles\n     */\n    getCardSuitStyles(position: 'top' | 'bottom' = 'top'): StyleMap {\n        const baseStyles: StyleMap = {\n            position: 'absolute',\n            fontSize: this.isMobile ? '12px' : '16px'\n        };\n\n        if (position === 'top') {\n            return {\n                ...baseStyles,\n                top: '8px',\n                right: '8px'\n            };\n        } else {\n            return {\n                ...baseStyles,\n                bottom: '8px',\n                left: '8px',\n                transform: 'rotate(180deg)'\n            };\n        }\n    }\n\n    /**\n     * Get center symbol styles\n     */\n    getCenterSymbolStyles(): StyleMap {\n        return {\n            fontSize: this.isMobile ? '28px' : '40px',\n            lineHeight: '1',\n            opacity: '0.9'\n        };\n    }\n\n    /**\n     * Get card color based on suit\n     */\n    getCardColor(suit: 'hearts' | 'diamonds' | 'clubs' | 'spades'): string {\n        return ['hearts', 'diamonds'].includes(suit) ? '#e55c8a' : '#30cfd0';\n    }\n\n    /**\n     * Get speech bubble styles\n     */\n    getSpeechBubbleStyles(): StyleMap {\n        return {\n            position: this.isMobile ? 'relative' : 'absolute',\n            bottom: this.isMobile ? 'auto' : '15px',\n            right: this.isMobile ? 'auto' : '15px',\n            marginTop: this.isMobile ? '10px' : '0',\n            backgroundColor: 'rgba(15, 40, 55, 0.9)',\n            border: '1px solid #33aaff',\n            borderRadius: '8px',\n            padding: '10px 15px',\n            maxWidth: this.isMobile ? '100%' : '300px',\n            fontStyle: 'italic',\n            color: '#fff',\n            boxShadow: '0 0 10px rgba(51, 170, 255, 0.3)',\n            display: 'none'\n        };\n    }\n\n    /**\n     * Get status area styles\n     */\n    getStatusAreaStyles(): StyleMap {\n        return {\n            height: '60px',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            marginBottom: '15px'\n        };\n    }\n\n    /**\n     * Get game status styles\n     */\n    getGameStatusStyles(): StyleMap {\n        return {\n            padding: '8px 20px',\n            borderRadius: '20px',\n            backgroundColor: 'rgba(51, 170, 255, 0.2)',\n            border: '1px solid rgba(51, 170, 255, 0.4)',\n            color: '#fff',\n            textAlign: 'center',\n            fontWeight: 'bold',\n            letterSpacing: '1px',\n            fontSize: this.isMobile ? '12px' : '14px',\n            width: this.isMobile ? '100%' : 'auto'\n        };\n    }\n\n    /**\n     * Get controls area styles\n     */\n    getControlsAreaStyles(): StyleMap {\n        return {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            height: 'auto',\n            flexDirection: this.isMobile ? 'column' : 'row',\n            gap: this.isMobile ? '15px' : '0'\n        };\n    }\n\n    /**\n     * Get betting controls styles\n     */\n    getBettingControlsStyles(): StyleMap {\n        return {\n            display: 'flex',\n            flexDirection: 'column',\n            width: this.isMobile ? '100%' : '250px'\n        };\n    }\n\n    /**\n     * Get betting title styles\n     */\n    getBettingTitleStyles(): StyleMap {\n        return {\n            marginBottom: '10px',\n            color: 'rgba(255, 255, 255, 0.8)',\n            fontWeight: 'bold'\n        };\n    }\n\n    /**\n     * Get resource options styles\n     */\n    getResourceOptionsStyles(): StyleMap {\n        return {\n            display: 'flex',\n            gap: '10px'\n        };\n    }\n\n    /**\n     * Get resource button styles\n     */\n    getResourceButtonStyles(color: string): StyleMap {\n        return {\n            flex: '1',\n            padding: this.isMobile ? '10px 5px' : '8px 5px',\n            backgroundColor: 'rgba(15, 40, 55, 0.8)',\n            border: `1px solid ${color}`,\n            borderRadius: '5px',\n            color: '#fff',\n            boxShadow: `0 0 10px rgba(${color.split('(')[1].split(')')[0]}, 0.3)`,\n            cursor: 'pointer',\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            transition: 'background-color 0.2s, box-shadow 0.2s'\n        };\n    }\n\n    /**\n     * Get resource button hover styles\n     */\n    getResourceButtonHoverStyles(color: string): StyleMap {\n        return {\n            backgroundColor: 'rgba(25, 60, 80, 0.8)',\n            boxShadow: `0 0 15px ${color}`\n        };\n    }\n\n    /**\n     * Get bet amount controls styles\n     */\n    getBetAmountControlsStyles(): StyleMap {\n        return {\n            display: 'flex',\n            marginTop: '10px',\n            gap: '10px'\n        };\n    }\n\n    /**\n     * Get bet amount display styles\n     */\n    getBetAmountDisplayStyles(): StyleMap {\n        return {\n            flex: '1',\n            backgroundColor: 'rgba(15, 40, 55, 0.8)',\n            border: '1px solid rgba(51, 170, 255, 0.5)',\n            borderRadius: '5px',\n            padding: '8px 10px',\n            textAlign: 'center',\n            fontWeight: 'bold'\n        };\n    }\n\n    /**\n     * Get control button styles\n     */\n    getControlButtonStyles(): StyleMap {\n        return {\n            width: this.isMobile ? '50px' : '40px',\n            height: this.isMobile ? '40px' : 'auto',\n            backgroundColor: 'rgba(15, 40, 55, 0.8)',\n            border: '1px solid rgba(51, 170, 255, 0.5)',\n            borderRadius: '5px',\n            color: '#fff',\n            cursor: 'pointer',\n            fontSize: this.isMobile ? '20px' : '16px'\n        };\n    }\n\n    /**\n     * Get control button hover styles\n     */\n    getControlButtonHoverStyles(): StyleMap {\n        return {\n            backgroundColor: 'rgba(25, 60, 80, 0.8)',\n            boxShadow: '0 0 10px rgba(51, 170, 255, 0.3)'\n        };\n    }\n\n    /**\n     * Get game actions styles\n     */\n    getGameActionsStyles(): StyleMap {\n        return {\n            display: 'flex',\n            gap: '15px',\n            flexWrap: this.isMobile ? 'wrap' : 'nowrap',\n            justifyContent: this.isMobile ? 'center' : 'flex-end',\n            width: this.isMobile ? '100%' : 'auto'\n        };\n    }\n\n    /**\n     * Get action button styles\n     */\n    getActionButtonStyles(color: string): StyleMap {\n        return {\n            padding: this.isMobile ? '15px 20px' : '12px 18px',\n            backgroundColor: 'rgba(15, 40, 55, 0.8)',\n            border: `2px solid ${color}`,\n            borderRadius: '5px',\n            color: '#fff',\n            fontWeight: 'bold',\n            cursor: 'pointer',\n            boxShadow: `0 0 10px ${color}`,\n            transition: 'all 0.2s',\n            minWidth: this.isMobile ? '80px' : 'auto',\n            flex: this.isMobile ? '1' : 'none'\n        };\n    }\n\n    /**\n     * Get action button hover styles\n     */\n    getActionButtonHoverStyles(color: string): StyleMap {\n        return {\n            backgroundColor: 'rgba(25, 60, 80, 0.8)',\n            boxShadow: `0 0 15px ${color}`\n        };\n    }\n\n    /**\n     * Apply styles to an element\n     */\n    applyStyles(element: HTMLElement, styles: StyleMap): void {\n        Object.assign(element.style, styles);\n    }\n}\n","/**\n * Blackjack Game View - DOM creation, card display, table layout\n */\n\nimport { BlackjackStyles } from './styles.js';\nimport type { BlackjackCard, CardSuit } from './cardDeck.js';\n\ntype BlackjackSpaceship = {\n    cargo?: {\n        iron?: number;\n        gold?: number;\n        platinum?: number;\n    };\n};\n\nexport class BlackjackGameView {\n    isMobile: boolean;\n    styles: BlackjackStyles;\n    cardSymbols: Record<CardSuit, string>;\n\n    constructor(isMobile: boolean = false) {\n        this.isMobile = isMobile;\n        this.styles = new BlackjackStyles(isMobile);\n        this.cardSymbols = {\n            spades: '♠', // Asteroid symbol\n            hearts: '♥', // Planet symbol\n            clubs: '♣', // Star symbol\n            diamonds: '♦' // Nebula symbol\n        };\n    }\n\n    /**\n     * Create the main game UI container\n     */\n    createGameUI(): HTMLDivElement {\n        const gameUI: HTMLDivElement = document.createElement('div');\n        gameUI.id = 'blackjack-game';\n        \n        // Apply main UI styles\n        this.styles.applyStyles(gameUI, this.styles.getGameUIStyles());\n        this.styles.applyStyles(gameUI, this.styles.getMobileStyles());\n        \n        // Add scanline effect\n        const scanlines: HTMLDivElement = document.createElement('div');\n        this.styles.applyStyles(scanlines, this.styles.getScanlineStyles());\n        gameUI.appendChild(scanlines);\n        \n        // Create header\n        const header = this.createHeader();\n        gameUI.appendChild(header);\n        \n        // Create game area\n        const gameArea = this.createGameArea();\n        gameUI.appendChild(gameArea);\n        \n        document.body.appendChild(gameUI);\n        return gameUI;\n    }\n\n    /**\n     * Create the header section\n     */\n    createHeader(): HTMLDivElement {\n        const header: HTMLDivElement = document.createElement('div');\n        this.styles.applyStyles(header, this.styles.getHeaderStyles());\n        \n        // Title\n        const title: HTMLHeadingElement = document.createElement('h2');\n        title.textContent = 'STELLAR BLACKJACK';\n        this.styles.applyStyles(title, this.styles.getTitleStyles());\n        header.appendChild(title);\n        \n        // Subtitle\n        const subtitle: HTMLDivElement = document.createElement('div');\n        subtitle.textContent = 'WAGER RESOURCES • WIN BIG • BEAT THE DEALER';\n        this.styles.applyStyles(subtitle, this.styles.getSubtitleStyles());\n        header.appendChild(subtitle);\n        \n        // Close button\n        const closeBtn = this.createCloseButton();\n        header.appendChild(closeBtn);\n        \n        return header;\n    }\n\n    /**\n     * Create the close button\n     */\n    createCloseButton(): HTMLButtonElement {\n        const closeBtn: HTMLButtonElement = document.createElement('button');\n        closeBtn.textContent = '×';\n        this.styles.applyStyles(closeBtn, this.styles.getCloseButtonStyles());\n        return closeBtn;\n    }\n\n    /**\n     * Create the main game area\n     */\n    createGameArea(): HTMLDivElement {\n        const gameArea: HTMLDivElement = document.createElement('div');\n        this.styles.applyStyles(gameArea, this.styles.getGameAreaStyles());\n        \n        // Dealer area\n        const dealerArea = this.createDealerArea();\n        gameArea.appendChild(dealerArea);\n        \n        // Status area\n        const statusArea = this.createStatusArea();\n        gameArea.appendChild(statusArea);\n        \n        // Player area\n        const playerArea = this.createPlayerArea();\n        gameArea.appendChild(playerArea);\n        \n        // Controls area\n        const controlsArea = this.createControlsArea();\n        gameArea.appendChild(controlsArea);\n        \n        return gameArea;\n    }\n\n    /**\n     * Create the dealer area\n     */\n    createDealerArea(): HTMLDivElement {\n        const dealerArea: HTMLDivElement = document.createElement('div');\n        this.styles.applyStyles(dealerArea, this.styles.getDealerAreaStyles());\n        \n        // Dealer header\n        const dealerHeader = this.createAreaHeader('DEALER', 'dealer-score', false);\n        dealerArea.appendChild(dealerHeader);\n        \n        // Dealer cards container\n        const dealerCards: HTMLDivElement = document.createElement('div');\n        dealerCards.id = 'dealer-cards';\n        this.styles.applyStyles(dealerCards, this.styles.getCardsContainerStyles());\n        dealerArea.appendChild(dealerCards);\n        \n        // Dealer speech bubble\n        const speechBubble: HTMLDivElement = document.createElement('div');\n        speechBubble.id = 'dealer-speech';\n        this.styles.applyStyles(speechBubble, this.styles.getSpeechBubbleStyles());\n        dealerArea.appendChild(speechBubble);\n        \n        return dealerArea;\n    }\n\n    /**\n     * Create the player area\n     */\n    createPlayerArea(): HTMLDivElement {\n        const playerArea: HTMLDivElement = document.createElement('div');\n        this.styles.applyStyles(playerArea, this.styles.getPlayerAreaStyles());\n        \n        // Player header\n        const playerHeader = this.createAreaHeader('YOUR HAND', 'player-score', true);\n        playerArea.appendChild(playerHeader);\n        \n        // Player cards container\n        const playerCards: HTMLDivElement = document.createElement('div');\n        playerCards.id = 'player-cards';\n        this.styles.applyStyles(playerCards, this.styles.getCardsContainerStyles());\n        playerArea.appendChild(playerCards);\n        \n        return playerArea;\n    }\n\n    /**\n     * Create area header (dealer/player)\n     */\n    createAreaHeader(title: string, scoreId: string, isPlayer: boolean): HTMLDivElement {\n        const header: HTMLDivElement = document.createElement('div');\n        header.className = isPlayer ? 'player-header' : 'dealer-header';\n        this.styles.applyStyles(header, this.styles.getAreaHeaderStyles());\n        \n        // Title\n        const titleElement: HTMLDivElement = document.createElement('div');\n        titleElement.textContent = title;\n        this.styles.applyStyles(titleElement, isPlayer ? this.styles.getPlayerTitleStyles() : this.styles.getDealerTitleStyles());\n        header.appendChild(titleElement);\n        \n        // Score\n        const score: HTMLDivElement = document.createElement('div');\n        score.id = scoreId;\n        score.textContent = '0';\n        this.styles.applyStyles(score, this.styles.getScoreStyles(isPlayer));\n        header.appendChild(score);\n        \n        return header;\n    }\n\n    /**\n     * Create the status area\n     */\n    createStatusArea(): HTMLDivElement {\n        const statusArea: HTMLDivElement = document.createElement('div');\n        this.styles.applyStyles(statusArea, this.styles.getStatusAreaStyles());\n        \n        const gameStatus: HTMLDivElement = document.createElement('div');\n        gameStatus.id = 'game-status';\n        gameStatus.textContent = 'PLACE YOUR BET TO BEGIN';\n        this.styles.applyStyles(gameStatus, this.styles.getGameStatusStyles());\n        statusArea.appendChild(gameStatus);\n        \n        return statusArea;\n    }\n\n    /**\n     * Create the controls area\n     */\n    createControlsArea(): HTMLDivElement {\n        const controlsArea: HTMLDivElement = document.createElement('div');\n        this.styles.applyStyles(controlsArea, this.styles.getControlsAreaStyles());\n        \n        // Betting controls\n        const bettingControls = this.createBettingControls();\n        controlsArea.appendChild(bettingControls);\n        \n        // Game actions\n        const gameActions = this.createGameActions();\n        controlsArea.appendChild(gameActions);\n        \n        return controlsArea;\n    }\n\n    /**\n     * Create betting controls\n     */\n    createBettingControls(): HTMLDivElement {\n        const bettingControls: HTMLDivElement = document.createElement('div');\n        bettingControls.id = 'betting-controls';\n        this.styles.applyStyles(bettingControls, this.styles.getBettingControlsStyles());\n        \n        // Betting title\n        const bettingTitle: HTMLDivElement = document.createElement('div');\n        bettingTitle.textContent = 'PLACE YOUR BET';\n        this.styles.applyStyles(bettingTitle, this.styles.getBettingTitleStyles());\n        bettingControls.appendChild(bettingTitle);\n        \n        // Resource options\n        const resourceOptions = this.createResourceOptions();\n        bettingControls.appendChild(resourceOptions);\n        \n        // Bet amount controls\n        const betAmountControls = this.createBetAmountControls();\n        bettingControls.appendChild(betAmountControls);\n        \n        return bettingControls;\n    }\n\n    /**\n     * Create resource selection buttons\n     */\n    createResourceOptions(): HTMLDivElement {\n        const resourceOptions: HTMLDivElement = document.createElement('div');\n        this.styles.applyStyles(resourceOptions, this.styles.getResourceOptionsStyles());\n        \n        const resources: Array<{ name: 'iron' | 'gold' | 'platinum'; color: string }> = [\n            { name: 'iron', color: 'rgba(150, 150, 150, 1)' },\n            { name: 'gold', color: 'rgba(255, 215, 0, 1)' },\n            { name: 'platinum', color: 'rgba(229, 228, 226, 1)' }\n        ];\n        \n        resources.forEach(resource => {\n            const btn = this.createResourceButton(resource.name, resource.color);\n            resourceOptions.appendChild(btn);\n        });\n        \n        return resourceOptions;\n    }\n\n    /**\n     * Create a resource button\n     */\n    createResourceButton(resource: 'iron' | 'gold' | 'platinum', color: string): HTMLButtonElement {\n        const btn: HTMLButtonElement = document.createElement('button');\n        btn.className = 'resource-btn';\n        btn.dataset.resource = resource;\n        this.styles.applyStyles(btn, this.styles.getResourceButtonStyles(color));\n        \n        // Resource name\n        const resourceName: HTMLSpanElement = document.createElement('span');\n        resourceName.textContent = resource.toUpperCase();\n        resourceName.style.fontWeight = 'bold';\n        resourceName.style.fontSize = '12px';\n        btn.appendChild(resourceName);\n        \n        // Resource amount\n        const resourceAmount: HTMLSpanElement = document.createElement('span');\n        resourceAmount.className = `${resource}-amount`;\n        resourceAmount.textContent = '0 UNITS';\n        resourceAmount.style.fontSize = '10px';\n        resourceAmount.style.marginTop = '3px';\n        resourceAmount.style.opacity = '0.7';\n        btn.appendChild(resourceAmount);\n        \n        return btn;\n    }\n\n    /**\n     * Create bet amount controls\n     */\n    createBetAmountControls(): HTMLDivElement {\n        const betAmountControls: HTMLDivElement = document.createElement('div');\n        this.styles.applyStyles(betAmountControls, this.styles.getBetAmountControlsStyles());\n        \n        // Bet amount display\n        const betAmountDisplay: HTMLDivElement = document.createElement('div');\n        betAmountDisplay.id = 'bet-amount';\n        betAmountDisplay.textContent = '0';\n        this.styles.applyStyles(betAmountDisplay, this.styles.getBetAmountDisplayStyles());\n        betAmountControls.appendChild(betAmountDisplay);\n        \n        // Decrease button\n        const decreaseBtn: HTMLButtonElement = document.createElement('button');\n        decreaseBtn.textContent = '-';\n        decreaseBtn.id = 'decrease-bet-btn';\n        this.styles.applyStyles(decreaseBtn, this.styles.getControlButtonStyles());\n        betAmountControls.appendChild(decreaseBtn);\n        \n        // Increase button\n        const increaseBtn: HTMLButtonElement = document.createElement('button');\n        increaseBtn.textContent = '+';\n        increaseBtn.id = 'increase-bet-btn';\n        this.styles.applyStyles(increaseBtn, this.styles.getControlButtonStyles());\n        betAmountControls.appendChild(increaseBtn);\n        \n        return betAmountControls;\n    }\n\n    /**\n     * Create game action buttons\n     */\n    createGameActions(): HTMLDivElement {\n        const gameActions: HTMLDivElement = document.createElement('div');\n        this.styles.applyStyles(gameActions, this.styles.getGameActionsStyles());\n        \n        const actionButtons = [\n            { id: 'deal-btn', text: 'DEAL', color: '#30cfd0' },\n            { id: 'hit-btn', text: 'HIT', color: '#ff9e3d' },\n            { id: 'stand-btn', text: 'STAND', color: '#e55c8a' },\n            { id: 'double-btn', text: 'DOUBLE', color: '#a281ff' }\n        ];\n        \n        actionButtons.forEach(btn => {\n            const button = this.createActionButton(btn.id, btn.text, btn.color);\n            gameActions.appendChild(button);\n        });\n        \n        return gameActions;\n    }\n\n    /**\n     * Create an action button\n     */\n    createActionButton(id: string, text: string, color: string): HTMLButtonElement {\n        const button: HTMLButtonElement = document.createElement('button');\n        button.id = id;\n        button.textContent = text;\n        this.styles.applyStyles(button, this.styles.getActionButtonStyles(color));\n        button.disabled = true;\n        button.style.opacity = '0.5';\n        return button;\n    }\n\n    /**\n     * Create a visual card element\n     */\n    createCardElement(card: BlackjackCard, faceDown: boolean = false): HTMLDivElement {\n        const cardEl: HTMLDivElement = document.createElement('div');\n        cardEl.className = 'card';\n        this.styles.applyStyles(cardEl, this.styles.getCardStyles(faceDown));\n        \n        if (!faceDown) {\n            this.createFaceUpCard(cardEl, card);\n        } else {\n            this.createFaceDownCard(cardEl);\n        }\n        \n        return cardEl;\n    }\n\n    /**\n     * Create face-up card content\n     */\n    createFaceUpCard(cardEl: HTMLDivElement, card: BlackjackCard): void {\n        const color = this.styles.getCardColor(card.suit);\n        \n        // Card value at top-left\n        const topValue: HTMLDivElement = document.createElement('div');\n        topValue.textContent = card.value;\n        topValue.style.color = color;\n        this.styles.applyStyles(topValue, this.styles.getCardValueStyles('top'));\n        cardEl.appendChild(topValue);\n        \n        // Suit at top-right\n        const topSuit: HTMLDivElement = document.createElement('div');\n        topSuit.textContent = this.cardSymbols[card.suit];\n        topSuit.style.color = color;\n        this.styles.applyStyles(topSuit, this.styles.getCardSuitStyles('top'));\n        cardEl.appendChild(topSuit);\n        \n        // Center symbol\n        const centerSymbol: HTMLDivElement = document.createElement('div');\n        centerSymbol.textContent = this.cardSymbols[card.suit];\n        centerSymbol.style.color = color;\n        this.styles.applyStyles(centerSymbol, this.styles.getCenterSymbolStyles());\n        cardEl.appendChild(centerSymbol);\n        \n        // Value at bottom-right (rotated)\n        const bottomValue: HTMLDivElement = document.createElement('div');\n        bottomValue.textContent = card.value;\n        bottomValue.style.color = color;\n        this.styles.applyStyles(bottomValue, this.styles.getCardValueStyles('bottom'));\n        cardEl.appendChild(bottomValue);\n        \n        // Suit at bottom-left (rotated)\n        const bottomSuit: HTMLDivElement = document.createElement('div');\n        bottomSuit.textContent = this.cardSymbols[card.suit];\n        bottomSuit.style.color = color;\n        this.styles.applyStyles(bottomSuit, this.styles.getCardSuitStyles('bottom'));\n        cardEl.appendChild(bottomSuit);\n        \n        // Card background pattern\n        const pattern: HTMLDivElement = document.createElement('div');\n        pattern.style.position = 'absolute';\n        pattern.style.inset = '0';\n        pattern.style.opacity = '0.05';\n        pattern.style.backgroundImage = 'radial-gradient(circle, #fff 1px, transparent 1px)';\n        pattern.style.backgroundSize = '10px 10px';\n        pattern.style.pointerEvents = 'none';\n        cardEl.appendChild(pattern);\n        \n        // Holographic effect\n        const holoEffect: HTMLDivElement = document.createElement('div');\n        holoEffect.style.position = 'absolute';\n        holoEffect.style.inset = '0';\n        holoEffect.style.background = 'linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 50%, rgba(255,255,255,0.1) 100%)';\n        holoEffect.style.pointerEvents = 'none';\n        cardEl.appendChild(holoEffect);\n    }\n\n    /**\n     * Create face-down card content\n     */\n    createFaceDownCard(cardEl: HTMLDivElement): void {\n        // Back design for face-down card\n        const backDesign: HTMLDivElement = document.createElement('div');\n        backDesign.style.width = '80%';\n        backDesign.style.height = '80%';\n        backDesign.style.border = '2px solid rgba(51, 170, 255, 0.4)';\n        backDesign.style.borderRadius = '5px';\n        backDesign.style.backgroundImage = 'radial-gradient(circle, rgba(51, 170, 255, 0.2) 10%, transparent 10%)';\n        backDesign.style.backgroundSize = '10px 10px';\n        cardEl.appendChild(backDesign);\n        \n        // Logo in center of back\n        const logo: HTMLDivElement = document.createElement('div');\n        logo.style.position = 'absolute';\n        logo.style.fontWeight = 'bold';\n        logo.style.fontSize = this.isMobile ? '12px' : '14px';\n        logo.style.color = 'rgba(51, 170, 255, 0.7)';\n        logo.textContent = 'BJ';\n        cardEl.appendChild(logo);\n    }\n\n    /**\n     * Show the game UI\n     */\n    show(gameUI: HTMLDivElement | null): void {\n        if (gameUI) {\n            gameUI.style.display = 'block';\n        }\n    }\n\n    /**\n     * Hide the game UI\n     */\n    hide(gameUI: HTMLDivElement | null): void {\n        if (gameUI) {\n            gameUI.style.display = 'none';\n        }\n    }\n\n    /**\n     * Update resource display\n     */\n    updateResourceDisplay(spaceship: BlackjackSpaceship): void {\n        if (spaceship && spaceship.cargo) {\n            // Ensure cargo has all resources initialized\n            if (spaceship.cargo.iron === undefined) spaceship.cargo.iron = 0;\n            if (spaceship.cargo.gold === undefined) spaceship.cargo.gold = 0;\n            if (spaceship.cargo.platinum === undefined) spaceship.cargo.platinum = 0;\n            \n            // Update resource amounts\n            const ironElement = document.querySelector('.iron-amount') as HTMLSpanElement | null;\n            if (ironElement) {\n                ironElement.textContent = `${spaceship.cargo.iron} UNITS`;\n            }\n            \n            const goldElement = document.querySelector('.gold-amount') as HTMLSpanElement | null;\n            if (goldElement) {\n                goldElement.textContent = `${spaceship.cargo.gold} UNITS`;\n            }\n            \n            const platinumElement = document.querySelector('.platinum-amount') as HTMLSpanElement | null;\n            if (platinumElement) {\n                platinumElement.textContent = `${spaceship.cargo.platinum} UNITS`;\n            }\n        }\n    }\n\n    /**\n     * Update score display\n     */\n    updateScore(score: number, isPlayer: boolean = true): void {\n        const scoreElement = document.getElementById(isPlayer ? 'player-score' : 'dealer-score') as HTMLDivElement | null;\n        if (scoreElement) {\n            scoreElement.textContent = String(score);\n        }\n    }\n\n    /**\n     * Update game status\n     */\n    updateGameStatus(message: string): void {\n        const statusElement = document.getElementById('game-status') as HTMLDivElement | null;\n        if (statusElement) {\n            statusElement.textContent = message;\n        }\n    }\n\n    /**\n     * Update bet amount display\n     */\n    updateBetAmount(amount: string | number): void {\n        const betElement = document.getElementById('bet-amount') as HTMLDivElement | null;\n        if (betElement) {\n            betElement.textContent = String(amount);\n        }\n    }\n\n    /**\n     * Clear cards from an area\n     */\n    clearCards(isPlayer: boolean = true): void {\n        const cardsContainer = document.getElementById(isPlayer ? 'player-cards' : 'dealer-cards') as HTMLDivElement | null;\n        if (cardsContainer) {\n            cardsContainer.innerHTML = '';\n        }\n    }\n\n    /**\n     * Add card to an area\n     */\n    addCard(card: BlackjackCard, faceDown: boolean = false, isPlayer: boolean = true): HTMLDivElement | null {\n        const cardsContainer = document.getElementById(isPlayer ? 'player-cards' : 'dealer-cards') as HTMLDivElement | null;\n        if (cardsContainer) {\n            const cardEl = this.createCardElement(card, faceDown);\n            if (faceDown) {\n                cardEl.id = 'face-down-card';\n            }\n            cardsContainer.appendChild(cardEl);\n            \n            // Add animation delay\n            setTimeout(() => {\n                cardEl.style.transform = 'translateY(-5px)';\n            }, 50);\n            \n            return cardEl;\n        }\n        return null;\n    }\n\n    /**\n     * Show dealer speech\n     */\n    showDealerSpeech(message: string, duration: number = 4000): void {\n        const speechBubble = document.getElementById('dealer-speech') as HTMLDivElement | null;\n        if (speechBubble) {\n            speechBubble.textContent = message;\n            speechBubble.style.display = 'block';\n            \n            setTimeout(() => {\n                speechBubble.style.display = 'none';\n            }, duration);\n        }\n    }\n\n    /**\n     * Reveal dealer's face-down card\n     */\n    revealDealerCard(card: BlackjackCard): HTMLDivElement | null {\n        const faceDownEl = document.getElementById('face-down-card') as HTMLDivElement | null;\n        if (faceDownEl) {\n            faceDownEl.remove();\n            \n            // Create and add the face-up version\n            const cardEl = this.createCardElement(card);\n            const dealerCards = document.getElementById('dealer-cards') as HTMLDivElement | null;\n            if (dealerCards) {\n                dealerCards.appendChild(cardEl);\n                \n                // Add animation delay\n                setTimeout(() => {\n                    cardEl.style.transform = 'translateY(-5px)';\n                }, 50);\n                \n                return cardEl;\n            }\n        }\n        return null;\n    }\n}\n","/**\n * Blackjack Card Deck - Card deck management, shuffling, dealing logic\n */\n\nexport type CardSuit = 'hearts' | 'diamonds' | 'clubs' | 'spades';\nexport type CardValue = 'A' | '2' | '3' | '4' | '5' | '6' | '7' | '8' | '9' | '10' | 'J' | 'Q' | 'K';\nexport type BlackjackCard = {\n    suit: CardSuit;\n    value: CardValue;\n};\n\nexport class BlackjackCardDeck {\n    deck: BlackjackCard[];\n\n    constructor() {\n        this.deck = [];\n        this.createDeck();\n    }\n\n    /**\n     * Create a fresh deck of cards\n     */\n    createDeck(): void {\n        const suits: CardSuit[] = ['hearts', 'diamonds', 'clubs', 'spades'];\n        const values: CardValue[] = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];\n        \n        this.deck = [];\n        \n        for (let suit of suits) {\n            for (let value of values) {\n                this.deck.push({\n                    suit: suit,\n                    value: value\n                });\n            }\n        }\n        \n        this.shuffle();\n    }\n\n    /**\n     * Shuffle the deck using Fisher-Yates algorithm\n     */\n    shuffle(): void {\n        for (let i = this.deck.length - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            [this.deck[i], this.deck[j]] = [this.deck[j], this.deck[i]];\n        }\n    }\n\n    /**\n     * Draw a card from the deck\n     * @returns {Object} A card object\n     */\n    drawCard(): BlackjackCard {\n        if (this.deck.length === 0) {\n            this.createDeck();\n        }\n        const card = this.deck.pop();\n        if (!card) {\n            this.createDeck();\n            return this.deck.pop() as BlackjackCard;\n        }\n        return card;\n    }\n\n    /**\n     * Get the value of a card\n     * @param {Object} card - The card object\n     * @returns {number} The value of the card in Blackjack\n     */\n    getCardValue(card: BlackjackCard): number {\n        if (card.value === 'A') {\n            return 11;\n        } else if (['J', 'Q', 'K'].includes(card.value)) {\n            return 10;\n        } else {\n            return parseInt(card.value);\n        }\n    }\n\n    /**\n     * Check if deck is empty\n     * @returns {boolean} True if deck is empty\n     */\n    isEmpty(): boolean {\n        return this.deck.length === 0;\n    }\n\n    /**\n     * Get remaining cards count\n     * @returns {number} Number of cards left in deck\n     */\n    getRemainingCards(): number {\n        return this.deck.length;\n    }\n\n    /**\n     * Reset deck (create new and shuffle)\n     */\n    reset(): void {\n        this.createDeck();\n    }\n}\n","/**\n * Blackjack Game Logic - Blackjack rules, hand evaluation, win conditions\n */\n\nimport type { BlackjackCard } from './cardDeck.js';\n\ntype GameResult = 'win' | 'blackjack' | 'lose' | 'bust' | 'push';\ntype DealerPhraseType = 'win' | 'lose' | 'blackjack' | 'push';\n\nexport class BlackjackGameLogic {\n    gameActive: boolean;\n    playerHand: BlackjackCard[];\n    dealerHand: BlackjackCard[];\n    gameResult: GameResult | null;\n    dealerPhrases: Record<DealerPhraseType, string[]>;\n\n    constructor() {\n        // Game state\n        this.gameActive = false;\n        this.playerHand = [];\n        this.dealerHand = [];\n        this.gameResult = null;\n        \n        // Dealer personality phrases\n        this.dealerPhrases = {\n            win: [\n                \"Yarr! The cosmos favors ye today!\",\n                \"By the stars! Ye've bested me!\",\n                \"Void take me! Ye've got luck in yer tanks!\",\n                \"Stellar victory, spacer!\",\n                \"Blast me thrusters! Ye win this round!\"\n            ],\n            lose: [\n                \"The black hole claims another victim!\",\n                \"Better luck in the next galaxy, rookie!\",\n                \"Space is cold, and so is defeat!\",\n                \"Yarr! The dealer always wins, spacer!\",\n                \"Back to the asteroid mines with ye!\"\n            ],\n            blackjack: [\n                \"SUPERNOVA! A cosmic blackjack!\",\n                \"By the void! A perfect 21!\",\n                \"The stars aligned for ye today!\",\n                \"Quantum perfection! A blackjack!\"\n            ],\n            push: [\n                \"A cosmic stalemate, eh?\",\n                \"The universe remains in balance.\",\n                \"Neither winner nor loser in the void.\",\n                \"We split the cosmic dust this time.\"\n            ]\n        };\n    }\n\n    /**\n     * Calculate the score of a hand, adjusting for aces\n     * @param {Array} hand - Array of card objects\n     * @returns {number} The total score of the hand\n     */\n    calculateScore(hand: BlackjackCard[]): number {\n        let score = 0;\n        let aces = 0;\n        \n        for (let card of hand) {\n            if (card.value === 'A') {\n                aces++;\n                score += 11;\n            } else if (['J', 'Q', 'K'].includes(card.value)) {\n                score += 10;\n            } else {\n                score += parseInt(card.value);\n            }\n        }\n        \n        // Adjust for aces if over 21\n        while (score > 21 && aces > 0) {\n            score -= 10;\n            aces--;\n        }\n        \n        return score;\n    }\n\n    /**\n     * Calculate the dealer's visible score (excluding face-down card)\n     * @returns {number} The visible score\n     */\n    calculateVisibleDealerScore(): number {\n        if (this.dealerHand.length <= 1) {\n            return this.dealerHand.length ? this.getCardValue(this.dealerHand[0]) : 0;\n        }\n        \n        // Calculate score excluding the last card (which is face down)\n        return this.calculateScore(this.dealerHand.slice(0, -1));\n    }\n\n    /**\n     * Get the value of a card\n     * @param {Object} card - The card object\n     * @returns {number} The value of the card in Blackjack\n     */\n    getCardValue(card: BlackjackCard): number {\n        if (card.value === 'A') {\n            return 11;\n        } else if (['J', 'Q', 'K'].includes(card.value)) {\n            return 10;\n        } else {\n            return parseInt(card.value);\n        }\n    }\n\n    /**\n     * Check if a hand is a blackjack (21 with 2 cards)\n     * @param {Array} hand - Array of card objects\n     * @returns {boolean} True if hand is blackjack\n     */\n    isBlackjack(hand: BlackjackCard[]): boolean {\n        return hand.length === 2 && this.calculateScore(hand) === 21;\n    }\n\n    /**\n     * Check if a hand is bust (over 21)\n     * @param {Array} hand - Array of card objects\n     * @returns {boolean} True if hand is bust\n     */\n    isBust(hand: BlackjackCard[]): boolean {\n        return this.calculateScore(hand) > 21;\n    }\n\n    /**\n     * Check for natural blackjack\n     * @returns {string|null} Game result or null if game continues\n     */\n    checkForNaturalBlackjack(): GameResult | null {\n        const playerScore = this.calculateScore(this.playerHand);\n        const dealerScore = this.calculateScore(this.dealerHand);\n        \n        if (playerScore === 21 || dealerScore === 21) {\n            if (playerScore === 21 && dealerScore === 21) {\n                // Both have blackjack - push\n                return 'push';\n            } else if (playerScore === 21) {\n                // Player has blackjack - win with 3:2 payout\n                return 'blackjack';\n            } else {\n                // Dealer has blackjack - player loses\n                return 'lose';\n            }\n        }\n        \n        return null;\n    }\n\n    /**\n     * Determine if dealer should hit (dealer hits on soft 17)\n     * @returns {boolean} True if dealer should hit\n     */\n    shouldDealerHit(): boolean {\n        const dealerScore = this.calculateScore(this.dealerHand);\n        return dealerScore < 17;\n    }\n\n    /**\n     * Determine the outcome of the game\n     * @returns {string} Game result\n     */\n    determineOutcome(): GameResult {\n        const playerScore = this.calculateScore(this.playerHand);\n        const dealerScore = this.calculateScore(this.dealerHand);\n        \n        if (dealerScore > 21) {\n            // Dealer busts - player wins\n            return 'win';\n        } else if (playerScore > dealerScore) {\n            // Player score higher - player wins\n            return 'win';\n        } else if (dealerScore > playerScore) {\n            // Dealer score higher - player loses\n            return 'lose';\n        } else {\n            // Scores are equal - push\n            return 'push';\n        }\n    }\n\n    /**\n     * Check if player can double down\n     * @param {number} currentBetAmount - Current bet amount\n     * @param {number} maxBetAmount - Maximum possible bet amount\n     * @returns {boolean} True if can double down\n     */\n    canDoubleDown(currentBetAmount: number, maxBetAmount: number): boolean {\n        return this.playerHand.length === 2 && currentBetAmount * 2 <= maxBetAmount;\n    }\n\n    /**\n     * Get a random dealer phrase\n     * @param {string} type - Type of phrase (win, lose, blackjack, push)\n     * @returns {string} Random phrase\n     */\n    getDealerPhrase(type: DealerPhraseType): string {\n        const phrases = this.dealerPhrases[type];\n        if (phrases && phrases.length > 0) {\n            return phrases[Math.floor(Math.random() * phrases.length)];\n        }\n        return '';\n    }\n\n    /**\n     * Reset game state\n     */\n    reset(): void {\n        this.gameActive = false;\n        this.playerHand = [];\n        this.dealerHand = [];\n        this.gameResult = null;\n    }\n\n    /**\n     * Start a new game\n     */\n    startGame(): void {\n        this.gameActive = true;\n        this.playerHand = [];\n        this.dealerHand = [];\n        this.gameResult = null;\n    }\n\n    /**\n     * Add card to player hand\n     * @param {Object} card - Card object\n     */\n    addCardToPlayer(card: BlackjackCard): void {\n        this.playerHand.push(card);\n    }\n\n    /**\n     * Add card to dealer hand\n     * @param {Object} card - Card object\n     */\n    addCardToDealer(card: BlackjackCard): void {\n        this.dealerHand.push(card);\n    }\n\n    /**\n     * End the game\n     * @param {string} result - Game result\n     */\n    endGame(result: GameResult): void {\n        this.gameActive = false;\n        this.gameResult = result;\n    }\n\n    /**\n     * Get player score\n     * @returns {number} Player's current score\n     */\n    getPlayerScore(): number {\n        return this.calculateScore(this.playerHand);\n    }\n\n    /**\n     * Get dealer score\n     * @returns {number} Dealer's current score\n     */\n    getDealerScore(): number {\n        return this.calculateScore(this.dealerHand);\n    }\n\n    /**\n     * Get player hand\n     * @returns {Array} Player's hand\n     */\n    getPlayerHand(): BlackjackCard[] {\n        return [...this.playerHand];\n    }\n\n    /**\n     * Get dealer hand\n     * @returns {Array} Dealer's hand\n     */\n    getDealerHand(): BlackjackCard[] {\n        return [...this.dealerHand];\n    }\n\n    /**\n     * Get last card in dealer hand (usually the face-down card)\n     * @returns {Object|null} Last dealer card\n     */\n    getLastDealerCard(): BlackjackCard | null {\n        return this.dealerHand.length > 0 ? this.dealerHand[this.dealerHand.length - 1] : null;\n    }\n\n    /**\n     * Check if game is active\n     * @returns {boolean} True if game is active\n     */\n    isGameActive(): boolean {\n        return this.gameActive;\n    }\n\n    /**\n     * Get game result\n     * @returns {string|null} Game result\n     */\n    getGameResult(): GameResult | null {\n        return this.gameResult;\n    }\n}\n","/**\n * Blackjack Animations - Card animations, chip movements, visual effects\n */\n\ntype BlackjackAudio = {\n    playSound?: (sound: string) => void;\n};\n\nexport type BlackjackSoundType =\n    | 'deal'\n    | 'hit'\n    | 'stand'\n    | 'double'\n    | 'flip'\n    | 'win'\n    | 'blackjack'\n    | 'lose'\n    | 'bust'\n    | 'push'\n    | 'boink';\n\nexport class BlackjackAnimations {\n    audio: BlackjackAudio | null;\n\n    constructor(audio: BlackjackAudio | null = null) {\n        this.audio = audio;\n    }\n\n    /**\n     * Animate card being dealt\n     * @param {HTMLElement} cardElement - The card element to animate\n     * @param {number} delay - Animation delay in ms\n     */\n    animateCardDeal(cardElement: HTMLElement | null, delay: number = 50): void {\n        if (!cardElement) return;\n        \n        // Initial state\n        cardElement.style.transform = 'translateY(0px) scale(0.8)';\n        cardElement.style.opacity = '0';\n        \n        // Animate to final position\n        setTimeout(() => {\n            cardElement.style.transition = 'transform 0.3s ease, opacity 0.3s ease';\n            cardElement.style.transform = 'translateY(-5px) scale(1)';\n            cardElement.style.opacity = '1';\n        }, delay);\n    }\n\n    /**\n     * Animate card flip (for revealing dealer's face-down card)\n     * @param {HTMLElement} cardElement - The card element to animate\n     * @param {Function} callback - Callback to execute at flip midpoint\n     */\n    animateCardFlip(cardElement: HTMLElement | null, callback: (() => void) | null = null): void {\n        if (!cardElement) return;\n        \n        // First half of flip\n        cardElement.style.transition = 'transform 0.2s ease';\n        cardElement.style.transform = 'rotateY(90deg) translateY(-5px)';\n        \n        // At midpoint, execute callback and complete flip\n        setTimeout(() => {\n            if (callback) callback();\n            cardElement.style.transform = 'rotateY(0deg) translateY(-5px)';\n        }, 200);\n    }\n\n    /**\n     * Animate button press\n     * @param {HTMLElement} buttonElement - The button element to animate\n     */\n    animateButtonPress(buttonElement: HTMLElement | null): void {\n        if (!buttonElement) return;\n        \n        // Scale down slightly\n        buttonElement.style.transition = 'transform 0.1s ease';\n        buttonElement.style.transform = 'scale(0.95)';\n        \n        // Return to normal size\n        setTimeout(() => {\n            buttonElement.style.transform = 'scale(1)';\n        }, 100);\n    }\n\n    /**\n     * Animate resource button selection\n     * @param {HTMLElement} buttonElement - The button element to animate\n     */\n    animateResourceSelection(buttonElement: HTMLElement | null): void {\n        if (!buttonElement) return;\n        \n        // Pulse effect\n        buttonElement.style.transition = 'transform 0.2s ease, border-width 0.2s ease';\n        buttonElement.style.transform = 'scale(1.05)';\n        buttonElement.style.borderWidth = '2px';\n    }\n\n    /**\n     * Remove resource button selection animation\n     * @param {HTMLElement} buttonElement - The button element to reset\n     */\n    removeResourceSelection(buttonElement: HTMLElement | null): void {\n        if (!buttonElement) return;\n        \n        buttonElement.style.transform = 'scale(1)';\n        buttonElement.style.borderWidth = '1px';\n    }\n\n    /**\n     * Animate bet amount change\n     * @param {HTMLElement} betElement - The bet display element\n     * @param {string} newAmount - The new amount to display\n     */\n    animateBetChange(betElement: HTMLElement | null, newAmount: string | number): void {\n        if (!betElement) return;\n        \n        // Scale up briefly\n        betElement.style.transition = 'transform 0.15s ease';\n        betElement.style.transform = 'scale(1.1)';\n        \n        // Update text and scale back\n        setTimeout(() => {\n        betElement.textContent = String(newAmount);\n            betElement.style.transform = 'scale(1)';\n        }, 75);\n    }\n\n    /**\n     * Animate score update\n     * @param {HTMLElement} scoreElement - The score display element\n     * @param {string} newScore - The new score to display\n     * @param {boolean} isBust - Whether this score is a bust\n     */\n    animateScoreUpdate(scoreElement: HTMLElement | null, newScore: string, isBust: boolean = false): void {\n        if (!scoreElement) return;\n        \n        // Color flash effect\n        const originalColor = scoreElement.style.color;\n        const flashColor = isBust ? '#ff6b6b' : '#30cfd0';\n        \n        scoreElement.style.transition = 'color 0.2s ease, transform 0.2s ease';\n        scoreElement.style.color = flashColor;\n        scoreElement.style.transform = 'scale(1.1)';\n        scoreElement.textContent = newScore;\n        \n        // Return to normal\n        setTimeout(() => {\n            scoreElement.style.color = originalColor;\n            scoreElement.style.transform = 'scale(1)';\n        }, 200);\n    }\n\n    /**\n     * Animate game status message\n     * @param {HTMLElement} statusElement - The status display element\n     * @param {string} message - The new status message\n     * @param {string} type - Type of message (win, lose, push, etc.)\n     */\n    animateStatusUpdate(\n        statusElement: HTMLElement | null,\n        message: string,\n        type: 'win' | 'blackjack' | 'lose' | 'bust' | 'push' | 'normal' = 'normal'\n    ): void {\n        if (!statusElement) return;\n        \n        // Determine colors based on type\n        let bgColor = 'rgba(51, 170, 255, 0.2)';\n        let borderColor = 'rgba(51, 170, 255, 0.4)';\n        \n        switch (type) {\n            case 'win':\n            case 'blackjack':\n                bgColor = 'rgba(48, 207, 208, 0.3)';\n                borderColor = 'rgba(48, 207, 208, 0.6)';\n                break;\n            case 'lose':\n            case 'bust':\n                bgColor = 'rgba(255, 107, 107, 0.3)';\n                borderColor = 'rgba(255, 107, 107, 0.6)';\n                break;\n            case 'push':\n                bgColor = 'rgba(255, 193, 7, 0.3)';\n                borderColor = 'rgba(255, 193, 7, 0.6)';\n                break;\n        }\n        \n        // Animate background change\n        statusElement.style.transition = 'background-color 0.3s ease, border-color 0.3s ease, transform 0.3s ease';\n        statusElement.style.backgroundColor = bgColor;\n        statusElement.style.borderColor = borderColor;\n        statusElement.style.transform = 'scale(1.05)';\n        statusElement.textContent = message;\n        \n        // Return to normal size\n        setTimeout(() => {\n            statusElement.style.transform = 'scale(1)';\n        }, 300);\n    }\n\n    /**\n     * Animate speech bubble appearance\n     * @param {HTMLElement} speechElement - The speech bubble element\n     * @param {string} message - The message to display\n     */\n    animateSpeechBubble(speechElement: HTMLElement | null, message: string): void {\n        if (!speechElement) return;\n        \n        speechElement.textContent = message;\n        speechElement.style.opacity = '0';\n        speechElement.style.transform = 'translateY(10px) scale(0.9)';\n        speechElement.style.display = 'block';\n        \n        // Animate in\n        setTimeout(() => {\n            speechElement.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n            speechElement.style.opacity = '1';\n            speechElement.style.transform = 'translateY(0px) scale(1)';\n        }, 50);\n    }\n\n    /**\n     * Animate speech bubble disappearance\n     * @param {HTMLElement} speechElement - The speech bubble element\n     */\n    hideSpeechBubble(speechElement: HTMLElement | null): void {\n        if (!speechElement) return;\n        \n        speechElement.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n        speechElement.style.opacity = '0';\n        speechElement.style.transform = 'translateY(-10px) scale(0.9)';\n        \n        setTimeout(() => {\n            speechElement.style.display = 'none';\n        }, 300);\n    }\n\n    /**\n     * Animate win celebration\n     * @param {HTMLElement} gameUI - The main game UI element\n     */\n    animateWinCelebration(gameUI: HTMLElement | null): void {\n        if (!gameUI) return;\n        \n        // Add a glow effect\n        gameUI.style.transition = 'box-shadow 0.5s ease';\n        gameUI.style.boxShadow = '0 0 50px rgba(48, 207, 208, 0.8)';\n        \n        // Remove glow after celebration\n        setTimeout(() => {\n            gameUI.style.boxShadow = '0 0 30px rgba(51, 170, 255, 0.5)';\n        }, 2000);\n    }\n\n    /**\n     * Animate lose effect\n     * @param {HTMLElement} gameUI - The main game UI element\n     */\n    animateLoseEffect(gameUI: HTMLElement | null): void {\n        if (!gameUI) return;\n        \n        // Add a red glow effect\n        gameUI.style.transition = 'box-shadow 0.5s ease';\n        gameUI.style.boxShadow = '0 0 50px rgba(255, 107, 107, 0.6)';\n        \n        // Remove glow after effect\n        setTimeout(() => {\n            gameUI.style.boxShadow = '0 0 30px rgba(51, 170, 255, 0.5)';\n        }, 2000);\n    }\n\n    /**\n     * Animate blackjack celebration\n     * @param {HTMLElement} gameUI - The main game UI element\n     */\n    animateBlackjackCelebration(gameUI: HTMLElement | null): void {\n        if (!gameUI) return;\n        \n        // Intense glow and slight scale\n        gameUI.style.transition = 'box-shadow 0.5s ease, transform 0.5s ease';\n        gameUI.style.boxShadow = '0 0 80px rgba(48, 207, 208, 1)';\n        gameUI.style.transform = 'translate(-50%, -50%) scale(1.02)';\n        \n        // Return to normal\n        setTimeout(() => {\n            gameUI.style.boxShadow = '0 0 30px rgba(51, 170, 255, 0.5)';\n            gameUI.style.transform = 'translate(-50%, -50%) scale(1)';\n        }, 3000);\n    }\n\n    /**\n     * Animate card hover effect\n     * @param {HTMLElement} cardElement - The card element\n     * @param {boolean} isHovering - Whether mouse is hovering\n     */\n    animateCardHover(cardElement: HTMLElement | null, isHovering: boolean): void {\n        if (!cardElement) return;\n        \n        if (isHovering) {\n            cardElement.style.transition = 'transform 0.2s ease, box-shadow 0.2s ease';\n            cardElement.style.transform = 'translateY(-10px) scale(1.05)';\n            cardElement.style.boxShadow = '0 0 20px rgba(51, 170, 255, 0.8)';\n        } else {\n            cardElement.style.transform = 'translateY(-5px) scale(1)';\n            cardElement.style.boxShadow = '0 0 10px rgba(51, 170, 255, 0.5)';\n        }\n    }\n\n    /**\n     * Play card game sound with audio context\n     * @param {string} type - The type of sound to play\n     */\n    playCardSound(type: BlackjackSoundType): void {\n        const audio = this.audio;\n        if (!audio) return;\n        \n        switch (type) {\n            case 'deal':\n                audio.playSound?.('boink');\n                break;\n            case 'hit':\n                audio.playSound?.('boink');\n                break;\n            case 'stand':\n                audio.playSound?.('boink');\n                break;\n            case 'double':\n                // Play two sounds in quick succession\n                audio.playSound?.('boink');\n                setTimeout(() => audio.playSound?.('boink'), 150);\n                break;\n            case 'flip':\n                audio.playSound?.('boink');\n                break;\n            case 'win':\n                audio.playSound?.('phaserUp');\n                break;\n            case 'blackjack':\n                // Play multiple sounds for celebration\n                audio.playSound?.('phaserUp');\n                setTimeout(() => audio.playSound?.('phaserUp'), 300);\n                break;\n            case 'lose':\n                audio.playSound?.('phaserDown');\n                break;\n            case 'bust':\n                audio.playSound?.('phaserDown');\n                break;\n            case 'push':\n                audio.playSound?.('boink');\n                break;\n        }\n    }\n\n    /**\n     * Chain multiple animations with delays\n     * @param {Array} animations - Array of animation functions\n     * @param {number} delay - Delay between animations\n     */\n    chainAnimations(animations: Array<() => void>, delay: number = 300): void {\n        animations.forEach((animation, index) => {\n            setTimeout(() => {\n                if (typeof animation === 'function') {\n                    animation();\n                }\n            }, index * delay);\n        });\n    }\n\n    /**\n     * Reset all animations on an element\n     * @param {HTMLElement} element - The element to reset\n     */\n    resetAnimations(element: HTMLElement | null): void {\n        if (!element) return;\n        \n        element.style.transition = '';\n        element.style.transform = '';\n        element.style.opacity = '';\n        element.style.boxShadow = '';\n    }\n}\n","/**\n * Blackjack Betting - Bet management, chip handling, payout calculations\n */\n\ntype ResourceType = 'iron' | 'gold' | 'platinum';\n\ntype BlackjackCargo = Partial<Record<ResourceType, number>>;\n\ntype BlackjackSpaceship = {\n    cargo?: BlackjackCargo;\n};\n\ntype BlackjackBet = {\n    resource: ResourceType | null;\n    amount: number;\n};\n\ntype GameResources = Partial<Record<ResourceType, number>>;\n\nexport class BlackjackBetting {\n    spaceship: BlackjackSpaceship | null;\n    currentBet: BlackjackBet;\n\n    constructor(spaceship: BlackjackSpaceship | null = null) {\n        this.spaceship = spaceship;\n        this.currentBet = {\n            resource: null,\n            amount: 0\n        };\n    }\n\n    /**\n     * Set the spaceship reference for resource management\n     * @param {Object} spaceship - Spaceship object with cargo\n     */\n    setSpaceship(spaceship: BlackjackSpaceship | null): void {\n        this.spaceship = spaceship;\n    }\n\n    /**\n     * Select a resource for betting\n     * @param {string} resource - The resource type (iron, gold, platinum)\n     */\n    selectBetResource(resource: ResourceType): void {\n        this.currentBet.resource = resource;\n        this.currentBet.amount = 1;\n    }\n\n    /**\n     * Increase the bet amount\n     * @returns {boolean} True if bet was increased, false if at maximum\n     */\n    increaseBet(): boolean {\n        const maxAmount = this.getMaxBet();\n        if (this.currentBet.amount < maxAmount) {\n            this.currentBet.amount++;\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Decrease the bet amount\n     * @returns {boolean} True if bet was decreased, false if at minimum\n     */\n    decreaseBet(): boolean {\n        if (this.currentBet.amount > 1) {\n            this.currentBet.amount--;\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Get the maximum possible bet amount for the selected resource\n     * @returns {number} The maximum bet amount\n     */\n    getMaxBet(): number {\n        if (!this.currentBet.resource || !this.spaceship || !this.spaceship.cargo) {\n            return 0;\n        }\n        \n        return this.spaceship.cargo[this.currentBet.resource] || 0;\n    }\n\n    /**\n     * Get current bet information\n     * @returns {Object} Current bet object\n     */\n    getCurrentBet(): BlackjackBet {\n        return { ...this.currentBet };\n    }\n\n    /**\n     * Check if a valid bet is selected\n     * @returns {boolean} True if valid bet exists\n     */\n    hasValidBet(): boolean {\n        return Boolean(this.currentBet.resource) && this.currentBet.amount > 0;\n    }\n\n    /**\n     * Check if player has enough resources for the current bet\n     * @returns {boolean} True if player can afford the bet\n     */\n    canAffordBet(): boolean {\n        if (!this.hasValidBet() || !this.spaceship || !this.spaceship.cargo) {\n            return false;\n        }\n        \n        const resource = this.currentBet.resource;\n        if (!resource) return false;\n        const available = this.spaceship.cargo[resource] || 0;\n        return available >= this.currentBet.amount;\n    }\n\n    /**\n     * Check if player can afford to double down\n     * @returns {boolean} True if player can double the current bet\n     */\n    canAffordDoubleDown(): boolean {\n        if (!this.hasValidBet() || !this.spaceship || !this.spaceship.cargo) {\n            return false;\n        }\n        \n        const resource = this.currentBet.resource;\n        if (!resource) return false;\n        const available = this.spaceship.cargo[resource] || 0;\n        return available >= this.currentBet.amount;\n    }\n\n    /**\n     * Place the bet (deduct resources)\n     * @returns {boolean} True if bet was successfully placed\n     */\n    placeBet(): boolean {\n        if (!this.canAffordBet()) {\n            return false;\n        }\n        \n        // Deduct bet from player's resources\n        const resource = this.currentBet.resource;\n        if (!this.spaceship || !this.spaceship.cargo || !resource) {\n            return false;\n        }\n        this.spaceship.cargo[resource] = (this.spaceship.cargo[resource] || 0) - this.currentBet.amount;\n        \n        // Sync with the game's resource system if available\n        const game = window.game as { controls?: { resources?: GameResources } } | undefined;\n        if (game && game.controls && game.controls.resources) {\n            game.controls.resources[resource] = this.spaceship.cargo[resource] || 0;\n        }\n        \n        return true;\n    }\n\n    /**\n     * Double down (double the current bet)\n     * @returns {boolean} True if double down was successful\n     */\n    doubleDown(): boolean {\n        if (!this.canAffordDoubleDown()) {\n            return false;\n        }\n        \n        // Deduct additional bet amount\n        const resource = this.currentBet.resource;\n        if (!this.spaceship || !this.spaceship.cargo || !resource) {\n            return false;\n        }\n        this.spaceship.cargo[resource] = (this.spaceship.cargo[resource] || 0) - this.currentBet.amount;\n        \n        // Double the bet amount\n        this.currentBet.amount *= 2;\n        \n        // Sync with the game's resource system if available\n        const game = window.game as { controls?: { resources?: GameResources } } | undefined;\n        if (game && game.controls && game.controls.resources) {\n            game.controls.resources[resource] = this.spaceship.cargo[resource] || 0;\n        }\n        \n        return true;\n    }\n\n    /**\n     * Calculate payout for a win (2x bet)\n     * @returns {number} Payout amount\n     */\n    calculateWinPayout(): number {\n        return this.currentBet.amount * 2;\n    }\n\n    /**\n     * Calculate payout for a blackjack (3x bet)\n     * @returns {number} Payout amount\n     */\n    calculateBlackjackPayout(): number {\n        return this.currentBet.amount * 3;\n    }\n\n    /**\n     * Calculate payout for a push (return bet)\n     * @returns {number} Payout amount\n     */\n    calculatePushPayout(): number {\n        return this.currentBet.amount;\n    }\n\n    /**\n     * Pay out winnings to player\n     * @param {number} amount - Amount to pay out\n     */\n    payOut(amount: number): void {\n        if (!this.spaceship || !this.spaceship.cargo || !this.currentBet.resource) {\n            return;\n        }\n        \n        const resource = this.currentBet.resource;\n        if (!resource) return;\n        this.spaceship.cargo[resource] = (this.spaceship.cargo[resource] || 0) + amount;\n        \n        // Sync with the game's resource system if available\n        const game = window.game as { controls?: { resources?: GameResources } } | undefined;\n        if (game && game.controls && game.controls.resources) {\n            game.controls.resources[resource] = this.spaceship.cargo[resource] || 0;\n        }\n    }\n\n    /**\n     * Handle win payout\n     */\n    handleWin(): number {\n        const payout = this.calculateWinPayout();\n        this.payOut(payout);\n        return payout;\n    }\n\n    /**\n     * Handle blackjack payout\n     */\n    handleBlackjack(): number {\n        const payout = this.calculateBlackjackPayout();\n        this.payOut(payout);\n        return payout;\n    }\n\n    /**\n     * Handle push (return bet)\n     */\n    handlePush(): number {\n        const payout = this.calculatePushPayout();\n        this.payOut(payout);\n        return payout;\n    }\n\n    /**\n     * Reset betting state\n     */\n    reset(): void {\n        this.currentBet = {\n            resource: null,\n            amount: 0\n        };\n    }\n\n    /**\n     * Get resource amounts for display\n     * @returns {Object} Resource amounts\n     */\n    getResourceAmounts(): Record<ResourceType, number> {\n        if (!this.spaceship || !this.spaceship.cargo) {\n            return { iron: 0, gold: 0, platinum: 0 };\n        }\n        \n        return {\n            iron: this.spaceship.cargo.iron || 0,\n            gold: this.spaceship.cargo.gold || 0,\n            platinum: this.spaceship.cargo.platinum || 0\n        };\n    }\n\n    /**\n     * Initialize cargo if needed\n     */\n    initializeCargo(): boolean {\n        if (!this.spaceship) {\n            console.error(\"No spaceship object available\");\n            return false;\n        }\n        \n        if (!this.spaceship.cargo) {\n            console.warn(\"Creating cargo object for spaceship\");\n            this.spaceship.cargo = { iron: 0, gold: 0, platinum: 0 };\n        }\n        \n        // Ensure all resources are defined\n        if (this.spaceship.cargo.iron === undefined) this.spaceship.cargo.iron = 0;\n        if (this.spaceship.cargo.gold === undefined) this.spaceship.cargo.gold = 0;\n        if (this.spaceship.cargo.platinum === undefined) this.spaceship.cargo.platinum = 0;\n        \n        return true;\n    }\n\n    /**\n     * Sync with game resources\n     */\n    syncWithGameResources(): void {\n        const game = window.game as { controls?: { resources?: GameResources } } | undefined;\n        if (game && game.controls && game.controls.resources) {\n            if (!this.spaceship) {\n                return;\n            }\n            // Sync with the real game resources\n            const gameResources = game.controls.resources;\n            \n            if (!this.spaceship.cargo) {\n                this.spaceship.cargo = {};\n            }\n            \n            // Update cargo with current game resources\n            this.spaceship.cargo.iron = gameResources.iron || 0;\n            this.spaceship.cargo.gold = gameResources.gold || 0;\n            this.spaceship.cargo.platinum = gameResources.platinum || 0;\n        }\n    }\n\n    /**\n     * Get bet amount display string\n     * @returns {string} Formatted bet amount\n     */\n    getBetDisplayString(): string {\n        if (!this.hasValidBet()) {\n            return '0';\n        }\n        \n        return `${this.currentBet.amount} ${this.currentBet.resource ? this.currentBet.resource.toUpperCase() : ''}`;\n    }\n\n    /**\n     * Get resource color for UI\n     * @param {string} resource - Resource type\n     * @returns {string} CSS color string\n     */\n    getResourceColor(resource: ResourceType): string {\n        switch (resource) {\n            case 'iron':\n                return 'rgba(150, 150, 150, 1)';\n            case 'gold':\n                return 'rgba(255, 215, 0, 1)';\n            case 'platinum':\n                return 'rgba(229, 228, 226, 1)';\n            default:\n                return 'rgba(255, 255, 255, 1)';\n        }\n    }\n}\n","/**\n * Blackjack Event Handlers - User interactions, button clicks, game events\n */\n\nimport type { BlackjackSoundType } from './animations.js';\n\ntype ResourceType = 'iron' | 'gold' | 'platinum';\ntype BlackjackBet = {\n    resource: ResourceType | null;\n    amount: number;\n};\ntype BlackjackSpaceship = {\n    cargo?: {\n        iron?: number;\n        gold?: number;\n        platinum?: number;\n    };\n};\n\ntype BlackjackGameLike = {\n    hide: () => void;\n    selectBetResource: (resource: ResourceType) => void;\n    startGame: () => void;\n    hit: () => void;\n    stand: () => void;\n    doubleDown: () => void;\n    gameUI: HTMLDivElement | null;\n    spaceship: BlackjackSpaceship;\n    animations: {\n        animateButtonPress: (buttonElement: HTMLElement | null) => void;\n        animateResourceSelection: (buttonElement: HTMLElement | null) => void;\n        removeResourceSelection: (buttonElement: HTMLElement | null) => void;\n        animateBetChange: (betElement: HTMLElement | null, newAmount: string | number) => void;\n        playCardSound: (type: BlackjackSoundType) => void;\n    };\n    betting: {\n        getResourceColor: (resource: ResourceType) => string;\n        getCurrentBet: () => BlackjackBet;\n        decreaseBet: () => boolean;\n        increaseBet: () => boolean;\n        canAffordDoubleDown: () => boolean;\n        hasValidBet: () => boolean;\n    };\n    gameLogic: {\n        isGameActive: () => boolean;\n        getPlayerHand: () => Array<unknown>;\n    };\n    view: {\n        updateBetAmount: (amount: string | number) => void;\n        updateResourceDisplay: (spaceship: BlackjackSpaceship) => void;\n        styles: {\n            getControlButtonHoverStyles: () => Record<string, string>;\n            getActionButtonHoverStyles: (color: string) => Record<string, string>;\n        };\n        isMobile: boolean;\n    };\n};\n\ntype ListenerRecord = {\n    element: EventTarget;\n    event: string;\n    handler: EventListenerOrEventListenerObject;\n    options?: boolean | AddEventListenerOptions;\n};\n\nexport class BlackjackEventHandlers {\n    game: BlackjackGameLike;\n    isMobile: boolean;\n    eventListeners: Map<string, ListenerRecord[]>;\n\n    constructor(game: BlackjackGameLike, isMobile: boolean = false) {\n        this.game = game;\n        this.isMobile = isMobile;\n        this.eventListeners = new Map();\n    }\n\n    /**\n     * Set up all event handlers for the game\n     */\n    setupEventHandlers(): void {\n        this.setupCloseButtonHandler();\n        this.setupResourceButtonHandlers();\n        this.setupBetControlHandlers();\n        this.setupActionButtonHandlers();\n        this.setupMobileEventHandlers();\n    }\n\n    /**\n     * Setup close button event handler\n     */\n    setupCloseButtonHandler(): void {\n        const closeBtn = document.querySelector('#blackjack-game button') as HTMLButtonElement | null;\n        if (closeBtn) {\n            const handler = () => this.game.hide();\n            this.addEventHandler(closeBtn, 'click', handler);\n        }\n    }\n\n    /**\n     * Setup resource button event handlers\n     */\n    setupResourceButtonHandlers(): void {\n        const resourceButtons = document.querySelectorAll<HTMLButtonElement>('.resource-btn');\n        \n        resourceButtons.forEach(btn => {\n            const resource = btn.dataset.resource;\n            if (!resource) {\n                return;\n            }\n            \n            // Create hover effects\n            const addHoverEffect = () => {\n                if (this.game.gameLogic.isGameActive()) return;\n                \n                const color = this.game.betting.getResourceColor(resource as ResourceType);\n                btn.style.backgroundColor = 'rgba(25, 60, 80, 0.8)';\n                btn.style.boxShadow = `0 0 15px ${color}`;\n            };\n            \n            const removeHoverEffect = () => {\n                if (this.game.gameLogic.isGameActive()) return;\n                \n                const color = this.game.betting.getResourceColor(resource as ResourceType);\n                btn.style.backgroundColor = 'rgba(15, 40, 55, 0.8)';\n                btn.style.boxShadow = `0 0 10px rgba(${color.split('(')[1].split(')')[0]}, 0.3)`;\n            };\n            \n            // Click/tap handler\n            const clickHandler = () => {\n                if (!this.game.gameLogic.isGameActive()) {\n                    this.game.selectBetResource(resource as ResourceType);\n                    this.game.animations.playCardSound('boink');\n                    \n                    // Update button styling\n                    document.querySelectorAll<HTMLElement>('.resource-btn').forEach(button => {\n                        this.game.animations.removeResourceSelection(button as HTMLElement);\n                    });\n                    \n                    this.game.animations.animateResourceSelection(btn);\n                }\n            };\n            \n            // Add event listeners\n            this.addEventHandler(btn, 'mouseover', addHoverEffect);\n            this.addEventHandler(btn, 'mouseout', removeHoverEffect);\n            this.addEventHandler(btn, 'click', clickHandler);\n            \n            // Touch events for mobile\n            if (this.isMobile) {\n                this.addEventHandler(btn, 'touchstart', addHoverEffect, {passive: true});\n                this.addEventHandler(btn, 'touchend', (e: Event) => {\n                    removeHoverEffect();\n                    e.preventDefault();\n                    clickHandler();\n                });\n            }\n        });\n    }\n\n    /**\n     * Setup bet control event handlers (+ and - buttons)\n     */\n    setupBetControlHandlers(): void {\n        const decreaseBtn = document.getElementById('decrease-bet-btn') as HTMLButtonElement | null;\n        const increaseBtn = document.getElementById('increase-bet-btn') as HTMLButtonElement | null;\n        \n        if (decreaseBtn) {\n            const handler = () => {\n                if (!this.game.gameLogic.isGameActive() && this.game.betting.getCurrentBet().resource) {\n                    if (this.game.betting.decreaseBet()) {\n                        this.game.view.updateBetAmount(this.game.betting.getCurrentBet().amount);\n                        const betAmount = document.getElementById('bet-amount') as HTMLDivElement | null;\n                        this.game.animations.animateBetChange(\n                            betAmount,\n                            this.game.betting.getCurrentBet().amount\n                        );\n                        this.game.animations.playCardSound('boink');\n                    }\n                }\n            };\n            \n            this.setupControlButton(decreaseBtn, handler);\n        }\n        \n        if (increaseBtn) {\n            const handler = () => {\n                if (!this.game.gameLogic.isGameActive() && this.game.betting.getCurrentBet().resource) {\n                    if (this.game.betting.increaseBet()) {\n                        this.game.view.updateBetAmount(this.game.betting.getCurrentBet().amount);\n                        const betAmount = document.getElementById('bet-amount') as HTMLDivElement | null;\n                        this.game.animations.animateBetChange(\n                            betAmount,\n                            this.game.betting.getCurrentBet().amount\n                        );\n                        this.game.animations.playCardSound('boink');\n                    }\n                }\n            };\n            \n            this.setupControlButton(increaseBtn, handler);\n        }\n    }\n\n    /**\n     * Setup action button event handlers (Deal, Hit, Stand, Double)\n     */\n    setupActionButtonHandlers(): void {\n        const actionButtons = [\n            { id: 'deal-btn', handler: () => this.game.startGame() },\n            { id: 'hit-btn', handler: () => this.game.hit() },\n            { id: 'stand-btn', handler: () => this.game.stand() },\n            { id: 'double-btn', handler: () => this.game.doubleDown() }\n        ];\n        \n        actionButtons.forEach(action => {\n            const button = document.getElementById(action.id) as HTMLButtonElement | null;\n            if (button) {\n                const clickHandler = () => {\n                    if (!button.disabled) {\n                        this.game.animations.animateButtonPress(button);\n                        action.handler();\n                        this.game.animations.playCardSound('boink');\n                    }\n                };\n                \n                this.setupActionButton(button, clickHandler);\n            }\n        });\n    }\n\n    /**\n     * Setup mobile-specific event handlers\n     */\n    setupMobileEventHandlers(): void {\n        if (!this.isMobile) return;\n        \n        // Prevent scrolling when touching the game area\n        const gameUI = document.getElementById('blackjack-game') as HTMLDivElement | null;\n        if (gameUI) {\n            this.addEventHandler(gameUI, 'touchmove', (e: Event) => {\n                e.preventDefault();\n            }, {passive: false});\n        }\n        \n        // Handle orientation changes\n        this.addEventHandler(window, 'orientationchange', () => {\n            setTimeout(() => {\n                this.game.view.updateResourceDisplay(this.game.spaceship);\n            }, 100);\n        });\n    }\n\n    /**\n     * Setup control button with hover and touch effects\n     */\n    setupControlButton(button: HTMLButtonElement, clickHandler: () => void): void {\n        const addHoverEffect = () => {\n            if (!button.disabled) {\n                const hoverStyles = this.game.view.styles.getControlButtonHoverStyles();\n                Object.assign(button.style, hoverStyles);\n            }\n        };\n        \n        const removeHoverEffect = () => {\n            if (!button.disabled) {\n                button.style.backgroundColor = 'rgba(15, 40, 55, 0.8)';\n                button.style.boxShadow = 'none';\n            }\n        };\n        \n        // Mouse events\n        this.addEventHandler(button, 'mouseover', addHoverEffect);\n        this.addEventHandler(button, 'mouseout', removeHoverEffect);\n        this.addEventHandler(button, 'click', clickHandler);\n        \n        // Touch events\n        if (this.isMobile) {\n            this.addEventHandler(button, 'touchstart', addHoverEffect, {passive: true});\n            this.addEventHandler(button, 'touchend', (e: Event) => {\n                removeHoverEffect();\n                e.preventDefault();\n                clickHandler();\n            });\n        }\n    }\n\n    /**\n     * Setup action button with hover and touch effects\n     */\n    setupActionButton(button: HTMLButtonElement, clickHandler: () => void): void {\n        const color = this.getButtonColor(button.id);\n        \n        const enableHoverEffects = () => {\n            if (!button.disabled) {\n                const hoverStyles = this.game.view.styles.getActionButtonHoverStyles(color);\n                Object.assign(button.style, hoverStyles);\n            }\n        };\n        \n        const disableHoverEffects = () => {\n            if (!button.disabled) {\n                button.style.backgroundColor = 'rgba(15, 40, 55, 0.8)';\n                button.style.boxShadow = `0 0 10px ${color}`;\n            }\n        };\n        \n        // Mouse events\n        this.addEventHandler(button, 'mouseover', enableHoverEffects);\n        this.addEventHandler(button, 'mouseout', disableHoverEffects);\n        this.addEventHandler(button, 'click', clickHandler);\n        \n        // Touch events\n        if (this.isMobile) {\n            this.addEventHandler(button, 'touchstart', enableHoverEffects, {passive: true});\n            this.addEventHandler(button, 'touchend', (e: Event) => {\n                disableHoverEffects();\n                e.preventDefault();\n                clickHandler();\n            });\n        }\n    }\n\n    /**\n     * Get button color based on button ID\n     */\n    getButtonColor(buttonId: string): string {\n        switch (buttonId) {\n            case 'deal-btn':\n                return '#30cfd0';\n            case 'hit-btn':\n                return '#ff9e3d';\n            case 'stand-btn':\n                return '#e55c8a';\n            case 'double-btn':\n                return '#a281ff';\n            default:\n                return '#33aaff';\n        }\n    }\n\n    /**\n     * Add event listener and track it for cleanup\n     */\n    addEventHandler(\n        element: EventTarget,\n        event: string,\n        handler: EventListenerOrEventListenerObject,\n        options: boolean | AddEventListenerOptions = false\n    ): void {\n        element.addEventListener(event, handler, options);\n        \n        // Store for cleanup\n        const elementAsHTMLElement = element as HTMLElement;\n        const key = `${elementAsHTMLElement.id || elementAsHTMLElement.className}_${event}`;\n        if (!this.eventListeners.has(key)) {\n            this.eventListeners.set(key, []);\n        }\n        this.eventListeners.get(key)?.push({ element, event, handler, options });\n    }\n\n    /**\n     * Remove all event listeners\n     */\n    removeAllEventListeners(): void {\n        this.eventListeners.forEach((listeners) => {\n            listeners.forEach(({ element, event, handler, options }) => {\n                element.removeEventListener(event, handler, options);\n            });\n        });\n        this.eventListeners.clear();\n    }\n\n    /**\n     * Update button states based on game state\n     */\n    updateButtonStates(): void {\n        const dealBtn = document.getElementById('deal-btn') as HTMLButtonElement | null;\n        const hitBtn = document.getElementById('hit-btn') as HTMLButtonElement | null;\n        const standBtn = document.getElementById('stand-btn') as HTMLButtonElement | null;\n        const doubleBtn = document.getElementById('double-btn') as HTMLButtonElement | null;\n        \n        // Reset all buttons to disabled state\n        [dealBtn, hitBtn, standBtn, doubleBtn].forEach(btn => {\n            if (btn) {\n                btn.disabled = true;\n                btn.style.opacity = '0.5';\n                btn.style.cursor = 'default';\n            }\n        });\n        \n        if (!this.game.gameLogic.isGameActive()) {\n            // Before game starts, only deal button may be active\n            const canDeal = this.game.betting.hasValidBet();\n            if (dealBtn) {\n                dealBtn.disabled = !canDeal;\n                dealBtn.style.opacity = canDeal ? '1' : '0.5';\n                dealBtn.style.cursor = canDeal ? 'pointer' : 'default';\n            }\n        } else {\n            // During game, hit/stand buttons are active\n            if (hitBtn) {\n                hitBtn.disabled = false;\n                hitBtn.style.opacity = '1';\n                hitBtn.style.cursor = 'pointer';\n            }\n            \n            if (standBtn) {\n                standBtn.disabled = false;\n                standBtn.style.opacity = '1';\n                standBtn.style.cursor = 'pointer';\n            }\n            \n            // Double down only available on first move with 2 cards\n            const playerHand = this.game.gameLogic.getPlayerHand();\n            const canDouble = playerHand.length === 2 && this.game.betting.canAffordDoubleDown();\n            if (doubleBtn) {\n                doubleBtn.disabled = !canDouble;\n                doubleBtn.style.opacity = canDouble ? '1' : '0.5';\n                doubleBtn.style.cursor = canDouble ? 'pointer' : 'default';\n            }\n        }\n    }\n\n    /**\n     * Handle keyboard events\n     */\n    setupKeyboardHandlers(): void {\n        const keyHandler = (e: KeyboardEvent) => {\n            if (!this.game.gameUI || this.game.gameUI.style.display === 'none') return;\n            \n            switch (e.key.toLowerCase()) {\n                case 'escape':\n                    this.game.hide();\n                    break;\n                case 'enter':\n                case ' ':\n                    if (!this.game.gameLogic.isGameActive() && this.game.betting.hasValidBet()) {\n                        this.game.startGame();\n                    }\n                    break;\n                case 'h':\n                    if (this.game.gameLogic.isGameActive()) {\n                        this.game.hit();\n                    }\n                    break;\n                case 's':\n                    if (this.game.gameLogic.isGameActive()) {\n                        this.game.stand();\n                    }\n                    break;\n                case 'd':\n                    if (this.game.gameLogic.isGameActive()) {\n                        this.game.doubleDown();\n                    }\n                    break;\n                case '1':\n                    this.selectResource('iron');\n                    break;\n                case '2':\n                    this.selectResource('gold');\n                    break;\n                case '3':\n                    this.selectResource('platinum');\n                    break;\n                case 'arrowup':\n                case '+':\n                    if (!this.game.gameLogic.isGameActive() && this.game.betting.getCurrentBet().resource) {\n                        if (this.game.betting.increaseBet()) {\n                            this.game.view.updateBetAmount(this.game.betting.getCurrentBet().amount);\n                        }\n                    }\n                    e.preventDefault();\n                    break;\n                case 'arrowdown':\n                case '-':\n                    if (!this.game.gameLogic.isGameActive() && this.game.betting.getCurrentBet().resource) {\n                        if (this.game.betting.decreaseBet()) {\n                            this.game.view.updateBetAmount(this.game.betting.getCurrentBet().amount);\n                        }\n                    }\n                    e.preventDefault();\n                    break;\n            }\n        };\n        \n        this.addEventHandler(document, 'keydown', keyHandler as EventListener);\n    }\n\n    /**\n     * Select resource by name (helper for keyboard events)\n     */\n    selectResource(resource: ResourceType): void {\n        if (!this.game.gameLogic.isGameActive()) {\n            const button = document.querySelector(`[data-resource=\"${resource}\"]`) as HTMLButtonElement | null;\n            if (button) {\n                button.click();\n            }\n        }\n    }\n\n    /**\n     * Handle window resize events\n     */\n    setupResizeHandler(): void {\n        const resizeHandler = () => {\n            // Update mobile detection in case window was resized\n            this.isMobile = window.innerWidth <= 768 || window.innerHeight <= 600;\n            \n            // Update styles if needed\n            if (this.game.view) {\n                this.game.view.isMobile = this.isMobile;\n            }\n        };\n        \n        this.addEventHandler(window, 'resize', resizeHandler);\n    }\n\n    /**\n     * Setup all handlers at once\n     */\n    initialize(): void {\n        this.setupEventHandlers();\n        this.setupKeyboardHandlers();\n        this.setupResizeHandler();\n    }\n\n    /**\n     * Cleanup method to remove all event listeners\n     */\n    destroy(): void {\n        this.removeAllEventListeners();\n    }\n}\n","/**\n * Blackjack Minigame - A futuristic card game for the stargate terminal\n * \n * Features:\n * - Space-themed card designs with futuristic symbols\n * - Wager ship resources (Iron, Gold, Platinum)\n * - Play against an AI dealer with pirate personality\n * - Holographic UI with neon effects\n */\n\nimport { MobileDetector } from '../../utils/mobileDetector.ts';\nimport { BlackjackGameView } from './components/blackjack/gameView.js';\nimport { BlackjackCardDeck } from './components/blackjack/cardDeck.js';\nimport { BlackjackGameLogic } from './components/blackjack/gameLogic.js';\nimport { BlackjackAnimations } from './components/blackjack/animations.js';\nimport { BlackjackBetting } from './components/blackjack/betting.js';\nimport { BlackjackEventHandlers } from './components/blackjack/eventHandlers.js';\n\ntype BlackjackAudio = {\n    playSound?: (sound: string) => void;\n};\n\ntype BlackjackSpaceship = {\n    cargo?: {\n        iron?: number;\n        gold?: number;\n        platinum?: number;\n    };\n};\n\ntype ResourceType = 'iron' | 'gold' | 'platinum';\ntype BlackjackGameResult = 'win' | 'blackjack' | 'lose' | 'bust' | 'push';\ntype BlackjackBet = {\n    amount: number;\n    resource?: ResourceType | null;\n};\ntype DealerPhraseType = 'win' | 'lose' | 'blackjack' | 'push';\n\nexport class BlackjackGame {\n    scene: unknown;\n    spaceship: BlackjackSpaceship;\n    audio: BlackjackAudio | null;\n    isMobile: boolean;\n    view: BlackjackGameView;\n    deck: BlackjackCardDeck;\n    gameLogic: BlackjackGameLogic;\n    animations: BlackjackAnimations;\n    betting: BlackjackBetting;\n    eventHandlers: BlackjackEventHandlers;\n    gameUI: HTMLDivElement | null;\n\n    constructor(scene: unknown, spaceship: BlackjackSpaceship, audio: BlackjackAudio | null) {\n        this.scene = scene;\n        this.spaceship = spaceship;\n        this.audio = audio;\n        this.isMobile = MobileDetector.isMobile();\n\n        console.log(\"BlackjackGame constructor - spaceship:\", this.spaceship);\n        console.log(\"BlackjackGame constructor - cargo:\", this.spaceship ? this.spaceship.cargo : null);\n        console.log(\"BlackjackGame constructor - isMobile:\", this.isMobile);\n        \n        // Initialize components\n        this.view = new BlackjackGameView(this.isMobile);\n        this.deck = new BlackjackCardDeck();\n        this.gameLogic = new BlackjackGameLogic();\n        this.animations = new BlackjackAnimations(this.audio as unknown as null);\n        this.betting = new BlackjackBetting(this.spaceship as unknown as null);\n        this.eventHandlers = new BlackjackEventHandlers(this, this.isMobile);\n        \n        // UI elements\n        this.gameUI = null;\n    }\n    \n    /**\n     * Initialize the game UI\n     */\n    init(): void {\n        if (!this.gameUI) {\n            this.createGameUI();\n        }\n    }\n    \n    /**\n     * Create the game UI elements\n     */\n    createGameUI(): void {\n        this.gameUI = this.view.createGameUI();\n        this.eventHandlers.initialize();\n        this.updateControls();\n    }\n    \n    /**\n     * Show the game UI and sync with current game resources\n     */\n    show(): void {\n        // Don't show during intro sequence\n        if (window.game && window.game.introSequenceActive) {\n            console.log(\"BlackjackGame: Not showing game UI during intro sequence\");\n            return;\n        }\n        \n        if (this.gameUI) {\n            this.view.show(this.gameUI);\n            this.reset();\n            \n            // Force audio context resumption for mobile\n            if (this.audio && this.isMobile) {\n                const audio = this.audio;\n                setTimeout(() => {\n                    console.log(\"Mobile: Attempting to play initial sound in BlackjackGame\");\n                    audio.playSound?.('boink');\n                }, 100);\n            }\n            \n            // Sync with game resources\n            this.betting.syncWithGameResources();\n            this.view.updateResourceDisplay(this.spaceship);\n            this.animations.playCardSound('boink');\n        } else {\n            this.init();\n            this.show();\n        }\n    }\n    \n    /**\n     * Hide the game UI and return to the stargate interface\n     */\n    hide(): void {\n        if (this.gameUI) {\n            this.view.hide(this.gameUI);\n            this.animations.playCardSound('boink');\n            \n            // Show the stargate interface when exiting blackjack\n            const stargateUI = document.getElementById('stargate-ui') as HTMLDivElement | null;\n            if (stargateUI) {\n                stargateUI.style.display = 'block';\n            }\n        }\n    }\n    \n    /**\n     * Reset the game state\n     */\n    reset(): void {\n        this.gameLogic.reset();\n        this.betting.reset();\n        \n        // Reset UI elements\n        this.view.clearCards(true);  // Player cards\n        this.view.clearCards(false); // Dealer cards\n        this.view.updateScore(0, true);  // Player score\n        this.view.updateScore(0, false); // Dealer score\n        this.view.updateGameStatus('PLACE YOUR BET TO BEGIN');\n        this.view.updateBetAmount('0');\n        \n        // Hide dealer speech\n        const speechBubble = document.getElementById('dealer-speech') as HTMLDivElement | null;\n        if (speechBubble) {\n            speechBubble.style.display = 'none';\n        }\n        \n        // Reset resource selection\n        document.querySelectorAll<HTMLElement>('.resource-btn').forEach(btn => {\n            this.animations.removeResourceSelection(btn);\n        });\n        \n        this.updateControls();\n    }\n    \n    /**\n     * Select a resource for betting\n     */\n    selectBetResource(resource: ResourceType): void {\n        this.betting.selectBetResource(resource);\n        const currentBet = this.betting.getCurrentBet() as BlackjackBet;\n        this.view.updateBetAmount(currentBet.amount);\n        this.updateControls();\n    }\n    \n    /**\n     * Update the game controls based on the current state\n     */\n    updateControls(): void {\n        this.eventHandlers.updateButtonStates();\n    }\n    \n    /**\n     * Start a new game\n     */\n    startGame(): void {\n        console.log(\"Starting game with bet:\", this.betting.getCurrentBet());\n        \n        if (!this.betting.hasValidBet()) {\n            console.log(\"No valid bet selected\");\n            return;\n        }\n        \n        // Initialize cargo if needed\n        if (!this.betting.initializeCargo()) {\n            this.view.updateGameStatus('ERROR: GAME DATA MISSING');\n            return;\n        }\n        \n        // Check if player has enough resources\n        if (!this.betting.canAffordBet()) {\n            this.view.updateGameStatus('NOT ENOUGH RESOURCES');\n            return;\n        }\n        \n        // Place the bet\n        if (!this.betting.placeBet()) {\n            this.view.updateGameStatus('BET FAILED');\n            return;\n        }\n        \n        this.view.updateResourceDisplay(this.spaceship);\n        \n        // Create and shuffle deck\n        this.deck.reset();\n        \n        // Clear previous hands and start game\n        this.gameLogic.startGame();\n        this.view.clearCards(true);\n        this.view.clearCards(false);\n        \n        // Deal initial cards\n        this.dealCardToPlayer();\n        this.dealCardToPlayer();\n        this.dealCardToDealer();\n        this.dealCardToDealer(true); // Face down\n        \n        // Check for natural blackjack\n        const naturalResult = this.gameLogic.checkForNaturalBlackjack() as BlackjackGameResult | null;\n        if (naturalResult) {\n            this.handleGameEnd(naturalResult);\n        } else {\n            this.view.updateGameStatus('YOUR MOVE');\n        }\n        \n        this.updateControls();\n        this.animations.playCardSound('deal');\n    }\n    \n    /**\n     * Deal a card to the player\n     */\n    dealCardToPlayer(): void {\n        const card = this.deck.drawCard();\n        this.gameLogic.addCardToPlayer(card);\n        \n        const cardEl = this.view.addCard(card, false, true);\n        if (cardEl) {\n            this.animations.animateCardDeal(cardEl);\n        }\n        \n        const score = this.gameLogic.getPlayerScore();\n        this.view.updateScore(score, true);\n        \n        if (this.gameLogic.isBust(this.gameLogic.getPlayerHand())) {\n            this.handleGameEnd('bust');\n        }\n    }\n    \n    /**\n     * Deal a card to the dealer\n     */\n    dealCardToDealer(faceDown = false): void {\n        const card = this.deck.drawCard();\n        this.gameLogic.addCardToDealer(card);\n        \n        const cardEl = this.view.addCard(card, faceDown, false);\n        if (cardEl) {\n            this.animations.animateCardDeal(cardEl);\n        }\n        \n        if (!faceDown) {\n            const visibleScore = this.gameLogic.calculateVisibleDealerScore();\n            this.view.updateScore(visibleScore, false);\n        }\n    }\n    \n    /**\n     * Player action: Hit (take another card)\n     */\n    hit(): void {\n        if (this.gameLogic.isGameActive()) {\n            this.dealCardToPlayer();\n            this.animations.playCardSound('hit');\n            this.updateControls();\n        }\n    }\n    \n    /**\n     * Player action: Stand (end turn)\n     */\n    stand(): void {\n        if (this.gameLogic.isGameActive()) {\n            this.animations.playCardSound('stand');\n            this.dealerPlay();\n        }\n    }\n    \n    /**\n     * Player action: Double Down\n     */\n    doubleDown(): void {\n        if (this.gameLogic.isGameActive() && this.gameLogic.getPlayerHand().length === 2) {\n            if (!this.betting.canAffordDoubleDown()) {\n                this.view.updateGameStatus('NOT ENOUGH RESOURCES FOR DOUBLE DOWN');\n                return;\n            }\n            \n            // Double the bet\n            this.betting.doubleDown();\n            this.view.updateResourceDisplay(this.spaceship);\n            \n            // Deal one more card\n            this.dealCardToPlayer();\n            \n            // If not bust, dealer plays\n            if (!this.gameLogic.isBust(this.gameLogic.getPlayerHand())) {\n                this.dealerPlay();\n            }\n            \n            this.animations.playCardSound('double');\n        }\n    }\n    \n    /**\n     * Dealer's turn to play\n     */\n    dealerPlay(): void {\n        // Reveal dealer's face-down card\n        const lastCard = this.gameLogic.getLastDealerCard();\n        if (lastCard) {\n            const faceDownCard = document.getElementById('face-down-card') as HTMLDivElement | null;\n            if (faceDownCard) {\n                this.animations.animateCardFlip(faceDownCard, () => {\n                    this.view.revealDealerCard(lastCard);\n                    this.view.updateScore(this.gameLogic.getDealerScore(), false);\n                });\n            } else {\n                this.view.revealDealerCard(lastCard);\n                this.view.updateScore(this.gameLogic.getDealerScore(), false);\n            }\n        }\n        \n        // Dealer hits until score is 17 or higher\n        const dealerPlayNextCard = (): void => {\n            if (this.gameLogic.shouldDealerHit()) {\n                this.dealCardToDealer();\n                this.animations.playCardSound('hit');\n                \n                setTimeout(() => {\n                    dealerPlayNextCard();\n                }, 800);\n            } else {\n                const result = this.gameLogic.determineOutcome() as BlackjackGameResult;\n                this.handleGameEnd(result);\n            }\n        };\n        \n        setTimeout(dealerPlayNextCard, 800);\n    }\n    \n    /**\n     * Handle game end with result\n     */\n    handleGameEnd(result: BlackjackGameResult): void {\n        this.gameLogic.endGame(result);\n        \n        let statusMessage = '';\n        let speechType: DealerPhraseType = result === 'bust' ? 'lose' : result;\n        \n        switch (result) {\n            case 'win':\n                this.betting.handleWin();\n                statusMessage = 'YOU WIN!';\n                if (this.gameUI) {\n                    this.animations.animateWinCelebration(this.gameUI);\n                }\n                this.animations.playCardSound('win');\n                break;\n                \n            case 'blackjack':\n                this.betting.handleBlackjack();\n                statusMessage = 'BLACKJACK! TRIPLE PAYOUT!';\n                if (this.gameUI) {\n                    this.animations.animateBlackjackCelebration(this.gameUI);\n                }\n                this.animations.playCardSound('blackjack');\n                break;\n                \n            case 'lose':\n            case 'bust':\n                statusMessage = result === 'bust' ? 'BUST! YOU LOSE' : 'DEALER WINS';\n                if (this.gameUI) {\n                    this.animations.animateLoseEffect(this.gameUI);\n                }\n                this.animations.playCardSound(result);\n                speechType = 'lose';\n                break;\n                \n            case 'push':\n                this.betting.handlePush();\n                statusMessage = 'PUSH - BETS RETURNED';\n                this.animations.playCardSound('push');\n                break;\n        }\n        \n        this.view.updateGameStatus(statusMessage);\n        this.view.updateResourceDisplay(this.spaceship);\n        \n        // Show dealer speech\n        const phrase = this.gameLogic.getDealerPhrase(speechType);\n        if (phrase) {\n            this.view.showDealerSpeech(phrase);\n        }\n        \n        this.updateControls();\n    }\n    \n    /**\n     * Cleanup method for destroying the game\n     */\n    destroy(): void {\n        if (this.eventHandlers) {\n            this.eventHandlers.destroy();\n        }\n        \n        if (this.gameUI && this.gameUI.parentNode) {\n            this.gameUI.parentNode.removeChild(this.gameUI);\n        }\n        \n        this.gameUI = null;\n    }\n}\n"],"names":["BlackjackStyles","isMobile","__publicField","baseStyles","isPlayer","faceDown","position","suit","color","element","styles","BlackjackGameView","gameUI","scanlines","header","gameArea","title","subtitle","closeBtn","dealerArea","statusArea","playerArea","controlsArea","dealerHeader","dealerCards","speechBubble","playerHeader","playerCards","scoreId","titleElement","score","gameStatus","bettingControls","gameActions","bettingTitle","resourceOptions","betAmountControls","resource","btn","resourceName","resourceAmount","betAmountDisplay","decreaseBtn","increaseBtn","button","id","text","card","cardEl","topValue","topSuit","centerSymbol","bottomValue","bottomSuit","pattern","holoEffect","backDesign","logo","spaceship","ironElement","goldElement","platinumElement","scoreElement","message","statusElement","amount","betElement","cardsContainer","duration","faceDownEl","BlackjackCardDeck","suits","values","value","i","j","BlackjackGameLogic","hand","aces","playerScore","dealerScore","currentBetAmount","maxBetAmount","type","phrases","result","BlackjackAnimations","audio","cardElement","delay","callback","buttonElement","newAmount","newScore","isBust","originalColor","flashColor","bgColor","borderColor","speechElement","isHovering","_a","_b","_c","_d","_e","_f","_g","_h","_i","_j","animations","animation","index","BlackjackBetting","maxAmount","game","payout","gameResources","BlackjackEventHandlers","handler","addHoverEffect","removeHoverEffect","clickHandler","e","betAmount","action","hoverStyles","enableHoverEffects","disableHoverEffects","buttonId","event","options","elementAsHTMLElement","key","listeners","dealBtn","hitBtn","standBtn","doubleBtn","canDouble","canDeal","keyHandler","resizeHandler","BlackjackGame","scene","MobileDetector","stargateUI","currentBet","naturalResult","visibleScore","lastCard","faceDownCard","dealerPlayNextCard","statusMessage","speechType","phrase"],"mappings":"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"}